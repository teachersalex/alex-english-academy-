(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Vw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ug={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=Symbol.for("react.element"),Fw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),qw=Symbol.for("react.strict_mode"),Bw=Symbol.for("react.profiler"),zw=Symbol.for("react.provider"),jw=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),$w=Symbol.for("react.memo"),Gw=Symbol.for("react.lazy"),yf=Symbol.iterator;function Xw(t){return t===null||typeof t!="object"?null:(t=yf&&t[yf]||t["@@iterator"],typeof t=="function"?t:null)}var qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bg=Object.assign,zg={};function io(t,e,n){this.props=t,this.context=e,this.refs=zg,this.updater=n||qg}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jg(){}jg.prototype=io.prototype;function Ud(t,e,n){this.props=t,this.context=e,this.refs=zg,this.updater=n||qg}var qd=Ud.prototype=new jg;qd.constructor=Ud;Bg(qd,io.prototype);qd.isPureReactComponent=!0;var vf=Array.isArray,Wg=Object.prototype.hasOwnProperty,Bd={current:null},Hg={key:!0,ref:!0,__self:!0,__source:!0};function $g(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)Wg.call(e,r)&&!Hg.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Di,type:t,key:o,ref:i,props:s,_owner:Bd.current}}function Kw(t,e){return{$$typeof:Di,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Di}function Qw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ef=/\/+/g;function qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qw(""+t.key):e.toString(36)}function Oa(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Di:case Fw:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+qc(i,0):r,vf(s)?(n="",t!=null&&(n=t.replace(Ef,"$&/")+"/"),Oa(s,e,n,"",function(h){return h})):s!=null&&(zd(s)&&(s=Kw(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ef,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",vf(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+qc(o,c);i+=Oa(o,e,n,u,s)}else if(u=Xw(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+qc(o,c++),i+=Oa(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ma(t,e,n){if(t==null)return t;var r=[],s=0;return Oa(t,r,"","",function(o){return e.call(n,o,s++)}),r}function Yw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Va={transition:null},Jw={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Va,ReactCurrentOwner:Bd};function Gg(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ma,forEach:function(t,e,n){ma(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ma(t,function(){e++}),e},toArray:function(t){return ma(t,function(e){return e})||[]},only:function(t){if(!zd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=io;ve.Fragment=Uw;ve.Profiler=Bw;ve.PureComponent=Ud;ve.StrictMode=qw;ve.Suspense=Hw;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw;ve.act=Gg;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bg({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=Bd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Wg.call(e,u)&&!Hg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Di,type:t.type,key:s,ref:o,props:r,_owner:i}};ve.createContext=function(t){return t={$$typeof:jw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zw,_context:t},t.Consumer=t};ve.createElement=$g;ve.createFactory=function(t){var e=$g.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Ww,render:t}};ve.isValidElement=zd;ve.lazy=function(t){return{$$typeof:Gw,_payload:{_status:-1,_result:t},_init:Yw}};ve.memo=function(t,e){return{$$typeof:$w,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Va.transition;Va.transition={};try{t()}finally{Va.transition=e}};ve.unstable_act=Gg;ve.useCallback=function(t,e){return Pt.current.useCallback(t,e)};ve.useContext=function(t){return Pt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Pt.current.useEffect(t,e)};ve.useId=function(){return Pt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Pt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};ve.useRef=function(t){return Pt.current.useRef(t)};ve.useState=function(t){return Pt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Pt.current.useTransition()};ve.version="18.3.1";Ug.exports=ve;var U=Ug.exports;const a=Vw(U);var xu={},Xg={exports:{}},jt={},Kg={exports:{}},Qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,Q){var X=j.length;j.push(Q);e:for(;0<X;){var le=X-1>>>1,oe=j[le];if(0<s(oe,Q))j[le]=Q,j[X]=oe,X=le;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var Q=j[0],X=j.pop();if(X!==Q){j[0]=X;e:for(var le=0,oe=j.length,he=oe>>>1;le<he;){var ce=2*(le+1)-1,fe=j[ce],Ne=ce+1,Ie=j[Ne];if(0>s(fe,X))Ne<oe&&0>s(Ie,fe)?(j[le]=Ie,j[Ne]=X,le=Ne):(j[le]=fe,j[ce]=X,le=ce);else if(Ne<oe&&0>s(Ie,X))j[le]=Ie,j[Ne]=X,le=Ne;else break e}}return Q}function s(j,Q){var X=j.sortIndex-Q.sortIndex;return X!==0?X:j.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var u=[],h=[],p=1,y=null,_=3,I=!1,L=!1,M=!1,F=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(j){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=j)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function D(j){if(M=!1,k(j),!L)if(n(u)!==null)L=!0,P(q);else{var Q=n(h);Q!==null&&Se(D,Q.startTime-j)}}function q(j,Q){L=!1,M&&(M=!1,N(g),g=-1),I=!0;var X=_;try{for(k(Q),y=n(u);y!==null&&(!(y.expirationTime>Q)||j&&!A());){var le=y.callback;if(typeof le=="function"){y.callback=null,_=y.priorityLevel;var oe=le(y.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?y.callback=oe:y===n(u)&&r(u),k(Q)}else r(u);y=n(u)}if(y!==null)var he=!0;else{var ce=n(h);ce!==null&&Se(D,ce.startTime-Q),he=!1}return he}finally{y=null,_=X,I=!1}}var z=!1,b=null,g=-1,E=5,x=-1;function A(){return!(t.unstable_now()-x<E)}function R(){if(b!==null){var j=t.unstable_now();x=j;var Q=!0;try{Q=b(!0,j)}finally{Q?w():(z=!1,b=null)}}else z=!1}var w;if(typeof S=="function")w=function(){S(R)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,re=Z.port2;Z.port1.onmessage=R,w=function(){re.postMessage(null)}}else w=function(){F(R,0)};function P(j){b=j,z||(z=!0,w())}function Se(j,Q){g=F(function(){j(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){L||I||(L=!0,P(q))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(j){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var X=_;_=Q;try{return j()}finally{_=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=_;_=j;try{return Q()}finally{_=X}},t.unstable_scheduleCallback=function(j,Q,X){var le=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,j){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,j={id:p++,callback:Q,priorityLevel:j,startTime:X,expirationTime:oe,sortIndex:-1},X>le?(j.sortIndex=X,e(h,j),n(u)===null&&j===n(h)&&(M?(N(g),g=-1):M=!0,Se(D,X-le))):(j.sortIndex=oe,e(u,j),L||I||(L=!0,P(q))),j},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(j){var Q=_;return function(){var X=_;_=Q;try{return j.apply(this,arguments)}finally{_=X}}}})(Qg);Kg.exports=Qg;var Zw=Kg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=U,zt=Zw;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yg=new Set,li={};function ns(t,e){Hs(t,e),Hs(t+"Capture",e)}function Hs(t,e){for(li[t]=e,t=0;t<e.length;t++)Yg.add(e[t])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=Object.prototype.hasOwnProperty,t_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf={},_f={};function n_(t){return Tu.call(_f,t)?!0:Tu.call(wf,t)?!1:t_.test(t)?_f[t]=!0:(wf[t]=!0,!1)}function r_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s_(t,e,n,r){if(e===null||typeof e>"u"||r_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var jd=/[\-:]([a-z])/g;function Wd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jd,Wd);mt[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jd,Wd);mt[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jd,Wd);mt[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hd(t,e,n,r){var s=mt.hasOwnProperty(e)?mt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s_(e,n,s,r)&&(n=null),r||s===null?n_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jn=e_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fa=Symbol.for("react.element"),bs=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),Jg=Symbol.for("react.provider"),Zg=Symbol.for("react.context"),Gd=Symbol.for("react.forward_ref"),Nu=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),Xd=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),e0=Symbol.for("react.offscreen"),bf=Symbol.iterator;function Io(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Bc;function Fo(t){if(Bc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bc=e&&e[1]||""}return`
`+Bc+t}var zc=!1;function jc(t,e){if(!t||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,c=o.length-1;1<=i&&0<=c&&s[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(s[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||s[i]!==o[c]){var u=`
`+s[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=c);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function o_(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=jc(t.type,!1),t;case 11:return t=jc(t.type.render,!1),t;case 1:return t=jc(t.type,!0),t;default:return""}}function Au(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case bs:return"Portal";case Su:return"Profiler";case $d:return"StrictMode";case Nu:return"Suspense";case ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zg:return(t.displayName||"Context")+".Consumer";case Jg:return(t._context.displayName||"Context")+".Provider";case Gd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xd:return e=t.displayName||null,e!==null?e:Au(t.type)||"Memo";case Yn:e=t._payload,t=t._init;try{return Au(t(e))}catch{}}return null}function i_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Au(e);case 8:return e===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function t0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a_(t){var e=t0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pa(t){t._valueTracker||(t._valueTracker=a_(t))}function n0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=t0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Iu(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function r0(t,e){e=e.checked,e!=null&&Hd(t,"checked",e,!1)}function Pu(t,e){r0(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cu(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cu(t,e,n){(e!=="number"||rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uo=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ru(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Uo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function s0(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ga,i0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ga=ga||document.createElement("div"),ga.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ga.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ci(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l_=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){l_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function a0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function l0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=a0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var c_=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Du(t,e){if(e){if(c_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Mu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=null;function Kd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vu=null,Os=null,Vs=null;function kf(t){if(t=Vi(t)){if(typeof Vu!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Xl(e),Vu(t.stateNode,t.type,e))}}function c0(t){Os?Vs?Vs.push(t):Vs=[t]:Os=t}function u0(){if(Os){var t=Os,e=Vs;if(Vs=Os=null,kf(t),e)for(t=0;t<e.length;t++)kf(e[t])}}function d0(t,e){return t(e)}function h0(){}var Wc=!1;function m0(t,e,n){if(Wc)return t(e,n);Wc=!0;try{return d0(t,e,n)}finally{Wc=!1,(Os!==null||Vs!==null)&&(h0(),u0())}}function ui(t,e){var n=t.stateNode;if(n===null)return null;var r=Xl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Fu=!1;if(Mn)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Fu=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Fu=!1}function u_(t,e,n,r,s,o,i,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ko=!1,sl=null,ol=!1,Uu=null,d_={onError:function(t){Ko=!0,sl=t}};function h_(t,e,n,r,s,o,i,c,u){Ko=!1,sl=null,u_.apply(d_,arguments)}function m_(t,e,n,r,s,o,i,c,u){if(h_.apply(this,arguments),Ko){if(Ko){var h=sl;Ko=!1,sl=null}else throw Error(G(198));ol||(ol=!0,Uu=h)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function f0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Af(t){if(rs(t)!==t)throw Error(G(188))}function f_(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Af(s),t;if(o===r)return Af(s),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,c=s.child;c;){if(c===n){i=!0,n=s,r=o;break}if(c===r){i=!0,r=s,n=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===n){i=!0,n=o,r=s;break}if(c===r){i=!0,r=o,n=s;break}c=c.sibling}if(!i)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function p0(t){return t=f_(t),t!==null?g0(t):null}function g0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=g0(t);if(e!==null)return e;t=t.sibling}return null}var y0=zt.unstable_scheduleCallback,If=zt.unstable_cancelCallback,p_=zt.unstable_shouldYield,g_=zt.unstable_requestPaint,Ye=zt.unstable_now,y_=zt.unstable_getCurrentPriorityLevel,Qd=zt.unstable_ImmediatePriority,v0=zt.unstable_UserBlockingPriority,il=zt.unstable_NormalPriority,v_=zt.unstable_LowPriority,E0=zt.unstable_IdlePriority,Wl=null,fn=null;function E_(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Wl,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:b_,w_=Math.log,__=Math.LN2;function b_(t){return t>>>=0,t===0?32:31-(w_(t)/__|0)|0}var ya=64,va=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var c=i&~s;c!==0?r=qo(c):(o&=i,o!==0&&(r=qo(o)))}else i=n&~s,i!==0?r=qo(i):o!==0&&(r=qo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),s=1<<n,r|=t[n],e&=~s;return r}function x_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-on(o),c=1<<i,u=s[i];u===-1?(!(c&n)||c&r)&&(s[i]=x_(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function qu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w0(){var t=ya;return ya<<=1,!(ya&4194240)&&(ya=64),t}function Hc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function S_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-on(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Yd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ce=0;function _0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var b0,Jd,x0,T0,S0,Bu=!1,Ea=[],lr=null,cr=null,ur=null,di=new Map,hi=new Map,Zn=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pf(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(e.pointerId)}}function Co(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Vi(e),e!==null&&Jd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function k_(t,e,n,r,s){switch(e){case"focusin":return lr=Co(lr,t,e,n,r,s),!0;case"dragenter":return cr=Co(cr,t,e,n,r,s),!0;case"mouseover":return ur=Co(ur,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return di.set(o,Co(di.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,hi.set(o,Co(hi.get(o)||null,t,e,n,r,s)),!0}return!1}function N0(t){var e=Vr(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=f0(n),e!==null){t.blockedOn=e,S0(t.priority,function(){x0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ou=r,n.target.dispatchEvent(r),Ou=null}else return e=Vi(n),e!==null&&Jd(e),t.blockedOn=n,!1;e.shift()}return!0}function Cf(t,e,n){Fa(t)&&n.delete(e)}function A_(){Bu=!1,lr!==null&&Fa(lr)&&(lr=null),cr!==null&&Fa(cr)&&(cr=null),ur!==null&&Fa(ur)&&(ur=null),di.forEach(Cf),hi.forEach(Cf)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,Bu||(Bu=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,A_)))}function mi(t){function e(s){return Ro(s,t)}if(0<Ea.length){Ro(Ea[0],t);for(var n=1;n<Ea.length;n++){var r=Ea[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lr!==null&&Ro(lr,t),cr!==null&&Ro(cr,t),ur!==null&&Ro(ur,t),di.forEach(e),hi.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&Zn.shift()}var Fs=jn.ReactCurrentBatchConfig,ll=!0;function I_(t,e,n,r){var s=Ce,o=Fs.transition;Fs.transition=null;try{Ce=1,Zd(t,e,n,r)}finally{Ce=s,Fs.transition=o}}function P_(t,e,n,r){var s=Ce,o=Fs.transition;Fs.transition=null;try{Ce=4,Zd(t,e,n,r)}finally{Ce=s,Fs.transition=o}}function Zd(t,e,n,r){if(ll){var s=zu(t,e,n,r);if(s===null)tu(t,e,r,cl,n),Pf(t,r);else if(k_(s,t,e,n,r))r.stopPropagation();else if(Pf(t,r),e&4&&-1<N_.indexOf(t)){for(;s!==null;){var o=Vi(s);if(o!==null&&b0(o),o=zu(t,e,n,r),o===null&&tu(t,e,r,cl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else tu(t,e,r,null,n)}}var cl=null;function zu(t,e,n,r){if(cl=null,t=Kd(r),t=Vr(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=f0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cl=t,null}function k0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y_()){case Qd:return 1;case v0:return 4;case il:case v_:return 16;case E0:return 536870912;default:return 16}default:return 16}}var or=null,eh=null,Ua=null;function A0(){if(Ua)return Ua;var t,e=eh,n=e.length,r,s="value"in or?or.value:or.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return Ua=s.slice(t,1<r?1-r:void 0)}function qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wa(){return!0}function Rf(){return!1}function Wt(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wa:Rf,this.isPropagationStopped=Rf,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=Wt(ao),Oi=He({},ao,{view:0,detail:0}),C_=Wt(Oi),$c,Gc,Lo,Hl=He({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?($c=t.screenX-Lo.screenX,Gc=t.screenY-Lo.screenY):Gc=$c=0,Lo=t),$c)},movementY:function(t){return"movementY"in t?t.movementY:Gc}}),Lf=Wt(Hl),R_=He({},Hl,{dataTransfer:0}),L_=Wt(R_),D_=He({},Oi,{relatedTarget:0}),Xc=Wt(D_),M_=He({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),O_=Wt(M_),V_=He({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),F_=Wt(V_),U_=He({},ao,{data:0}),Df=Wt(U_),q_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=z_[t])?!!e[t]:!1}function nh(){return j_}var W_=He({},Oi,{key:function(t){if(t.key){var e=q_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?B_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nh,charCode:function(t){return t.type==="keypress"?qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H_=Wt(W_),$_=He({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=Wt($_),G_=He({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nh}),X_=Wt(G_),K_=He({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q_=Wt(K_),Y_=He({},Hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J_=Wt(Y_),Z_=[9,13,27,32],rh=Mn&&"CompositionEvent"in window,Qo=null;Mn&&"documentMode"in document&&(Qo=document.documentMode);var eb=Mn&&"TextEvent"in window&&!Qo,I0=Mn&&(!rh||Qo&&8<Qo&&11>=Qo),Of=" ",Vf=!1;function P0(t,e){switch(t){case"keyup":return Z_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ts=!1;function tb(t,e){switch(t){case"compositionend":return C0(e);case"keypress":return e.which!==32?null:(Vf=!0,Of);case"textInput":return t=e.data,t===Of&&Vf?null:t;default:return null}}function nb(t,e){if(Ts)return t==="compositionend"||!rh&&P0(t,e)?(t=A0(),Ua=eh=or=null,Ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I0&&e.locale!=="ko"?null:e.data;default:return null}}var rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rb[t.type]:e==="textarea"}function R0(t,e,n,r){c0(r),e=ul(e,"onChange"),0<e.length&&(n=new th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,fi=null;function sb(t){j0(t,0)}function $l(t){var e=ks(t);if(n0(e))return t}function ob(t,e){if(t==="change")return e}var L0=!1;if(Mn){var Kc;if(Mn){var Qc="oninput"in document;if(!Qc){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Qc=typeof Uf.oninput=="function"}Kc=Qc}else Kc=!1;L0=Kc&&(!document.documentMode||9<document.documentMode)}function qf(){Yo&&(Yo.detachEvent("onpropertychange",D0),fi=Yo=null)}function D0(t){if(t.propertyName==="value"&&$l(fi)){var e=[];R0(e,fi,t,Kd(t)),m0(sb,e)}}function ib(t,e,n){t==="focusin"?(qf(),Yo=e,fi=n,Yo.attachEvent("onpropertychange",D0)):t==="focusout"&&qf()}function ab(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $l(fi)}function lb(t,e){if(t==="click")return $l(e)}function cb(t,e){if(t==="input"||t==="change")return $l(e)}function ub(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:ub;function pi(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Tu.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function Bf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zf(t,e){var n=Bf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bf(n)}}function M0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O0(){for(var t=window,e=rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rl(t.document)}return e}function sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function db(t){var e=O0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&M0(n.ownerDocument.documentElement,n)){if(r!==null&&sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=zf(n,o);var i=zf(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hb=Mn&&"documentMode"in document&&11>=document.documentMode,Ss=null,ju=null,Jo=null,Wu=!1;function jf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wu||Ss==null||Ss!==rl(r)||(r=Ss,"selectionStart"in r&&sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&pi(Jo,r)||(Jo=r,r=ul(ju,"onSelect"),0<r.length&&(e=new th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function _a(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Yc={},V0={};Mn&&(V0=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Gl(t){if(Yc[t])return Yc[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V0)return Yc[t]=e[n];return t}var F0=Gl("animationend"),U0=Gl("animationiteration"),q0=Gl("animationstart"),B0=Gl("transitionend"),z0=new Map,Wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){z0.set(t,e),ns(e,[t])}for(var Jc=0;Jc<Wf.length;Jc++){var Zc=Wf[Jc],mb=Zc.toLowerCase(),fb=Zc[0].toUpperCase()+Zc.slice(1);Sr(mb,"on"+fb)}Sr(F0,"onAnimationEnd");Sr(U0,"onAnimationIteration");Sr(q0,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(B0,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Hf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,m_(r,e,void 0,t),t.currentTarget=null}function j0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var c=r[i],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==o&&s.isPropagationStopped())break e;Hf(s,c,h),o=u}else for(i=0;i<r.length;i++){if(c=r[i],u=c.instance,h=c.currentTarget,c=c.listener,u!==o&&s.isPropagationStopped())break e;Hf(s,c,h),o=u}}}if(ol)throw t=Uu,ol=!1,Uu=null,t}function Oe(t,e){var n=e[Ku];n===void 0&&(n=e[Ku]=new Set);var r=t+"__bubble";n.has(r)||(W0(e,t,2,!1),n.add(r))}function eu(t,e,n){var r=0;e&&(r|=4),W0(n,t,r,e)}var ba="_reactListening"+Math.random().toString(36).slice(2);function gi(t){if(!t[ba]){t[ba]=!0,Yg.forEach(function(n){n!=="selectionchange"&&(pb.has(n)||eu(n,!1,t),eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ba]||(e[ba]=!0,eu("selectionchange",!1,e))}}function W0(t,e,n,r){switch(k0(e)){case 1:var s=I_;break;case 4:s=P_;break;default:s=Zd}n=s.bind(null,e,n,t),s=void 0,!Fu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tu(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;c!==null;){if(i=Vr(c),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}c=c.parentNode}}r=r.return}m0(function(){var h=o,p=Kd(n),y=[];e:{var _=z0.get(t);if(_!==void 0){var I=th,L=t;switch(t){case"keypress":if(qa(n)===0)break e;case"keydown":case"keyup":I=H_;break;case"focusin":L="focus",I=Xc;break;case"focusout":L="blur",I=Xc;break;case"beforeblur":case"afterblur":I=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=L_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=X_;break;case F0:case U0:case q0:I=O_;break;case B0:I=Q_;break;case"scroll":I=C_;break;case"wheel":I=J_;break;case"copy":case"cut":case"paste":I=F_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Mf}var M=(e&4)!==0,F=!M&&t==="scroll",N=M?_!==null?_+"Capture":null:_;M=[];for(var S=h,k;S!==null;){k=S;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,N!==null&&(D=ui(S,N),D!=null&&M.push(yi(S,D,k)))),F)break;S=S.return}0<M.length&&(_=new I(_,L,null,n,p),y.push({event:_,listeners:M}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==Ou&&(L=n.relatedTarget||n.fromElement)&&(Vr(L)||L[On]))break e;if((I||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,I?(L=n.relatedTarget||n.toElement,I=h,L=L?Vr(L):null,L!==null&&(F=rs(L),L!==F||L.tag!==5&&L.tag!==6)&&(L=null)):(I=null,L=h),I!==L)){if(M=Lf,D="onMouseLeave",N="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(M=Mf,D="onPointerLeave",N="onPointerEnter",S="pointer"),F=I==null?_:ks(I),k=L==null?_:ks(L),_=new M(D,S+"leave",I,n,p),_.target=F,_.relatedTarget=k,D=null,Vr(p)===h&&(M=new M(N,S+"enter",L,n,p),M.target=k,M.relatedTarget=F,D=M),F=D,I&&L)t:{for(M=I,N=L,S=0,k=M;k;k=ds(k))S++;for(k=0,D=N;D;D=ds(D))k++;for(;0<S-k;)M=ds(M),S--;for(;0<k-S;)N=ds(N),k--;for(;S--;){if(M===N||N!==null&&M===N.alternate)break t;M=ds(M),N=ds(N)}M=null}else M=null;I!==null&&$f(y,_,I,M,!1),L!==null&&F!==null&&$f(y,F,L,M,!0)}}e:{if(_=h?ks(h):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var q=ob;else if(Ff(_))if(L0)q=cb;else{q=ab;var z=ib}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(q=lb);if(q&&(q=q(t,h))){R0(y,q,n,p);break e}z&&z(t,_,h),t==="focusout"&&(z=_._wrapperState)&&z.controlled&&_.type==="number"&&Cu(_,"number",_.value)}switch(z=h?ks(h):window,t){case"focusin":(Ff(z)||z.contentEditable==="true")&&(Ss=z,ju=h,Jo=null);break;case"focusout":Jo=ju=Ss=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,jf(y,n,p);break;case"selectionchange":if(hb)break;case"keydown":case"keyup":jf(y,n,p)}var b;if(rh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ts?P0(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(I0&&n.locale!=="ko"&&(Ts||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ts&&(b=A0()):(or=p,eh="value"in or?or.value:or.textContent,Ts=!0)),z=ul(h,g),0<z.length&&(g=new Df(g,t,null,n,p),y.push({event:g,listeners:z}),b?g.data=b:(b=C0(n),b!==null&&(g.data=b)))),(b=eb?tb(t,n):nb(t,n))&&(h=ul(h,"onBeforeInput"),0<h.length&&(p=new Df("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:h}),p.data=b))}j0(y,e)})}function yi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ui(t,n),o!=null&&r.unshift(yi(t,o,s)),o=ui(t,e),o!=null&&r.push(yi(t,o,s))),t=t.return}return r}function ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $f(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=ui(n,o),u!=null&&i.unshift(yi(n,u,c))):s||(u=ui(n,o),u!=null&&i.push(yi(n,u,c)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var gb=/\r\n?/g,yb=/\u0000|\uFFFD/g;function Gf(t){return(typeof t=="string"?t:""+t).replace(gb,`
`).replace(yb,"")}function xa(t,e,n){if(e=Gf(e),Gf(t)!==e&&n)throw Error(G(425))}function dl(){}var Hu=null,$u=null;function Gu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,vb=typeof clearTimeout=="function"?clearTimeout:void 0,Xf=typeof Promise=="function"?Promise:void 0,Eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Xf<"u"?function(t){return Xf.resolve(null).then(t).catch(wb)}:Xu;function wb(t){setTimeout(function(){throw t})}function nu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mi(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),hn="__reactFiber$"+lo,vi="__reactProps$"+lo,On="__reactContainer$"+lo,Ku="__reactEvents$"+lo,_b="__reactListeners$"+lo,bb="__reactHandles$"+lo;function Vr(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kf(t);t!==null;){if(n=t[hn])return n;t=Kf(t)}return e}t=n,n=t.parentNode}return null}function Vi(t){return t=t[hn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Xl(t){return t[vi]||null}var Qu=[],As=-1;function Nr(t){return{current:t}}function Ve(t){0>As||(t.current=Qu[As],Qu[As]=null,As--)}function De(t,e){As++,Qu[As]=t.current,t.current=e}var _r={},Tt=Nr(_r),Dt=Nr(!1),Wr=_r;function $s(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function hl(){Ve(Dt),Ve(Tt)}function Qf(t,e,n){if(Tt.current!==_r)throw Error(G(168));De(Tt,e),De(Dt,n)}function H0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,i_(t)||"Unknown",s));return He({},n,r)}function ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Wr=Tt.current,De(Tt,t),De(Dt,Dt.current),!0}function Yf(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=H0(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,Ve(Dt),Ve(Tt),De(Tt,t)):Ve(Dt),De(Dt,n)}var Sn=null,Kl=!1,ru=!1;function $0(t){Sn===null?Sn=[t]:Sn.push(t)}function xb(t){Kl=!0,$0(t)}function kr(){if(!ru&&Sn!==null){ru=!0;var t=0,e=Ce;try{var n=Sn;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,Kl=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(t+1)),y0(Qd,kr),s}finally{Ce=e,ru=!1}}return null}var Is=[],Ps=0,fl=null,pl=0,Ht=[],$t=0,Hr=null,Nn=1,kn="";function Dr(t,e){Is[Ps++]=pl,Is[Ps++]=fl,fl=t,pl=e}function G0(t,e,n){Ht[$t++]=Nn,Ht[$t++]=kn,Ht[$t++]=Hr,Hr=t;var r=Nn;t=kn;var s=32-on(r)-1;r&=~(1<<s),n+=1;var o=32-on(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Nn=1<<32-on(e)+s|n<<s|r,kn=o+t}else Nn=1<<o|n<<s|r,kn=t}function oh(t){t.return!==null&&(Dr(t,1),G0(t,1,0))}function ih(t){for(;t===fl;)fl=Is[--Ps],Is[Ps]=null,pl=Is[--Ps],Is[Ps]=null;for(;t===Hr;)Hr=Ht[--$t],Ht[$t]=null,kn=Ht[--$t],Ht[$t]=null,Nn=Ht[--$t],Ht[$t]=null}var qt=null,Ut=null,Ue=!1,rn=null;function X0(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Ut=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hr!==null?{id:Nn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Ut=null,!0):!1;default:return!1}}function Yu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ju(t){if(Ue){var e=Ut;if(e){var n=e;if(!Jf(t,e)){if(Yu(t))throw Error(G(418));e=dr(n.nextSibling);var r=qt;e&&Jf(t,e)?X0(r,n):(t.flags=t.flags&-4097|2,Ue=!1,qt=t)}}else{if(Yu(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ue=!1,qt=t}}}function Zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Ta(t){if(t!==qt)return!1;if(!Ue)return Zf(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gu(t.type,t.memoizedProps)),e&&(e=Ut)){if(Yu(t))throw K0(),Error(G(418));for(;e;)X0(t,e),e=dr(e.nextSibling)}if(Zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=qt?dr(t.stateNode.nextSibling):null;return!0}function K0(){for(var t=Ut;t;)t=dr(t.nextSibling)}function Gs(){Ut=qt=null,Ue=!1}function ah(t){rn===null?rn=[t]:rn.push(t)}var Tb=jn.ReactCurrentBatchConfig;function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var c=s.refs;i===null?delete c[o]:c[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Sa(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ep(t){var e=t._init;return e(t._payload)}function Q0(t){function e(N,S){if(t){var k=N.deletions;k===null?(N.deletions=[S],N.flags|=16):k.push(S)}}function n(N,S){if(!t)return null;for(;S!==null;)e(N,S),S=S.sibling;return null}function r(N,S){for(N=new Map;S!==null;)S.key!==null?N.set(S.key,S):N.set(S.index,S),S=S.sibling;return N}function s(N,S){return N=pr(N,S),N.index=0,N.sibling=null,N}function o(N,S,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<S?(N.flags|=2,S):k):(N.flags|=2,S)):(N.flags|=1048576,S)}function i(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,S,k,D){return S===null||S.tag!==6?(S=uu(k,N.mode,D),S.return=N,S):(S=s(S,k),S.return=N,S)}function u(N,S,k,D){var q=k.type;return q===xs?p(N,S,k.props.children,D,k.key):S!==null&&(S.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Yn&&ep(q)===S.type)?(D=s(S,k.props),D.ref=Do(N,S,k),D.return=N,D):(D=Ga(k.type,k.key,k.props,null,N.mode,D),D.ref=Do(N,S,k),D.return=N,D)}function h(N,S,k,D){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=du(k,N.mode,D),S.return=N,S):(S=s(S,k.children||[]),S.return=N,S)}function p(N,S,k,D,q){return S===null||S.tag!==7?(S=zr(k,N.mode,D,q),S.return=N,S):(S=s(S,k),S.return=N,S)}function y(N,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=uu(""+S,N.mode,k),S.return=N,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fa:return k=Ga(S.type,S.key,S.props,null,N.mode,k),k.ref=Do(N,null,S),k.return=N,k;case bs:return S=du(S,N.mode,k),S.return=N,S;case Yn:var D=S._init;return y(N,D(S._payload),k)}if(Uo(S)||Io(S))return S=zr(S,N.mode,k,null),S.return=N,S;Sa(N,S)}return null}function _(N,S,k,D){var q=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return q!==null?null:c(N,S,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fa:return k.key===q?u(N,S,k,D):null;case bs:return k.key===q?h(N,S,k,D):null;case Yn:return q=k._init,_(N,S,q(k._payload),D)}if(Uo(k)||Io(k))return q!==null?null:p(N,S,k,D,null);Sa(N,k)}return null}function I(N,S,k,D,q){if(typeof D=="string"&&D!==""||typeof D=="number")return N=N.get(k)||null,c(S,N,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case fa:return N=N.get(D.key===null?k:D.key)||null,u(S,N,D,q);case bs:return N=N.get(D.key===null?k:D.key)||null,h(S,N,D,q);case Yn:var z=D._init;return I(N,S,k,z(D._payload),q)}if(Uo(D)||Io(D))return N=N.get(k)||null,p(S,N,D,q,null);Sa(S,D)}return null}function L(N,S,k,D){for(var q=null,z=null,b=S,g=S=0,E=null;b!==null&&g<k.length;g++){b.index>g?(E=b,b=null):E=b.sibling;var x=_(N,b,k[g],D);if(x===null){b===null&&(b=E);break}t&&b&&x.alternate===null&&e(N,b),S=o(x,S,g),z===null?q=x:z.sibling=x,z=x,b=E}if(g===k.length)return n(N,b),Ue&&Dr(N,g),q;if(b===null){for(;g<k.length;g++)b=y(N,k[g],D),b!==null&&(S=o(b,S,g),z===null?q=b:z.sibling=b,z=b);return Ue&&Dr(N,g),q}for(b=r(N,b);g<k.length;g++)E=I(b,N,g,k[g],D),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?g:E.key),S=o(E,S,g),z===null?q=E:z.sibling=E,z=E);return t&&b.forEach(function(A){return e(N,A)}),Ue&&Dr(N,g),q}function M(N,S,k,D){var q=Io(k);if(typeof q!="function")throw Error(G(150));if(k=q.call(k),k==null)throw Error(G(151));for(var z=q=null,b=S,g=S=0,E=null,x=k.next();b!==null&&!x.done;g++,x=k.next()){b.index>g?(E=b,b=null):E=b.sibling;var A=_(N,b,x.value,D);if(A===null){b===null&&(b=E);break}t&&b&&A.alternate===null&&e(N,b),S=o(A,S,g),z===null?q=A:z.sibling=A,z=A,b=E}if(x.done)return n(N,b),Ue&&Dr(N,g),q;if(b===null){for(;!x.done;g++,x=k.next())x=y(N,x.value,D),x!==null&&(S=o(x,S,g),z===null?q=x:z.sibling=x,z=x);return Ue&&Dr(N,g),q}for(b=r(N,b);!x.done;g++,x=k.next())x=I(b,N,g,x.value,D),x!==null&&(t&&x.alternate!==null&&b.delete(x.key===null?g:x.key),S=o(x,S,g),z===null?q=x:z.sibling=x,z=x);return t&&b.forEach(function(R){return e(N,R)}),Ue&&Dr(N,g),q}function F(N,S,k,D){if(typeof k=="object"&&k!==null&&k.type===xs&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case fa:e:{for(var q=k.key,z=S;z!==null;){if(z.key===q){if(q=k.type,q===xs){if(z.tag===7){n(N,z.sibling),S=s(z,k.props.children),S.return=N,N=S;break e}}else if(z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Yn&&ep(q)===z.type){n(N,z.sibling),S=s(z,k.props),S.ref=Do(N,z,k),S.return=N,N=S;break e}n(N,z);break}else e(N,z);z=z.sibling}k.type===xs?(S=zr(k.props.children,N.mode,D,k.key),S.return=N,N=S):(D=Ga(k.type,k.key,k.props,null,N.mode,D),D.ref=Do(N,S,k),D.return=N,N=D)}return i(N);case bs:e:{for(z=k.key;S!==null;){if(S.key===z)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){n(N,S.sibling),S=s(S,k.children||[]),S.return=N,N=S;break e}else{n(N,S);break}else e(N,S);S=S.sibling}S=du(k,N.mode,D),S.return=N,N=S}return i(N);case Yn:return z=k._init,F(N,S,z(k._payload),D)}if(Uo(k))return L(N,S,k,D);if(Io(k))return M(N,S,k,D);Sa(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(n(N,S.sibling),S=s(S,k),S.return=N,N=S):(n(N,S),S=uu(k,N.mode,D),S.return=N,N=S),i(N)):n(N,S)}return F}var Xs=Q0(!0),Y0=Q0(!1),gl=Nr(null),yl=null,Cs=null,lh=null;function ch(){lh=Cs=yl=null}function uh(t){var e=gl.current;Ve(gl),t._currentValue=e}function Zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){yl=t,lh=Cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(lh!==t)if(t={context:t,memoizedValue:e,next:null},Cs===null){if(yl===null)throw Error(G(308));Cs=t,yl.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return e}var Fr=null;function dh(t){Fr===null?Fr=[t]:Fr.push(t)}function J0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,dh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function Ba(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}function tp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vl(t,e,n,r){var s=t.updateQueue;Jn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,i===null?o=h:i.next=h,i=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==i&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(o!==null){var y=s.baseState;i=0,p=h=u=null,c=o;do{var _=c.lane,I=c.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var L=t,M=c;switch(_=e,I=n,M.tag){case 1:if(L=M.payload,typeof L=="function"){y=L.call(I,y,_);break e}y=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=M.payload,_=typeof L=="function"?L.call(I,y,_):L,_==null)break e;y=He({},y,_);break e;case 2:Jn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[c]:_.push(c))}else I={eventTime:I,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=I,u=y):p=p.next=I,i|=_;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;_=c,c=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(u=y),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Gr|=i,t.lanes=i,t.memoizedState=y}}function np(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Fi={},pn=Nr(Fi),Ei=Nr(Fi),wi=Nr(Fi);function Ur(t){if(t===Fi)throw Error(G(174));return t}function mh(t,e){switch(De(wi,e),De(Ei,t),De(pn,Fi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lu(e,t)}Ve(pn),De(pn,e)}function Ks(){Ve(pn),Ve(Ei),Ve(wi)}function ey(t){Ur(wi.current);var e=Ur(pn.current),n=Lu(e,t.type);e!==n&&(De(Ei,t),De(pn,n))}function fh(t){Ei.current===t&&(Ve(pn),Ve(Ei))}var je=Nr(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var su=[];function ph(){for(var t=0;t<su.length;t++)su[t]._workInProgressVersionPrimary=null;su.length=0}var za=jn.ReactCurrentDispatcher,ou=jn.ReactCurrentBatchConfig,$r=0,We=null,et=null,ot=null,wl=!1,Zo=!1,_i=0,Sb=0;function vt(){throw Error(G(321))}function gh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function yh(t,e,n,r,s,o){if($r=o,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,za.current=t===null||t.memoizedState===null?Ib:Pb,t=n(r,s),Zo){o=0;do{if(Zo=!1,_i=0,25<=o)throw Error(G(301));o+=1,ot=et=null,e.updateQueue=null,za.current=Cb,t=n(r,s)}while(Zo)}if(za.current=_l,e=et!==null&&et.next!==null,$r=0,ot=et=We=null,wl=!1,e)throw Error(G(300));return t}function vh(){var t=_i!==0;return _i=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?We.memoizedState=ot=t:ot=ot.next=t,ot}function Yt(){if(et===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=ot===null?We.memoizedState:ot.next;if(e!==null)ot=e,et=t;else{if(t===null)throw Error(G(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ot===null?We.memoizedState=ot=t:ot=ot.next=t}return ot}function bi(t,e){return typeof e=="function"?e(t):e}function iu(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=et,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=i=null,u=null,h=o;do{var p=h.lane;if(($r&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=y,i=r):u=u.next=y,We.lanes|=p,Gr|=p}h=h.next}while(h!==null&&h!==o);u===null?i=r:u.next=c,ln(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,We.lanes|=o,Gr|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function au(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);ln(o,e.memoizedState)||(Lt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ty(){}function ny(t,e){var n=We,r=Yt(),s=e(),o=!ln(r.memoizedState,s);if(o&&(r.memoizedState=s,Lt=!0),r=r.queue,Eh(oy.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,xi(9,sy.bind(null,n,r,s,e),void 0,null),it===null)throw Error(G(349));$r&30||ry(n,e,s)}return s}function ry(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sy(t,e,n,r){e.value=n,e.getSnapshot=r,iy(e)&&ay(t)}function oy(t,e,n){return n(function(){iy(e)&&ay(t)})}function iy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function ay(t){var e=Vn(t,1);e!==null&&an(e,t,1,-1)}function rp(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:t},e.queue=t,t=t.dispatch=Ab.bind(null,We,t),[e.memoizedState,t]}function xi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ly(){return Yt().memoizedState}function ja(t,e,n,r){var s=dn();We.flags|=t,s.memoizedState=xi(1|e,n,void 0,r===void 0?null:r)}function Ql(t,e,n,r){var s=Yt();r=r===void 0?null:r;var o=void 0;if(et!==null){var i=et.memoizedState;if(o=i.destroy,r!==null&&gh(r,i.deps)){s.memoizedState=xi(e,n,o,r);return}}We.flags|=t,s.memoizedState=xi(1|e,n,o,r)}function sp(t,e){return ja(8390656,8,t,e)}function Eh(t,e){return Ql(2048,8,t,e)}function cy(t,e){return Ql(4,2,t,e)}function uy(t,e){return Ql(4,4,t,e)}function dy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hy(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4,4,dy.bind(null,e,t),n)}function wh(){}function my(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fy(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function py(t,e,n){return $r&21?(ln(n,e)||(n=w0(),We.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function Nb(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=ou.transition;ou.transition={};try{t(!1),e()}finally{Ce=n,ou.transition=r}}function gy(){return Yt().memoizedState}function kb(t,e,n){var r=fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yy(t))vy(e,n);else if(n=J0(t,e,n,r),n!==null){var s=It();an(n,t,r,s),Ey(n,e,r)}}function Ab(t,e,n){var r=fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yy(t))vy(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,c=o(i,n);if(s.hasEagerState=!0,s.eagerState=c,ln(c,i)){var u=e.interleaved;u===null?(s.next=s,dh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=J0(t,e,s,r),n!==null&&(s=It(),an(n,t,r,s),Ey(n,e,r))}}function yy(t){var e=t.alternate;return t===We||e!==null&&e===We}function vy(t,e){Zo=wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ey(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}var _l={readContext:Qt,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},Ib={readContext:Qt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:sp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ja(4194308,4,dy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return ja(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kb.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:rp,useDebugValue:wh,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=rp(!1),e=t[0];return t=Nb.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,s=dn();if(Ue){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),it===null)throw Error(G(349));$r&30||ry(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,sp(oy.bind(null,r,o,t),[t]),r.flags|=2048,xi(9,sy.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=dn(),e=it.identifierPrefix;if(Ue){var n=kn,r=Nn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pb={readContext:Qt,useCallback:my,useContext:Qt,useEffect:Eh,useImperativeHandle:hy,useInsertionEffect:cy,useLayoutEffect:uy,useMemo:fy,useReducer:iu,useRef:ly,useState:function(){return iu(bi)},useDebugValue:wh,useDeferredValue:function(t){var e=Yt();return py(e,et.memoizedState,t)},useTransition:function(){var t=iu(bi)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1},Cb={readContext:Qt,useCallback:my,useContext:Qt,useEffect:Eh,useImperativeHandle:hy,useInsertionEffect:cy,useLayoutEffect:uy,useMemo:fy,useReducer:au,useRef:ly,useState:function(){return au(bi)},useDebugValue:wh,useDeferredValue:function(t){var e=Yt();return et===null?e.memoizedState=t:py(e,et.memoizedState,t)},useTransition:function(){var t=au(bi)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:ty,useSyncExternalStore:ny,useId:gy,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ed(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yl={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=fr(t),o=Cn(r,s);o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,s),e!==null&&(an(e,t,s,r),Ba(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=fr(t),o=Cn(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,s),e!==null&&(an(e,t,s,r),Ba(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=fr(t),s=Cn(n,r);s.tag=2,e!=null&&(s.callback=e),e=hr(t,s,r),e!==null&&(an(e,t,r,n),Ba(e,t,r))}};function op(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!pi(n,r)||!pi(s,o):!0}function wy(t,e,n){var r=!1,s=_r,o=e.contextType;return typeof o=="object"&&o!==null?o=Qt(o):(s=Mt(e)?Wr:Tt.current,r=e.contextTypes,o=(r=r!=null)?$s(t,s):_r),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ip(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yl.enqueueReplaceState(e,e.state,null)}function td(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hh(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Qt(o):(o=Mt(e)?Wr:Tt.current,s.context=$s(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ed(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Yl.enqueueReplaceState(s,s.state,null),vl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qs(t,e){try{var n="",r=e;do n+=o_(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function lu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Rb=typeof WeakMap=="function"?WeakMap:Map;function _y(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xl||(xl=!0,hd=r),nd(t,e)},n}function by(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){nd(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function ap(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Rb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=$b.bind(null,t,e,n),e.then(t,t))}function lp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var Lb=jn.ReactCurrentOwner,Lt=!1;function At(t,e,n,r){e.child=t===null?Y0(e,null,n,r):Xs(e,t.child,n,r)}function up(t,e,n,r,s){n=n.render;var o=e.ref;return Us(e,s),r=yh(t,e,n,r,o,s),n=vh(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Ue&&n&&oh(e),e.flags|=1,At(t,e,r,s),e.child)}function dp(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Ah(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,xy(t,e,o,r,s)):(t=Ga(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:pi,n(i,r)&&t.ref===e.ref)return Fn(t,e,s)}return e.flags|=1,t=pr(o,r),t.ref=e.ref,t.return=e,e.child=t}function xy(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(pi(o,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,Fn(t,e,s)}return rd(t,e,n,r,s)}function Ty(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ls,Ft),Ft|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ls,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,De(Ls,Ft),Ft|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,De(Ls,Ft),Ft|=r;return At(t,e,s,n),e.child}function Sy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rd(t,e,n,r,s){var o=Mt(n)?Wr:Tt.current;return o=$s(e,o),Us(e,s),n=yh(t,e,n,r,o,s),r=vh(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Ue&&r&&oh(e),e.flags|=1,At(t,e,n,s),e.child)}function hp(t,e,n,r,s){if(Mt(n)){var o=!0;ml(e)}else o=!1;if(Us(e,s),e.stateNode===null)Wa(t,e),wy(e,n,r),td(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,c=e.memoizedProps;i.props=c;var u=i.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qt(h):(h=Mt(n)?Wr:Tt.current,h=$s(e,h));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==r||u!==h)&&ip(e,i,r,h),Jn=!1;var _=e.memoizedState;i.state=_,vl(e,r,i,s),u=e.memoizedState,c!==r||_!==u||Dt.current||Jn?(typeof p=="function"&&(ed(e,n,p,r),u=e.memoizedState),(c=Jn||op(e,n,c,r,_,u,h))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=h,r=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Z0(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:tn(e.type,c),i.props=h,y=e.pendingProps,_=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qt(u):(u=Mt(n)?Wr:Tt.current,u=$s(e,u));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==y||_!==u)&&ip(e,i,r,u),Jn=!1,_=e.memoizedState,i.state=_,vl(e,r,i,s);var L=e.memoizedState;c!==y||_!==L||Dt.current||Jn?(typeof I=="function"&&(ed(e,n,I,r),L=e.memoizedState),(h=Jn||op(e,n,h,r,_,L,u)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,L,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,L,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=L),i.props=r,i.state=L,i.context=u,r=h):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return sd(t,e,n,r,o,s)}function sd(t,e,n,r,s,o){Sy(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&Yf(e,n,!1),Fn(t,e,o);r=e.stateNode,Lb.current=e;var c=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Xs(e,t.child,null,o),e.child=Xs(e,null,c,o)):At(t,e,c,o),e.memoizedState=r.state,s&&Yf(e,n,!0),e.child}function Ny(t){var e=t.stateNode;e.pendingContext?Qf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qf(t,e.context,!1),mh(t,e.containerInfo)}function mp(t,e,n,r,s){return Gs(),ah(s),e.flags|=256,At(t,e,n,r),e.child}var od={dehydrated:null,treeContext:null,retryLane:0};function id(t){return{baseLanes:t,cachePool:null,transitions:null}}function ky(t,e,n){var r=e.pendingProps,s=je.current,o=!1,i=(e.flags&128)!==0,c;if((c=i)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De(je,s&1),t===null)return Ju(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ec(i,r,0,null),t=zr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=id(n),e.memoizedState=od,t):_h(e,i));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Db(t,e,i,r,c,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=pr(c,o):(o=zr(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?id(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=od,r}return o=t.child,t=o.sibling,r=pr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _h(t,e){return e=ec({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Na(t,e,n,r){return r!==null&&ah(r),Xs(e,t.child,null,n),t=_h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Db(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=lu(Error(G(422))),Na(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=ec({mode:"visible",children:r.children},s,0,null),o=zr(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xs(e,t.child,null,i),e.child.memoizedState=id(i),e.memoizedState=od,o);if(!(e.mode&1))return Na(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(G(419)),r=lu(o,r,void 0),Na(t,e,i,r)}if(c=(i&t.childLanes)!==0,Lt||c){if(r=it,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Vn(t,s),an(r,t,s,-1))}return kh(),r=lu(Error(G(421))),Na(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Gb.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Ut=dr(s.nextSibling),qt=e,Ue=!0,rn=null,t!==null&&(Ht[$t++]=Nn,Ht[$t++]=kn,Ht[$t++]=Hr,Nn=t.id,kn=t.overflow,Hr=e),e=_h(e,r.children),e.flags|=4096,e)}function fp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zu(t.return,e,n)}function cu(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Ay(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(At(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,n,e);else if(t.tag===19)fp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cu(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&El(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cu(e,!0,n,null,o);break;case"together":cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mb(t,e,n){switch(e.tag){case 3:Ny(e),Gs();break;case 5:ey(e);break;case 1:Mt(e.type)&&ml(e);break;case 4:mh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;De(gl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?ky(t,e,n):(De(je,je.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);De(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ay(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,Ty(t,e,n)}return Fn(t,e,n)}var Iy,ad,Py,Cy;Iy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ad=function(){};Py=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ur(pn.current);var o=null;switch(n){case"input":s=Iu(t,s),r=Iu(t,r),o=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),o=[];break;case"textarea":s=Ru(t,s),r=Ru(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dl)}Du(n,r);var i;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(li.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(li.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Oe("scroll",t),o||c===u||(o=[])):(o=o||[]).push(h,u))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};Cy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ob(t,e,n){var r=e.pendingProps;switch(ih(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Mt(e.type)&&hl(),Et(e),null;case 3:return r=e.stateNode,Ks(),Ve(Dt),Ve(Tt),ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(pd(rn),rn=null))),ad(t,e),Et(e),null;case 5:fh(e);var s=Ur(wi.current);if(n=e.type,t!==null&&e.stateNode!=null)Py(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Et(e),null}if(t=Ur(pn.current),Ta(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[hn]=e,r[vi]=o,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(s=0;s<Bo.length;s++)Oe(Bo[s],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":xf(r,o),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oe("invalid",r);break;case"textarea":Sf(r,o),Oe("invalid",r)}Du(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&xa(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&xa(r.textContent,c,t),s=["children",""+c]):li.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Oe("scroll",r)}switch(n){case"input":pa(r),Tf(r,o,!0);break;case"textarea":pa(r),Nf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=dl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[hn]=e,t[vi]=r,Iy(t,e,!1,!1),e.stateNode=t;e:{switch(i=Mu(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),s=r;break;case"iframe":case"object":case"embed":Oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bo.length;s++)Oe(Bo[s],t);s=r;break;case"source":Oe("error",t),s=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),s=r;break;case"details":Oe("toggle",t),s=r;break;case"input":xf(t,r),s=Iu(t,r),Oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Sf(t,r),s=Ru(t,r),Oe("invalid",t);break;default:s=r}Du(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?l0(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&i0(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ci(t,u):typeof u=="number"&&ci(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(li.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Oe("scroll",t):u!=null&&Hd(t,o,u,i))}switch(n){case"input":pa(t),Tf(t,r,!1);break;case"textarea":pa(t),Nf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ms(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)Cy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Ur(wi.current),Ur(pn.current),Ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(o=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ve(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Ut!==null&&e.mode&1&&!(e.flags&128))K0(),Gs(),e.flags|=98560,o=!1;else if(o=Ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[hn]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),o=!1}else rn!==null&&(pd(rn),rn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?nt===0&&(nt=3):kh())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Ks(),ad(t,e),t===null&&gi(e.stateNode.containerInfo),Et(e),null;case 10:return uh(e.type._context),Et(e),null;case 17:return Mt(e.type)&&hl(),Et(e),null;case 19:if(Ve(je),o=e.memoizedState,o===null)return Et(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)Mo(o,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=El(t),i!==null){for(e.flags|=128,Mo(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(je,je.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ye()>Ys&&(e.flags|=128,r=!0,Mo(o,!1),e.lanes=4194304)}else{if(!r)if(t=El(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ue)return Et(e),null}else 2*Ye()-o.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,Mo(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ye(),e.sibling=null,n=je.current,De(je,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Nh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function Vb(t,e){switch(ih(e),e.tag){case 1:return Mt(e.type)&&hl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),Ve(Dt),Ve(Tt),ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fh(e),null;case 13:if(Ve(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(je),null;case 4:return Ks(),null;case 10:return uh(e.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var ka=!1,bt=!1,Fb=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Rs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function ld(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var pp=!1;function Ub(t,e){if(Hu=ll,t=O0(),sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,c=-1,u=-1,h=0,p=0,y=t,_=null;t:for(;;){for(var I;y!==n||s!==0&&y.nodeType!==3||(c=i+s),y!==o||r!==0&&y.nodeType!==3||(u=i+r),y.nodeType===3&&(i+=y.nodeValue.length),(I=y.firstChild)!==null;)_=y,y=I;for(;;){if(y===t)break t;if(_===n&&++h===s&&(c=i),_===o&&++p===r&&(u=i),(I=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=I}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($u={focusedElem:t,selectionRange:n},ll=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var M=L.memoizedProps,F=L.memoizedState,N=e.stateNode,S=N.getSnapshotBeforeUpdate(e.elementType===e.type?M:tn(e.type,M),F);N.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(D){Xe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return L=pp,pp=!1,L}function ei(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&ld(e,n,o)}s=s.next}while(s!==r)}}function Jl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ry(t){var e=t.alternate;e!==null&&(t.alternate=null,Ry(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[vi],delete e[Ku],delete e[_b],delete e[bb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ly(t){return t.tag===5||t.tag===3||t.tag===4}function gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dl));else if(r!==4&&(t=t.child,t!==null))for(ud(t,e,n),t=t.sibling;t!==null;)ud(t,e,n),t=t.sibling}function dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dd(t,e,n),t=t.sibling;t!==null;)dd(t,e,n),t=t.sibling}var lt=null,nn=!1;function Kn(t,e,n){for(n=n.child;n!==null;)Dy(t,e,n),n=n.sibling}function Dy(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Wl,n)}catch{}switch(n.tag){case 5:bt||Rs(n,e);case 6:var r=lt,s=nn;lt=null,Kn(t,e,n),lt=r,nn=s,lt!==null&&(nn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(nn?(t=lt,n=n.stateNode,t.nodeType===8?nu(t.parentNode,n):t.nodeType===1&&nu(t,n),mi(t)):nu(lt,n.stateNode));break;case 4:r=lt,s=nn,lt=n.stateNode.containerInfo,nn=!0,Kn(t,e,n),lt=r,nn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&ld(n,e,i),s=s.next}while(s!==r)}Kn(t,e,n);break;case 1:if(!bt&&(Rs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Xe(n,e,c)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,Kn(t,e,n),bt=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function yp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fb),e.forEach(function(r){var s=Xb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,c=i;e:for(;c!==null;){switch(c.tag){case 5:lt=c.stateNode,nn=!1;break e;case 3:lt=c.stateNode.containerInfo,nn=!0;break e;case 4:lt=c.stateNode.containerInfo,nn=!0;break e}c=c.return}if(lt===null)throw Error(G(160));Dy(o,i,s),lt=null,nn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Xe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)My(e,t),e=e.sibling}function My(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),un(t),r&4){try{ei(3,t,t.return),Jl(3,t)}catch(M){Xe(t,t.return,M)}try{ei(5,t,t.return)}catch(M){Xe(t,t.return,M)}}break;case 1:en(e,t),un(t),r&512&&n!==null&&Rs(n,n.return);break;case 5:if(en(e,t),un(t),r&512&&n!==null&&Rs(n,n.return),t.flags&32){var s=t.stateNode;try{ci(s,"")}catch(M){Xe(t,t.return,M)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&r0(s,o),Mu(c,i);var h=Mu(c,o);for(i=0;i<u.length;i+=2){var p=u[i],y=u[i+1];p==="style"?l0(s,y):p==="dangerouslySetInnerHTML"?i0(s,y):p==="children"?ci(s,y):Hd(s,p,y,h)}switch(c){case"input":Pu(s,o);break;case"textarea":s0(s,o);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?Ms(s,!!o.multiple,I,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ms(s,!!o.multiple,o.defaultValue,!0):Ms(s,!!o.multiple,o.multiple?[]:"",!1))}s[vi]=o}catch(M){Xe(t,t.return,M)}}break;case 6:if(en(e,t),un(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(M){Xe(t,t.return,M)}}break;case 3:if(en(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mi(e.containerInfo)}catch(M){Xe(t,t.return,M)}break;case 4:en(e,t),un(t);break;case 13:en(e,t),un(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Th=Ye())),r&4&&yp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(h=bt)||p,en(e,t),bt=h):en(e,t),un(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(y=Y=p;Y!==null;){switch(_=Y,I=_.child,_.tag){case 0:case 11:case 14:case 15:ei(4,_,_.return);break;case 1:Rs(_,_.return);var L=_.stateNode;if(typeof L.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(M){Xe(r,n,M)}}break;case 5:Rs(_,_.return);break;case 22:if(_.memoizedState!==null){Ep(y);continue}}I!==null?(I.return=_,Y=I):Ep(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,h?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=y.stateNode,u=y.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=a0("display",i))}catch(M){Xe(t,t.return,M)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(M){Xe(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:en(e,t),un(t),r&4&&yp(t);break;case 21:break;default:en(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ly(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ci(s,""),r.flags&=-33);var o=gp(t);dd(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,c=gp(t);ud(t,c,i);break;default:throw Error(G(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qb(t,e,n){Y=t,Oy(t)}function Oy(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ka;if(!i){var c=s.alternate,u=c!==null&&c.memoizedState!==null||bt;c=ka;var h=bt;if(ka=i,(bt=u)&&!h)for(Y=s;Y!==null;)i=Y,u=i.child,i.tag===22&&i.memoizedState!==null?wp(s):u!==null?(u.return=i,Y=u):wp(s);for(;o!==null;)Y=o,Oy(o),o=o.sibling;Y=s,ka=c,bt=h}vp(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Y=o):vp(t)}}function vp(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||Jl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&np(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}np(e,i,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&mi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}bt||e.flags&512&&cd(e)}catch(_){Xe(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Ep(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function wp(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jl(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Xe(e,s,u)}}var o=e.return;try{cd(e)}catch(u){Xe(e,o,u)}break;case 5:var i=e.return;try{cd(e)}catch(u){Xe(e,i,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var Bb=Math.ceil,bl=jn.ReactCurrentDispatcher,bh=jn.ReactCurrentOwner,Kt=jn.ReactCurrentBatchConfig,Te=0,it=null,Ze=null,dt=0,Ft=0,Ls=Nr(0),nt=0,Ti=null,Gr=0,Zl=0,xh=0,ti=null,Rt=null,Th=0,Ys=1/0,Tn=null,xl=!1,hd=null,mr=null,Aa=!1,ir=null,Tl=0,ni=0,md=null,Ha=-1,$a=0;function It(){return Te&6?Ye():Ha!==-1?Ha:Ha=Ye()}function fr(t){return t.mode&1?Te&2&&dt!==0?dt&-dt:Tb.transition!==null?($a===0&&($a=w0()),$a):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:k0(t.type)),t):1}function an(t,e,n,r){if(50<ni)throw ni=0,md=null,Error(G(185));Mi(t,n,r),(!(Te&2)||t!==it)&&(t===it&&(!(Te&2)&&(Zl|=n),nt===4&&er(t,dt)),Ot(t,r),n===1&&Te===0&&!(e.mode&1)&&(Ys=Ye()+500,Kl&&kr()))}function Ot(t,e){var n=t.callbackNode;T_(t,e);var r=al(t,t===it?dt:0);if(r===0)n!==null&&If(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&If(n),e===1)t.tag===0?xb(_p.bind(null,t)):$0(_p.bind(null,t)),Eb(function(){!(Te&6)&&kr()}),n=null;else{switch(_0(r)){case 1:n=Qd;break;case 4:n=v0;break;case 16:n=il;break;case 536870912:n=E0;break;default:n=il}n=Wy(n,Vy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vy(t,e){if(Ha=-1,$a=0,Te&6)throw Error(G(327));var n=t.callbackNode;if(qs()&&t.callbackNode!==n)return null;var r=al(t,t===it?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sl(t,r);else{e=r;var s=Te;Te|=2;var o=Uy();(it!==t||dt!==e)&&(Tn=null,Ys=Ye()+500,Br(t,e));do try{Wb();break}catch(c){Fy(t,c)}while(!0);ch(),bl.current=o,Te=s,Ze!==null?e=0:(it=null,dt=0,e=nt)}if(e!==0){if(e===2&&(s=qu(t),s!==0&&(r=s,e=fd(t,s))),e===1)throw n=Ti,Br(t,0),er(t,r),Ot(t,Ye()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!zb(s)&&(e=Sl(t,r),e===2&&(o=qu(t),o!==0&&(r=o,e=fd(t,o))),e===1))throw n=Ti,Br(t,0),er(t,r),Ot(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Mr(t,Rt,Tn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=Th+500-Ye(),10<e)){if(al(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xu(Mr.bind(null,t,Rt,Tn),e);break}Mr(t,Rt,Tn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-on(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bb(r/1960))-r,10<r){t.timeoutHandle=Xu(Mr.bind(null,t,Rt,Tn),r);break}Mr(t,Rt,Tn);break;case 5:Mr(t,Rt,Tn);break;default:throw Error(G(329))}}}return Ot(t,Ye()),t.callbackNode===n?Vy.bind(null,t):null}function fd(t,e){var n=ti;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Sl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&pd(e)),t}function pd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function zb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!ln(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~xh,e&=~Zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function _p(t){if(Te&6)throw Error(G(327));qs();var e=al(t,0);if(!(e&1))return Ot(t,Ye()),null;var n=Sl(t,e);if(t.tag!==0&&n===2){var r=qu(t);r!==0&&(e=r,n=fd(t,r))}if(n===1)throw n=Ti,Br(t,0),er(t,e),Ot(t,Ye()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,Rt,Tn),Ot(t,Ye()),null}function Sh(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Ys=Ye()+500,Kl&&kr())}}function Xr(t){ir!==null&&ir.tag===0&&!(Te&6)&&qs();var e=Te;Te|=1;var n=Kt.transition,r=Ce;try{if(Kt.transition=null,Ce=1,t)return t()}finally{Ce=r,Kt.transition=n,Te=e,!(Te&6)&&kr()}}function Nh(){Ft=Ls.current,Ve(Ls)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vb(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(ih(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hl();break;case 3:Ks(),Ve(Dt),Ve(Tt),ph();break;case 5:fh(r);break;case 4:Ks();break;case 13:Ve(je);break;case 19:Ve(je);break;case 10:uh(r.type._context);break;case 22:case 23:Nh()}n=n.return}if(it=t,Ze=t=pr(t.current,null),dt=Ft=e,nt=0,Ti=null,xh=Zl=Gr=0,Rt=ti=null,Fr!==null){for(e=0;e<Fr.length;e++)if(n=Fr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Fr=null}return t}function Fy(t,e){do{var n=Ze;try{if(ch(),za.current=_l,wl){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wl=!1}if($r=0,ot=et=We=null,Zo=!1,_i=0,bh.current=null,n===null||n.return===null){nt=1,Ti=e,Ze=null;break}e:{var o=t,i=n.return,c=n,u=e;if(e=dt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=lp(i);if(I!==null){I.flags&=-257,cp(I,i,c,o,e),I.mode&1&&ap(o,h,e),e=I,u=h;var L=e.updateQueue;if(L===null){var M=new Set;M.add(u),e.updateQueue=M}else L.add(u);break e}else{if(!(e&1)){ap(o,h,e),kh();break e}u=Error(G(426))}}else if(Ue&&c.mode&1){var F=lp(i);if(F!==null){!(F.flags&65536)&&(F.flags|=256),cp(F,i,c,o,e),ah(Qs(u,c));break e}}o=u=Qs(u,c),nt!==4&&(nt=2),ti===null?ti=[o]:ti.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=_y(o,u,e);tp(o,N);break e;case 1:c=u;var S=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(mr===null||!mr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=by(o,c,e);tp(o,D);break e}}o=o.return}while(o!==null)}By(n)}catch(q){e=q,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Uy(){var t=bl.current;return bl.current=_l,t===null?_l:t}function kh(){(nt===0||nt===3||nt===2)&&(nt=4),it===null||!(Gr&268435455)&&!(Zl&268435455)||er(it,dt)}function Sl(t,e){var n=Te;Te|=2;var r=Uy();(it!==t||dt!==e)&&(Tn=null,Br(t,e));do try{jb();break}catch(s){Fy(t,s)}while(!0);if(ch(),Te=n,bl.current=r,Ze!==null)throw Error(G(261));return it=null,dt=0,nt}function jb(){for(;Ze!==null;)qy(Ze)}function Wb(){for(;Ze!==null&&!p_();)qy(Ze)}function qy(t){var e=jy(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?By(t):Ze=e,bh.current=null}function By(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vb(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Ze=null;return}}else if(n=Ob(n,e,Ft),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);nt===0&&(nt=5)}function Mr(t,e,n){var r=Ce,s=Kt.transition;try{Kt.transition=null,Ce=1,Hb(t,e,n,r)}finally{Kt.transition=s,Ce=r}return null}function Hb(t,e,n,r){do qs();while(ir!==null);if(Te&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(S_(t,o),t===it&&(Ze=it=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Aa||(Aa=!0,Wy(il,function(){return qs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Kt.transition,Kt.transition=null;var i=Ce;Ce=1;var c=Te;Te|=4,bh.current=null,Ub(t,n),My(n,t),db($u),ll=!!Hu,$u=Hu=null,t.current=n,qb(n),g_(),Te=c,Ce=i,Kt.transition=o}else t.current=n;if(Aa&&(Aa=!1,ir=t,Tl=s),o=t.pendingLanes,o===0&&(mr=null),E_(n.stateNode),Ot(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xl)throw xl=!1,t=hd,hd=null,t;return Tl&1&&t.tag!==0&&qs(),o=t.pendingLanes,o&1?t===md?ni++:(ni=0,md=t):ni=0,kr(),null}function qs(){if(ir!==null){var t=_0(Tl),e=Kt.transition,n=Ce;try{if(Kt.transition=null,Ce=16>t?16:t,ir===null)var r=!1;else{if(t=ir,ir=null,Tl=0,Te&6)throw Error(G(331));var s=Te;for(Te|=4,Y=t.current;Y!==null;){var o=Y,i=o.child;if(Y.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(Y=h;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:ei(8,p,o)}var y=p.child;if(y!==null)y.return=p,Y=y;else for(;Y!==null;){p=Y;var _=p.sibling,I=p.return;if(Ry(p),p===h){Y=null;break}if(_!==null){_.return=I,Y=_;break}Y=I}}}var L=o.alternate;if(L!==null){var M=L.child;if(M!==null){L.child=null;do{var F=M.sibling;M.sibling=null,M=F}while(M!==null)}}Y=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Y=i;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ei(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,Y=N;break e}Y=o.return}}var S=t.current;for(Y=S;Y!==null;){i=Y;var k=i.child;if(i.subtreeFlags&2064&&k!==null)k.return=i,Y=k;else e:for(i=S;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Jl(9,c)}}catch(q){Xe(c,c.return,q)}if(c===i){Y=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,Y=D;break e}Y=c.return}}if(Te=s,kr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Wl,t)}catch{}r=!0}return r}finally{Ce=n,Kt.transition=e}}return!1}function bp(t,e,n){e=Qs(n,e),e=_y(t,e,1),t=hr(t,e,1),e=It(),t!==null&&(Mi(t,1,e),Ot(t,e))}function Xe(t,e,n){if(t.tag===3)bp(t,t,n);else for(;e!==null;){if(e.tag===3){bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=Qs(n,t),t=by(e,t,1),e=hr(e,t,1),t=It(),e!==null&&(Mi(e,1,t),Ot(e,t));break}}e=e.return}}function $b(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(dt&n)===n&&(nt===4||nt===3&&(dt&130023424)===dt&&500>Ye()-Th?Br(t,0):xh|=n),Ot(t,e)}function zy(t,e){e===0&&(t.mode&1?(e=va,va<<=1,!(va&130023424)&&(va=4194304)):e=1);var n=It();t=Vn(t,e),t!==null&&(Mi(t,e,n),Ot(t,n))}function Gb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zy(t,n)}function Xb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),zy(t,n)}var jy;jy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,Mb(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ue&&e.flags&1048576&&G0(e,pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var s=$s(e,Tt.current);Us(e,n),s=yh(null,e,r,t,s,n);var o=vh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(o=!0,ml(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hh(e),s.updater=Yl,e.stateNode=s,s._reactInternals=e,td(e,r,t,n),e=sd(null,e,r,!0,o,n)):(e.tag=0,Ue&&o&&oh(e),At(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Qb(r),t=tn(r,t),s){case 0:e=rd(null,e,r,t,n);break e;case 1:e=hp(null,e,r,t,n);break e;case 11:e=up(null,e,r,t,n);break e;case 14:e=dp(null,e,r,tn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),hp(t,e,r,s,n);case 3:e:{if(Ny(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Z0(t,e),vl(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Qs(Error(G(423)),e),e=mp(t,e,r,n,s);break e}else if(r!==s){s=Qs(Error(G(424)),e),e=mp(t,e,r,n,s);break e}else for(Ut=dr(e.stateNode.containerInfo.firstChild),qt=e,Ue=!0,rn=null,n=Y0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===s){e=Fn(t,e,n);break e}At(t,e,r,n)}e=e.child}return e;case 5:return ey(e),t===null&&Ju(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Gu(r,s)?i=null:o!==null&&Gu(r,o)&&(e.flags|=32),Sy(t,e),At(t,e,i,n),e.child;case 6:return t===null&&Ju(e),null;case 13:return ky(t,e,n);case 4:return mh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):At(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),up(t,e,r,s,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,De(gl,r._currentValue),r._currentValue=i,o!==null)if(ln(o.value,i)){if(o.children===s.children&&!Dt.current){e=Fn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Cn(-1,n&-n),u.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Zu(o.return,n,e),c.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(G(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Zu(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}At(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Us(e,n),s=Qt(s),r=r(s),e.flags|=1,At(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),dp(t,e,r,s,n);case 15:return xy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Wa(t,e),e.tag=1,Mt(r)?(t=!0,ml(e)):t=!1,Us(e,n),wy(e,r,s),td(e,r,s,n),sd(null,e,r,!0,t,n);case 19:return Ay(t,e,n);case 22:return Ty(t,e,n)}throw Error(G(156,e.tag))};function Wy(t,e){return y0(t,e)}function Kb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new Kb(t,e,n,r)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qb(t){if(typeof t=="function")return Ah(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gd)return 11;if(t===Xd)return 14}return 2}function pr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ga(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")Ah(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case xs:return zr(n.children,s,o,e);case $d:i=8,s|=8;break;case Su:return t=Xt(12,n,e,s|2),t.elementType=Su,t.lanes=o,t;case Nu:return t=Xt(13,n,e,s),t.elementType=Nu,t.lanes=o,t;case ku:return t=Xt(19,n,e,s),t.elementType=ku,t.lanes=o,t;case e0:return ec(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jg:i=10;break e;case Zg:i=9;break e;case Gd:i=11;break e;case Xd:i=14;break e;case Yn:i=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Xt(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function zr(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function ec(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=e0,t.lanes=n,t.stateNode={isHidden:!1},t}function uu(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function du(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hc(0),this.expirationTimes=Hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ih(t,e,n,r,s,o,i,c,u){return t=new Yb(t,e,n,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hh(o),t}function Jb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hy(t){if(!t)return _r;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Mt(n))return H0(t,n,e)}return e}function $y(t,e,n,r,s,o,i,c,u){return t=Ih(n,r,!0,t,s,o,i,c,u),t.context=Hy(null),n=t.current,r=It(),s=fr(n),o=Cn(r,s),o.callback=e??null,hr(n,o,s),t.current.lanes=s,Mi(t,s,r),Ot(t,r),t}function tc(t,e,n,r){var s=e.current,o=It(),i=fr(s);return n=Hy(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hr(s,e,i),t!==null&&(an(t,s,i,o),Ba(t,s,i)),i}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ph(t,e){xp(t,e),(t=t.alternate)&&xp(t,e)}function Zb(){return null}var Gy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ch(t){this._internalRoot=t}nc.prototype.render=Ch.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));tc(t,e,null,null)};nc.prototype.unmount=Ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){tc(null,t,null,null)}),e[On]=null}};function nc(t){this._internalRoot=t}nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=T0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&N0(t)}};function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tp(){}function ex(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var h=Nl(i);o.call(h)}}var i=$y(e,r,t,0,null,!1,!1,"",Tp);return t._reactRootContainer=i,t[On]=i.current,gi(t.nodeType===8?t.parentNode:t),Xr(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=Nl(u);c.call(h)}}var u=Ih(t,0,!1,null,null,!1,!1,"",Tp);return t._reactRootContainer=u,t[On]=u.current,gi(t.nodeType===8?t.parentNode:t),Xr(function(){tc(e,u,n,r)}),u}function sc(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var c=s;s=function(){var u=Nl(i);c.call(u)}}tc(e,i,t,s)}else i=ex(n,e,t,s,r);return Nl(i)}b0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Yd(e,n|1),Ot(e,Ye()),!(Te&6)&&(Ys=Ye()+500,kr()))}break;case 13:Xr(function(){var r=Vn(t,1);if(r!==null){var s=It();an(r,t,1,s)}}),Ph(t,1)}};Jd=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=It();an(e,t,134217728,n)}Ph(t,134217728)}};x0=function(t){if(t.tag===13){var e=fr(t),n=Vn(t,e);if(n!==null){var r=It();an(n,t,e,r)}Ph(t,e)}};T0=function(){return Ce};S0=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Vu=function(t,e,n){switch(e){case"input":if(Pu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xl(r);if(!s)throw Error(G(90));n0(r),Pu(r,s)}}}break;case"textarea":s0(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};d0=Sh;h0=Xr;var tx={usingClientEntryPoint:!1,Events:[Vi,ks,Xl,c0,u0,Sh]},Oo={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nx={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=p0(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Zb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{Wl=Ia.inject(nx),fn=Ia}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tx;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(e))throw Error(G(200));return Jb(t,e,null,n)};jt.createRoot=function(t,e){if(!Rh(t))throw Error(G(299));var n=!1,r="",s=Gy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ih(t,1,!1,null,null,n,!1,r,s),t[On]=e.current,gi(t.nodeType===8?t.parentNode:t),new Ch(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=p0(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Xr(t)};jt.hydrate=function(t,e,n){if(!rc(e))throw Error(G(200));return sc(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!Rh(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Gy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=$y(e,null,t,1,n??null,s,!1,o,i),t[On]=e.current,gi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nc(e)};jt.render=function(t,e,n){if(!rc(e))throw Error(G(200));return sc(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!rc(t))throw Error(G(40));return t._reactRootContainer?(Xr(function(){sc(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};jt.unstable_batchedUpdates=Sh;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rc(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return sc(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function Xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xy)}catch(t){console.error(t)}}Xy(),Xg.exports=jt;var rx=Xg.exports,Sp=rx;xu.createRoot=Sp.createRoot,xu.hydrateRoot=Sp.hydrateRoot;var Np={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],c=t[n++],u=((s&7)<<18|(o&63)<<12|(i&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},Qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,c=i?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let _=(c&15)<<2|h>>6,I=h&63;u||(I=64,i||(_=64)),r.push(n[p],n[y],n[_],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ky(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||y==null)throw new ox;const _=o<<2|c>>4;if(r.push(_),h!==64){const I=c<<4&240|h>>2;if(r.push(I),y!==64){const L=h<<6&192|y;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ix=function(t){const e=Ky(t);return Qy.encodeByteArray(e,!0)},kl=function(t){return ix(t).replace(/\./g,"")},Yy=function(t){try{return Qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=()=>ax().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof Np>"u")return;const t=Np.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ux=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yy(t[1]);return e&&JSON.parse(e)},oc=()=>{try{return lx()||cx()||ux()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jy=t=>{var e,n;return(n=(e=oc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dx=t=>{const e=Jy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zy=()=>{var t;return(t=oc())===null||t===void 0?void 0:t.config},ev=t=>{var e;return(e=oc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kl(JSON.stringify(n)),kl(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function px(){var t;const e=(t=oc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ex(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wx(){return!px()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _x(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="FirebaseError";class Wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xx,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ui.prototype.create)}}class Ui{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?Tx(o,r):"Error",c=`${this.serviceName}: ${i} (${s}).`;return new Wn(s,c,r)}}function Tx(t,e){return t.replace(Sx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Sx=/\{\$([^}]+)}/g;function Nx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],i=e[s];if(kp(o)&&kp(i)){if(!Al(o,i))return!1}else if(o!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kx(t,e){const n=new Ax(t,e);return n.subscribe.bind(n)}class Ax{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ix(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hu),s.error===void 0&&(s.error=hu),s.complete===void 0&&(s.complete=hu);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ix(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){return t&&t._delegate?t._delegate:t}class Kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rx(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cx(t){return t===Or?void 0:t}function Rx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Px(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Dx={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Mx=_e.INFO,Ox={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Vx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ox[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lh{constructor(e){this.name=e,this._logLevel=Mx,this._logHandler=Vx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Fx=(t,e)=>e.some(n=>t instanceof n);let Ap,Ip;function Ux(){return Ap||(Ap=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return Ip||(Ip=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,gd=new WeakMap,nv=new WeakMap,mu=new WeakMap,Dh=new WeakMap;function Bx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(gr(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&tv.set(n,t)}).catch(()=>{}),Dh.set(e,t),e}function zx(t){if(gd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});gd.set(t,e)}let yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jx(t){yd=t(yd)}function Wx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fu(this),e,...n);return nv.set(r,e.sort?e.sort():[e]),gr(r)}:qx().includes(t)?function(...e){return t.apply(fu(this),e),gr(tv.get(this))}:function(...e){return gr(t.apply(fu(this),e))}}function Hx(t){return typeof t=="function"?Wx(t):(t instanceof IDBTransaction&&zx(t),Fx(t,Ux())?new Proxy(t,yd):t)}function gr(t){if(t instanceof IDBRequest)return Bx(t);if(mu.has(t))return mu.get(t);const e=Hx(t);return e!==t&&(mu.set(t,e),Dh.set(e,t)),e}const fu=t=>Dh.get(t);function $x(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),c=gr(i);return r&&i.addEventListener("upgradeneeded",u=>{r(gr(i.result),u.oldVersion,u.newVersion,gr(i.transaction),u)}),n&&i.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Gx=["get","getKey","getAll","getAllKeys","count"],Xx=["put","add","delete","clear"],pu=new Map;function Pp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pu.get(e))return pu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Xx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gx.includes(n)))return;const o=async function(i,...c){const u=this.transaction(i,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return pu.set(e,o),o}jx(t=>({...t,get:(e,n,r)=>Pp(e,n)||t.get(e,n,r),has:(e,n)=>!!Pp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vd="@firebase/app",Cp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new Lh("@firebase/app"),Yx="@firebase/app-compat",Jx="@firebase/analytics-compat",Zx="@firebase/analytics",e1="@firebase/app-check-compat",t1="@firebase/app-check",n1="@firebase/auth",r1="@firebase/auth-compat",s1="@firebase/database",o1="@firebase/data-connect",i1="@firebase/database-compat",a1="@firebase/functions",l1="@firebase/functions-compat",c1="@firebase/installations",u1="@firebase/installations-compat",d1="@firebase/messaging",h1="@firebase/messaging-compat",m1="@firebase/performance",f1="@firebase/performance-compat",p1="@firebase/remote-config",g1="@firebase/remote-config-compat",y1="@firebase/storage",v1="@firebase/storage-compat",E1="@firebase/firestore",w1="@firebase/vertexai-preview",_1="@firebase/firestore-compat",b1="firebase",x1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="[DEFAULT]",T1={[vd]:"fire-core",[Yx]:"fire-core-compat",[Zx]:"fire-analytics",[Jx]:"fire-analytics-compat",[t1]:"fire-app-check",[e1]:"fire-app-check-compat",[n1]:"fire-auth",[r1]:"fire-auth-compat",[s1]:"fire-rtdb",[o1]:"fire-data-connect",[i1]:"fire-rtdb-compat",[a1]:"fire-fn",[l1]:"fire-fn-compat",[c1]:"fire-iid",[u1]:"fire-iid-compat",[d1]:"fire-fcm",[h1]:"fire-fcm-compat",[m1]:"fire-perf",[f1]:"fire-perf-compat",[p1]:"fire-rc",[g1]:"fire-rc-compat",[y1]:"fire-gcs",[v1]:"fire-gcs-compat",[E1]:"fire-fst",[_1]:"fire-fst-compat",[w1]:"fire-vertex","fire-js":"fire-js",[b1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,S1=new Map,wd=new Map;function Rp(t,e){try{t.container.addComponent(e)}catch(n){Un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Js(t){const e=t.name;if(wd.has(e))return Un.debug(`There were multiple attempts to register component ${e}.`),!1;wd.set(e,t);for(const n of Il.values())Rp(n,t);for(const n of S1.values())Rp(n,t);return!0}function Mh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Ui("app","Firebase",N1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=x1;function rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ed,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=Zy()),!n)throw yr.create("no-options");const o=Il.get(s);if(o){if(Al(n,o.options)&&Al(r,o.config))return o;throw yr.create("duplicate-app",{appName:s})}const i=new Lx(s);for(const u of wd.values())i.addComponent(u);const c=new k1(n,r,i);return Il.set(s,c),c}function sv(t=Ed){const e=Il.get(t);if(!e&&t===Ed&&Zy())return rv();if(!e)throw yr.create("no-app",{appName:t});return e}function vr(t,e,n){var r;let s=(r=T1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&c.push("and"),i&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Un.warn(c.join(" "));return}Js(new Kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebase-heartbeat-database",I1=1,Si="firebase-heartbeat-store";let gu=null;function ov(){return gu||(gu=$x(A1,I1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Si)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),gu}async function P1(t){try{const n=(await ov()).transaction(Si),r=await n.objectStore(Si).get(iv(t));return await n.done,r}catch(e){if(e instanceof Wn)Un.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Un.warn(n.message)}}}async function Lp(t,e){try{const r=(await ov()).transaction(Si,"readwrite");await r.objectStore(Si).put(e,iv(t)),await r.done}catch(n){if(n instanceof Wn)Un.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Un.warn(r.message)}}}function iv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=1024,R1=30*24*60*60*1e3;class L1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Dp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const c=new Date(i.date).valueOf();return Date.now()-c<=R1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dp(),{heartbeatsToSend:r,unsentEntries:s}=D1(this._heartbeatsCache.heartbeats),o=kl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Un.warn(n),""}}}function Dp(){return new Date().toISOString().substring(0,10)}function D1(t,e=C1){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),Mp(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _x()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Mp(t){return kl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t){Js(new Kr("platform-logger",e=>new Kx(e),"PRIVATE")),Js(new Kr("heartbeat",e=>new L1(e),"PRIVATE")),vr(vd,Cp,t),vr(vd,Cp,"esm2017"),vr("fire-js","")}O1("");var V1="firebase",F1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(V1,F1,"app");function Oh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U1=av,lv=new Ui("auth","Firebase",av());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Lh("@firebase/auth");function q1(t,...e){Pl.logLevel<=_e.WARN&&Pl.warn(`Auth (${co}): ${t}`,...e)}function Xa(t,...e){Pl.logLevel<=_e.ERROR&&Pl.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw Vh(t,...e)}function gn(t,...e){return Vh(t,...e)}function cv(t,e,n){const r=Object.assign(Object.assign({},U1()),{[e]:n});return new Ui("auth","Firebase",r).create(e,{appName:t.name})}function Rn(t){return cv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lv.create(t,...e)}function ie(t,e,...n){if(!t)throw Vh(e,...n)}function An(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xa(e),new Error(e)}function qn(t,e){t||An(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B1(){return Op()==="http:"||Op()==="https:"}function Op(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B1()||yx()||"connection"in navigator)?navigator.onLine:!0}function j1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=fx()||vx()}get(){return z1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Bi(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ir(t,e,n,r,s={}){return dv(t,s,async()=>{let o={},i={};r&&(e==="GET"?i=r:o={body:JSON.stringify(r)});const c=qi(Object.assign({key:t.config.apiKey},i)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},o);return gx()||(h.referrerPolicy="no-referrer"),uv.fetch()(hv(t,t.config.apiHost,n,c),h)})}async function dv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},W1),e);try{const s=new G1(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Pa(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const c=o.ok?i.errorMessage:i.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(t,"credential-already-in-use",i);if(u==="EMAIL_EXISTS")throw Pa(t,"email-already-in-use",i);if(u==="USER_DISABLED")throw Pa(t,"user-disabled",i);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw cv(t,p,h);cn(t,p)}}catch(s){if(s instanceof Wn)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function zi(t,e,n,r,s={}){const o=await Ir(t,e,n,r,s);return"mfaPendingCredential"in o&&cn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function hv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Fh(t.config,s):`${t.config.apiScheme}://${s}`}function $1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),H1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gn(t,e,r);return s.customData._tokenResponse=n,s}function Vp(t){return t!==void 0&&t.enterprise!==void 0}class X1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function K1(t,e){return Ir(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(t,e){return Ir(t,"POST","/v1/accounts:delete",e)}async function mv(t,e){return Ir(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y1(t,e=!1){const n=Jt(t),r=await n.getIdToken(e),s=Uh(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:ri(yu(s.auth_time)),issuedAtTime:ri(yu(s.iat)),expirationTime:ri(yu(s.exp)),signInProvider:i||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function yu(t){return Number(t)*1e3}function Uh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xa("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yy(n);return s?JSON.parse(s):(Xa("Failed to decode base64 JWT payload"),null)}catch(s){return Xa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fp(t){const e=Uh(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wn&&J1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ni(t,mv(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fv(o.providerUserInfo):[],c=tT(t.providerData,i),u=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new bd(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function eT(t){const e=Jt(t);await Cl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function fv(t){return t.map(e=>{var{providerId:n}=e,r=Oh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e){const n=await dv(t,{},async()=>{const r=qi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=hv(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",uv.fetch()(i,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rT(t,e){return Ir(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=Fp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await nT(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,i=new Bs;return r&&(ie(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(ie(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bs,this.toJSON())}_performRefresh(){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class In{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ni(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y1(this,e)}reload(){return eT(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new In(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Rn(this.auth));const e=await this.getIdToken();return await Ni(this,Q1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,i,c,u,h,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,I=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,L=(i=n.photoURL)!==null&&i!==void 0?i:void 0,M=(c=n.tenantId)!==null&&c!==void 0?c:void 0,F=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,S=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:D,isAnonymous:q,providerData:z,stsTokenManager:b}=n;ie(k&&b,e,"internal-error");const g=Bs.fromJSON(this.name,b);ie(typeof k=="string",e,"internal-error"),Qn(y,e.name),Qn(_,e.name),ie(typeof D=="boolean",e,"internal-error"),ie(typeof q=="boolean",e,"internal-error"),Qn(I,e.name),Qn(L,e.name),Qn(M,e.name),Qn(F,e.name),Qn(N,e.name),Qn(S,e.name);const E=new In({uid:k,auth:e,email:_,emailVerified:D,displayName:y,isAnonymous:q,photoURL:L,phoneNumber:I,tenantId:M,stsTokenManager:g,createdAt:N,lastLoginAt:S});return z&&Array.isArray(z)&&(E.providerData=z.map(x=>Object.assign({},x))),F&&(E._redirectEventId=F),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bs;s.updateFromServerResponse(n);const o=new In({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cl(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?fv(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new Bs;c.updateFromIdToken(r);const u=new In({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:i}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new bd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new Map;function Pn(t){qn(t instanceof Function,"Expected a class definition");let e=Up.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Up.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pv.type="NONE";const qp=pv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e,n){return`firebase:${t}:${e}:${n}`}class zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Ka(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ka("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?In._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zs(Pn(qp),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Pn(qp);const i=Ka(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(i);if(p){const y=In._fromJSON(e,p);h!==o&&(c=y),o=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new zs(o,e,r):(o=u[0],c&&await o._set(i,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(i)}catch{}})),new zs(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ev(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_v(e))return"Blackberry";if(bv(e))return"Webos";if(yv(e))return"Safari";if((e.includes("chrome/")||vv(e))&&!e.includes("edge/"))return"Chrome";if(wv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gv(t=St()){return/firefox\//i.test(t)}function yv(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vv(t=St()){return/crios\//i.test(t)}function Ev(t=St()){return/iemobile/i.test(t)}function wv(t=St()){return/android/i.test(t)}function _v(t=St()){return/blackberry/i.test(t)}function bv(t=St()){return/webos/i.test(t)}function qh(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sT(t=St()){var e;return qh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oT(){return Ex()&&document.documentMode===10}function xv(t=St()){return qh(t)||wv(t)||bv(t)||_v(t)||/windows phone/i.test(t)||Ev(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e=[]){let n;switch(t){case"Browser":n=Bp(St());break;case"Worker":n=`${Bp(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((i,c)=>{try{const u=e(o);i(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=6;class cT{constructor(e){var n,r,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:lT,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,i,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(i=u.containsNumericCharacter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zp(this),this.idTokenSubscription=new zp(this),this.beforeStateQueue=new iT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mv(this,{idToken:e}),r=await In._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!i||i===c)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Rn(this));const n=e?Jt(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aT(this),n=new cT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ui("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let i=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{i||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{i=!0,u()}}else{const u=e.addObserver(n);return()=>{i=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ss(t){return Jt(t)}class zp{constructor(e){this.auth=e,this.observer=null,this.addObserver=kx(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dT(t){ic=t}function Sv(t){return ic.loadJS(t)}function hT(){return ic.recaptchaEnterpriseScript}function mT(){return ic.gapiScript}function fT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pT="recaptcha-enterprise",gT="NO_RECAPTCHA";class yT{constructor(e){this.type=pT,this.auth=ss(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(i,c)=>{K1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new X1(u);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,i(h.siteKey)}}).catch(u=>{c(u)})})}function s(o,i,c){const u=window.grecaptcha;Vp(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(h=>{i(h)}).catch(()=>{i(gT)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,i)=>{r(this.auth).then(c=>{if(!n&&Vp(window.grecaptcha))s(c,o,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hT();u.length!==0&&(u+=c),Sv(u).then(()=>{s(c,o,i)}).catch(h=>{i(h)})}}).catch(c=>{i(c)})})}}async function jp(t,e,n,r=!1){const s=new yT(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:o}):Object.assign(i,{captchaResponse:o}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function xd(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jp(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await jp(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e){const n=Mh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Al(o,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function ET(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wT(t,e,n){const r=ss(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Nv(e),{host:i,port:c}=_T(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${i}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),bT()}function Nv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _T(t){const e=Nv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Wp(r.substr(o.length+1))}}else{const[o,i]=r.split(":");return{host:o,port:Wp(i)}}}function Wp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,n){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}}async function xT(t,e){return Ir(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e){return zi(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(t,e){return zi(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function NT(t,e){return zi(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Bh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ki(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ki(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xd(e,n,"signInWithPassword",TT);case"emailLink":return ST(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xd(e,r,"signUpPassword",xT);case"emailLink":return NT(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return zi(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="http://localhost";class Qr extends Bh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Oh(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new Qr(r,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:kT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IT(t){const e=zo(jo(t)).link,n=e?zo(jo(e)).deep_link_id:null,r=zo(jo(t)).deep_link_id;return(r?zo(jo(r)).link:null)||r||n||e||t}class zh{constructor(e){var n,r,s,o,i,c;const u=zo(jo(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,y=AT((s=u.mode)!==null&&s!==void 0?s:null);ie(h&&p&&y,"argument-error"),this.apiKey=h,this.operation=y,this.code=p,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(i=u.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=IT(e);try{return new zh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return ki._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zh.parseLink(n);return ie(r,"argument-error"),ki._fromEmailAndCode(e,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends kv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ji{constructor(){super("facebook.com")}static credential(e){return Qr._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ji{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ji{constructor(){super("github.com")}static credential(e){return Qr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ji{constructor(){super("twitter.com")}static credential(e,n){return Qr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(t,e){return zi(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await In._fromIdTokenResponse(e,r,s),i=Hp(r);return new Yr({user:o,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hp(r);return new Yr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Wn{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rl(e,n,r,s)}}function Av(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rl._fromErrorAndOperation(t,o,e,r):o})}async function CT(t,e,n=!1){const r=await Ni(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t,e,n=!1){const{auth:r}=t;if(mn(r.app))return Promise.reject(Rn(r));const s="reauthenticate";try{const o=await Ni(t,Av(r,s,e,t),n);ie(o.idToken,r,"internal-error");const i=Uh(o.idToken);ie(i,r,"internal-error");const{sub:c}=i;return ie(t.uid===c,r,"user-mismatch"),Yr._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&cn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(t,e,n=!1){if(mn(t.app))return Promise.reject(Rn(t));const r="signIn",s=await Av(t,r,e),o=await Yr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function LT(t,e){return Iv(ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pv(t){const e=ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DT(t,e,n){if(mn(t.app))return Promise.reject(Rn(t));const r=ss(t),i=await xd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PT).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Pv(t),u}),c=await Yr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(c.user),c}function $p(t,e,n){return mn(t.app)?Promise.reject(Rn(t)):LT(Jt(t),uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Pv(t),r})}function MT(t,e,n,r){return Jt(t).onIdTokenChanged(e,n,r)}function OT(t,e,n){return Jt(t).beforeAuthStateChanged(e,n)}const Ll="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ll,"1"),this.storage.removeItem(Ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=1e3,FT=10;class Rv extends Cv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,c,u)=>{this.notifyListeners(i,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},o=this.storage.getItem(r);oT()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FT):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rv.type="LOCAL";const UT=Rv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Cv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lv.type="SESSION";const Dv=Lv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ac(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(i).map(async h=>h(n.origin,o)),u=await qT(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((c,u)=>{const h=jh("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(y){const _=y;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(_.data.response);break;default:clearTimeout(p),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function zT(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function jT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HT(){return Mv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="firebaseLocalStorageDb",$T=1,Dl="firebaseLocalStorage",Vv="fbase_key";class Wi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lc(t,e){return t.transaction([Dl],e?"readwrite":"readonly").objectStore(Dl)}function GT(){const t=indexedDB.deleteDatabase(Ov);return new Wi(t).toPromise()}function Td(){const t=indexedDB.open(Ov,$T);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dl,{keyPath:Vv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dl)?e(r):(r.close(),await GT(),e(await Td()))})})}async function Gp(t,e,n){const r=lc(t,!0).put({[Vv]:e,value:n});return new Wi(r).toPromise()}async function XT(t,e){const n=lc(t,!1).get(e),r=await new Wi(n).toPromise();return r===void 0?null:r.value}function Xp(t,e){const n=lc(t,!0).delete(e);return new Wi(n).toPromise()}const KT=800,QT=3;class Fv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Td(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ac._getInstance(HT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jT(),!this.activeServiceWorker)return;this.sender=new BT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Td();return await Gp(e,Ll,"1"),await Xp(e,Ll),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=lc(s,!1).getAll();return new Wi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fv.type="LOCAL";const YT=Fv;new Bi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e){return e?Pn(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Bh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZT(t){return Iv(t.auth,new Wh(t),t.bypassAuthState)}function eS(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),RT(n,new Wh(t),t.bypassAuthState)}async function tS(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),CT(n,new Wh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:i,type:c}=e;if(i){this.reject(i);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZT;case"linkViaPopup":case"linkViaRedirect":return tS;case"reauthViaPopup":case"reauthViaRedirect":return eS;default:cn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new Bi(2e3,1e4);class Ds extends Uv{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nS.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="pendingRedirect",Qa=new Map;class sS extends Uv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qa.get(this.auth._key());if(!e){try{const r=await oS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qa.set(this.auth._key(),e)}return this.bypassAuthState||Qa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oS(t,e){const n=lS(e),r=aS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function iS(t,e){Qa.set(t._key(),e)}function aS(t){return Pn(t._redirectPersistence)}function lS(t){return Ka(rS,t.config.apiKey,t.name)}async function cS(t,e,n=!1){if(mn(t.app))return Promise.reject(Rn(t));const r=ss(t),s=JT(r,e),i=await new sS(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=10*60*1e3;class dS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qv(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kp(e))}saveEventToCache(e){this.cachedEventUids.add(Kp(e)),this.lastProcessedEventTime=Date.now()}}function Kp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t,e={}){return Ir(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pS=/^https?/;async function gS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mS(t);for(const n of e)try{if(yS(n))return}catch{}cn(t,"unauthorized-domain")}function yS(t){const e=_d(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!pS.test(n))return!1;if(fS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Bi(3e4,6e4);function Qp(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ES(t){return new Promise((e,n)=>{var r,s,o;function i(){Qp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qp(),n(gn(t,"network-request-failed"))},timeout:vS.get()})}if(!((s=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=yn().gapi)===null||o===void 0)&&o.load)i();else{const c=fT("iframefcb");return yn()[c]=()=>{gapi.load?i():n(gn(t,"network-request-failed"))},Sv(`${mT()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ya=null,e})}let Ya=null;function wS(t){return Ya=Ya||ES(t),Ya}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Bi(5e3,15e3),bS="__/auth/iframe",xS="emulator/auth/iframe",TS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NS(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fh(e,xS):`https://${t.config.authDomain}/${bS}`,r={apiKey:e.apiKey,appName:t.name,v:co},s=SS.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qi(r).slice(1)}`}async function kS(t){const e=await wS(t),n=yn().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:NS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TS,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const i=gn(t,"network-request-failed"),c=yn().setTimeout(()=>{o(i)},_S.get());function u(){yn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IS=500,PS=600,CS="_blank",RS="http://localhost";class Yp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LS(t,e,n,r=IS,s=PS){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},AS),{width:r.toString(),height:s.toString(),top:o,left:i}),h=St().toLowerCase();n&&(c=vv(h)?CS:n),gv(h)&&(e=e||RS,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[I,L])=>`${_}${I}=${L},`,"");if(sT(h)&&c!=="_self")return DS(e||"",c),new Yp(null);const y=window.open(e||"",c,p);ie(y,t,"popup-blocked");try{y.focus()}catch{}return new Yp(y)}function DS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="__/auth/handler",OS="emulator/auth/handler",VS=encodeURIComponent("fac");async function Jp(t,e,n,r,s,o){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:s};if(e instanceof kv){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",Nx(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))i[p]=y}if(e instanceof ji){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(i.scopes=p.join(","))}t.tenantId&&(i.tid=t.tenantId);const c=i;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${VS}=${encodeURIComponent(u)}`:"";return`${FS(t)}?${qi(c).slice(1)}${h}`}function FS({config:t}){return t.emulator?Fh(t,OS):`https://${t.authDomain}/${MS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="webStorageSupport";class US{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dv,this._completeRedirectFn=cS,this._overrideRedirectResult=iS}async _openPopup(e,n,r,s){var o;qn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Jp(e,n,r,_d(),s);return LS(e,i,jh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Jp(e,n,r,_d(),s);return zT(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(qn(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kS(e),r=new dS(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vu,{type:vu},s=>{var o;const i=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[vu];i!==void 0&&n(!!i),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xv()||yv()||qh()}}const qS=US;var Zp="@firebase/auth",eg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jS(t){Js(new Kr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:c}=r.options;ie(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:i,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tv(t)},h=new uT(r,s,o,u);return ET(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Js(new Kr("auth-internal",e=>{const n=ss(e.getProvider("auth").getImmediate());return(r=>new BS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(Zp,eg,zS(t)),vr(Zp,eg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=5*60,HS=ev("authIdTokenMaxAge")||WS;let tg=null;const $S=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HS)return;const s=n==null?void 0:n.token;tg!==s&&(tg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GS(t=sv()){const e=Mh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vT(t,{popupRedirectResolver:qS,persistence:[YT,UT,Dv]}),r=ev("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const i=$S(o.toString());OT(n,i,()=>i(n.currentUser)),MT(n,c=>i(c))}}const s=Jy("auth");return s&&wT(n,`http://${s}`),n}function XS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=gn("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",XS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jS("Browser");var ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Bv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,g){function E(){}E.prototype=g.prototype,b.D=g.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(x,A,R){for(var w=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)w[Z-2]=arguments[Z];return g.prototype[A].apply(x,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,g,E){E||(E=0);var x=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)x[A]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(A=0;16>A;++A)x[A]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=b.g[0],E=b.g[1],A=b.g[2];var R=b.g[3],w=g+(R^E&(A^R))+x[0]+3614090360&4294967295;g=E+(w<<7&4294967295|w>>>25),w=R+(A^g&(E^A))+x[1]+3905402710&4294967295,R=g+(w<<12&4294967295|w>>>20),w=A+(E^R&(g^E))+x[2]+606105819&4294967295,A=R+(w<<17&4294967295|w>>>15),w=E+(g^A&(R^g))+x[3]+3250441966&4294967295,E=A+(w<<22&4294967295|w>>>10),w=g+(R^E&(A^R))+x[4]+4118548399&4294967295,g=E+(w<<7&4294967295|w>>>25),w=R+(A^g&(E^A))+x[5]+1200080426&4294967295,R=g+(w<<12&4294967295|w>>>20),w=A+(E^R&(g^E))+x[6]+2821735955&4294967295,A=R+(w<<17&4294967295|w>>>15),w=E+(g^A&(R^g))+x[7]+4249261313&4294967295,E=A+(w<<22&4294967295|w>>>10),w=g+(R^E&(A^R))+x[8]+1770035416&4294967295,g=E+(w<<7&4294967295|w>>>25),w=R+(A^g&(E^A))+x[9]+2336552879&4294967295,R=g+(w<<12&4294967295|w>>>20),w=A+(E^R&(g^E))+x[10]+4294925233&4294967295,A=R+(w<<17&4294967295|w>>>15),w=E+(g^A&(R^g))+x[11]+2304563134&4294967295,E=A+(w<<22&4294967295|w>>>10),w=g+(R^E&(A^R))+x[12]+1804603682&4294967295,g=E+(w<<7&4294967295|w>>>25),w=R+(A^g&(E^A))+x[13]+4254626195&4294967295,R=g+(w<<12&4294967295|w>>>20),w=A+(E^R&(g^E))+x[14]+2792965006&4294967295,A=R+(w<<17&4294967295|w>>>15),w=E+(g^A&(R^g))+x[15]+1236535329&4294967295,E=A+(w<<22&4294967295|w>>>10),w=g+(A^R&(E^A))+x[1]+4129170786&4294967295,g=E+(w<<5&4294967295|w>>>27),w=R+(E^A&(g^E))+x[6]+3225465664&4294967295,R=g+(w<<9&4294967295|w>>>23),w=A+(g^E&(R^g))+x[11]+643717713&4294967295,A=R+(w<<14&4294967295|w>>>18),w=E+(R^g&(A^R))+x[0]+3921069994&4294967295,E=A+(w<<20&4294967295|w>>>12),w=g+(A^R&(E^A))+x[5]+3593408605&4294967295,g=E+(w<<5&4294967295|w>>>27),w=R+(E^A&(g^E))+x[10]+38016083&4294967295,R=g+(w<<9&4294967295|w>>>23),w=A+(g^E&(R^g))+x[15]+3634488961&4294967295,A=R+(w<<14&4294967295|w>>>18),w=E+(R^g&(A^R))+x[4]+3889429448&4294967295,E=A+(w<<20&4294967295|w>>>12),w=g+(A^R&(E^A))+x[9]+568446438&4294967295,g=E+(w<<5&4294967295|w>>>27),w=R+(E^A&(g^E))+x[14]+3275163606&4294967295,R=g+(w<<9&4294967295|w>>>23),w=A+(g^E&(R^g))+x[3]+4107603335&4294967295,A=R+(w<<14&4294967295|w>>>18),w=E+(R^g&(A^R))+x[8]+1163531501&4294967295,E=A+(w<<20&4294967295|w>>>12),w=g+(A^R&(E^A))+x[13]+2850285829&4294967295,g=E+(w<<5&4294967295|w>>>27),w=R+(E^A&(g^E))+x[2]+4243563512&4294967295,R=g+(w<<9&4294967295|w>>>23),w=A+(g^E&(R^g))+x[7]+1735328473&4294967295,A=R+(w<<14&4294967295|w>>>18),w=E+(R^g&(A^R))+x[12]+2368359562&4294967295,E=A+(w<<20&4294967295|w>>>12),w=g+(E^A^R)+x[5]+4294588738&4294967295,g=E+(w<<4&4294967295|w>>>28),w=R+(g^E^A)+x[8]+2272392833&4294967295,R=g+(w<<11&4294967295|w>>>21),w=A+(R^g^E)+x[11]+1839030562&4294967295,A=R+(w<<16&4294967295|w>>>16),w=E+(A^R^g)+x[14]+4259657740&4294967295,E=A+(w<<23&4294967295|w>>>9),w=g+(E^A^R)+x[1]+2763975236&4294967295,g=E+(w<<4&4294967295|w>>>28),w=R+(g^E^A)+x[4]+1272893353&4294967295,R=g+(w<<11&4294967295|w>>>21),w=A+(R^g^E)+x[7]+4139469664&4294967295,A=R+(w<<16&4294967295|w>>>16),w=E+(A^R^g)+x[10]+3200236656&4294967295,E=A+(w<<23&4294967295|w>>>9),w=g+(E^A^R)+x[13]+681279174&4294967295,g=E+(w<<4&4294967295|w>>>28),w=R+(g^E^A)+x[0]+3936430074&4294967295,R=g+(w<<11&4294967295|w>>>21),w=A+(R^g^E)+x[3]+3572445317&4294967295,A=R+(w<<16&4294967295|w>>>16),w=E+(A^R^g)+x[6]+76029189&4294967295,E=A+(w<<23&4294967295|w>>>9),w=g+(E^A^R)+x[9]+3654602809&4294967295,g=E+(w<<4&4294967295|w>>>28),w=R+(g^E^A)+x[12]+3873151461&4294967295,R=g+(w<<11&4294967295|w>>>21),w=A+(R^g^E)+x[15]+530742520&4294967295,A=R+(w<<16&4294967295|w>>>16),w=E+(A^R^g)+x[2]+3299628645&4294967295,E=A+(w<<23&4294967295|w>>>9),w=g+(A^(E|~R))+x[0]+4096336452&4294967295,g=E+(w<<6&4294967295|w>>>26),w=R+(E^(g|~A))+x[7]+1126891415&4294967295,R=g+(w<<10&4294967295|w>>>22),w=A+(g^(R|~E))+x[14]+2878612391&4294967295,A=R+(w<<15&4294967295|w>>>17),w=E+(R^(A|~g))+x[5]+4237533241&4294967295,E=A+(w<<21&4294967295|w>>>11),w=g+(A^(E|~R))+x[12]+1700485571&4294967295,g=E+(w<<6&4294967295|w>>>26),w=R+(E^(g|~A))+x[3]+2399980690&4294967295,R=g+(w<<10&4294967295|w>>>22),w=A+(g^(R|~E))+x[10]+4293915773&4294967295,A=R+(w<<15&4294967295|w>>>17),w=E+(R^(A|~g))+x[1]+2240044497&4294967295,E=A+(w<<21&4294967295|w>>>11),w=g+(A^(E|~R))+x[8]+1873313359&4294967295,g=E+(w<<6&4294967295|w>>>26),w=R+(E^(g|~A))+x[15]+4264355552&4294967295,R=g+(w<<10&4294967295|w>>>22),w=A+(g^(R|~E))+x[6]+2734768916&4294967295,A=R+(w<<15&4294967295|w>>>17),w=E+(R^(A|~g))+x[13]+1309151649&4294967295,E=A+(w<<21&4294967295|w>>>11),w=g+(A^(E|~R))+x[4]+4149444226&4294967295,g=E+(w<<6&4294967295|w>>>26),w=R+(E^(g|~A))+x[11]+3174756917&4294967295,R=g+(w<<10&4294967295|w>>>22),w=A+(g^(R|~E))+x[2]+718787259&4294967295,A=R+(w<<15&4294967295|w>>>17),w=E+(R^(A|~g))+x[9]+3951481745&4294967295,b.g[0]=b.g[0]+g&4294967295,b.g[1]=b.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,g){g===void 0&&(g=b.length);for(var E=g-this.blockSize,x=this.B,A=this.h,R=0;R<g;){if(A==0)for(;R<=E;)s(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<g;)if(x[A++]=b.charCodeAt(R++),A==this.blockSize){s(this,x),A=0;break}}else for(;R<g;)if(x[A++]=b[R++],A==this.blockSize){s(this,x),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var g=1;g<b.length-8;++g)b[g]=0;var E=8*this.o;for(g=b.length-8;g<b.length;++g)b[g]=E&255,E/=256;for(this.u(b),b=Array(16),g=E=0;4>g;++g)for(var x=0;32>x;x+=8)b[E++]=this.g[g]>>>x&255;return b};function o(b,g){var E=c;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=g(b)}function i(b,g){this.h=g;for(var E=[],x=!0,A=b.length-1;0<=A;A--){var R=b[A]|0;x&&R==g||(E[A]=R,x=!1)}this.g=E}var c={};function u(b){return-128<=b&&128>b?o(b,function(g){return new i([g|0],0>g?-1:0)}):new i([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return y;if(0>b)return F(h(-b));for(var g=[],E=1,x=0;b>=E;x++)g[x]=b/E|0,E*=4294967296;return new i(g,0)}function p(b,g){if(b.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(b.charAt(0)=="-")return F(p(b.substring(1),g));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),x=y,A=0;A<b.length;A+=8){var R=Math.min(8,b.length-A),w=parseInt(b.substring(A,A+R),g);8>R?(R=h(Math.pow(g,R)),x=x.j(R).add(h(w))):(x=x.j(E),x=x.add(h(w)))}return x}var y=u(0),_=u(1),I=u(16777216);t=i.prototype,t.m=function(){if(M(this))return-F(this).m();for(var b=0,g=1,E=0;E<this.g.length;E++){var x=this.i(E);b+=(0<=x?x:4294967296+x)*g,g*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(L(this))return"0";if(M(this))return"-"+F(this).toString(b);for(var g=h(Math.pow(b,6)),E=this,x="";;){var A=D(E,g).g;E=N(E,A.j(g));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=A,L(E))return R+x;for(;6>R.length;)R="0"+R;x=R+x}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function L(b){if(b.h!=0)return!1;for(var g=0;g<b.g.length;g++)if(b.g[g]!=0)return!1;return!0}function M(b){return b.h==-1}t.l=function(b){return b=N(this,b),M(b)?-1:L(b)?0:1};function F(b){for(var g=b.g.length,E=[],x=0;x<g;x++)E[x]=~b.g[x];return new i(E,~b.h).add(_)}t.abs=function(){return M(this)?F(this):this},t.add=function(b){for(var g=Math.max(this.g.length,b.g.length),E=[],x=0,A=0;A<=g;A++){var R=x+(this.i(A)&65535)+(b.i(A)&65535),w=(R>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);x=w>>>16,R&=65535,w&=65535,E[A]=w<<16|R}return new i(E,E[E.length-1]&-2147483648?-1:0)};function N(b,g){return b.add(F(g))}t.j=function(b){if(L(this)||L(b))return y;if(M(this))return M(b)?F(this).j(F(b)):F(F(this).j(b));if(M(b))return F(this.j(F(b)));if(0>this.l(I)&&0>b.l(I))return h(this.m()*b.m());for(var g=this.g.length+b.g.length,E=[],x=0;x<2*g;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<b.g.length;A++){var R=this.i(x)>>>16,w=this.i(x)&65535,Z=b.i(A)>>>16,re=b.i(A)&65535;E[2*x+2*A]+=w*re,S(E,2*x+2*A),E[2*x+2*A+1]+=R*re,S(E,2*x+2*A+1),E[2*x+2*A+1]+=w*Z,S(E,2*x+2*A+1),E[2*x+2*A+2]+=R*Z,S(E,2*x+2*A+2)}for(x=0;x<g;x++)E[x]=E[2*x+1]<<16|E[2*x];for(x=g;x<2*g;x++)E[x]=0;return new i(E,0)};function S(b,g){for(;(b[g]&65535)!=b[g];)b[g+1]+=b[g]>>>16,b[g]&=65535,g++}function k(b,g){this.g=b,this.h=g}function D(b,g){if(L(g))throw Error("division by zero");if(L(b))return new k(y,y);if(M(b))return g=D(F(b),g),new k(F(g.g),F(g.h));if(M(g))return g=D(b,F(g)),new k(F(g.g),g.h);if(30<b.g.length){if(M(b)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var E=_,x=g;0>=x.l(b);)E=q(E),x=q(x);var A=z(E,1),R=z(x,1);for(x=z(x,2),E=z(E,2);!L(x);){var w=R.add(x);0>=w.l(b)&&(A=A.add(E),R=w),x=z(x,1),E=z(E,1)}return g=N(b,A.j(g)),new k(A,g)}for(A=y;0<=b.l(g);){for(E=Math.max(1,Math.floor(b.m()/g.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),R=h(E),w=R.j(g);M(w)||0<w.l(b);)E-=x,R=h(E),w=R.j(g);L(R)&&(R=_),A=A.add(R),b=N(b,w)}return new k(A,b)}t.A=function(b){return D(this,b).h},t.and=function(b){for(var g=Math.max(this.g.length,b.g.length),E=[],x=0;x<g;x++)E[x]=this.i(x)&b.i(x);return new i(E,this.h&b.h)},t.or=function(b){for(var g=Math.max(this.g.length,b.g.length),E=[],x=0;x<g;x++)E[x]=this.i(x)|b.i(x);return new i(E,this.h|b.h)},t.xor=function(b){for(var g=Math.max(this.g.length,b.g.length),E=[],x=0;x<g;x++)E[x]=this.i(x)^b.i(x);return new i(E,this.h^b.h)};function q(b){for(var g=b.g.length+1,E=[],x=0;x<g;x++)E[x]=b.i(x)<<1|b.i(x-1)>>>31;return new i(E,b.h)}function z(b,g){var E=g>>5;g%=32;for(var x=b.g.length-E,A=[],R=0;R<x;R++)A[R]=0<g?b.i(R+E)>>>g|b.i(R+E+1)<<32-g:b.i(R+E);return new i(A,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bv=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=h,i.fromString=p,jr=i}).apply(typeof ng<"u"?ng:typeof self<"u"?self:typeof window<"u"?window:{});var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zv,Wo,jv,Ja,Sd,Wv,Hv,$v;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ca=="object"&&Ca];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var O=l[v];if(!(O in m))break e;m=m[O]}l=l[l.length-1],v=m[l],d=d(v),d!=v&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function o(l,d){l instanceof String&&(l+="");var m=0,v=!1,O={next:function(){if(!v&&m<l.length){var B=m++;return{value:d(B,l[B]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return o(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},c=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function h(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function p(l,d,m){return l.call.apply(l.bind,arguments)}function y(l,d,m){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function _(l,d,m){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,_.apply(null,arguments)}function I(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function L(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(v,O,B){for(var K=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)K[Le-2]=arguments[Le];return d.prototype[O].apply(v,K)}}function M(l){const d=l.length;if(0<d){const m=Array(d);for(let v=0;v<d;v++)m[v]=l[v];return m}return[]}function F(l,d){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(u(v)){const O=l.length||0,B=v.length||0;l.length=O+B;for(let K=0;K<B;K++)l[O+K]=v[K]}else l.push(v)}}class N{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function S(l){return/^[\s\xa0]*$/.test(l)}function k(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var q=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(l,d,m){for(const v in l)d.call(m,l[v],v,l)}function b(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function g(l){const d={};for(const m in l)d[m]=l[m];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,d){let m,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(m in v)l[m]=v[m];for(let B=0;B<E.length;B++)m=E[B],Object.prototype.hasOwnProperty.call(v,m)&&(l[m]=v[m])}}function A(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function R(l){c.setTimeout(()=>{throw l},0)}function w(){var l=Q;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Z{constructor(){this.h=this.g=null}add(d,m){const v=re.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var re=new N(()=>new P,l=>l.reset());class P{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,j=!1,Q=new Z,X=()=>{const l=c.Promise.resolve(void 0);Se=()=>{l.then(le)}};var le=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(m){R(m)}var d=re;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}j=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};c.addEventListener("test",m,d),c.removeEventListener("test",m,d)}catch{}return l}();function fe(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(q){e:{try{D(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fe.aa.h.call(this)}}L(fe,he);var Ne={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Be(l,d,m,v,O){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=O,this.key=++Ke,this.da=this.fa=!1}function me(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Pe(l){this.src=l,this.g={},this.h=0}Pe.prototype.add=function(l,d,m,v,O){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var K=f(l,d,v,O);return-1<K?(d=l[K],m||(d.fa=!1)):(d=new Be(d,this.src,B,!!v,O),d.fa=m,l.push(d)),d};function be(l,d){var m=d.type;if(m in l.g){var v=l.g[m],O=Array.prototype.indexOf.call(v,d,void 0),B;(B=0<=O)&&Array.prototype.splice.call(v,O,1),B&&(me(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function f(l,d,m,v){for(var O=0;O<l.length;++O){var B=l[O];if(!B.da&&B.listener==d&&B.capture==!!m&&B.ha==v)return O}return-1}var T="closure_lm_"+(1e6*Math.random()|0),C={};function V(l,d,m,v,O){if(Array.isArray(d)){for(var B=0;B<d.length;B++)V(l,d[B],m,v,O);return null}return m=wm(m),l&&l[Ie]?l.K(d,m,h(v)?!!v.capture:!1,O):W(l,d,m,!1,v,O)}function W(l,d,m,v,O,B){if(!d)throw Error("Invalid event type");var K=h(O)?!!O.capture:!!O,Le=bc(l);if(Le||(l[T]=Le=new Pe(l)),m=Le.add(d,m,v,K,B),m.proxy)return m;if(v=ee(),m.proxy=v,v.src=l,v.listener=m,l.addEventListener)ce||(O=K),O===void 0&&(O=!1),l.addEventListener(d.toString(),v,O);else if(l.attachEvent)l.attachEvent(pe(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ee(){function l(m){return d.call(l.src,l.listener,m)}const d=te;return l}function ze(l,d,m,v,O){if(Array.isArray(d))for(var B=0;B<d.length;B++)ze(l,d[B],m,v,O);else v=h(v)?!!v.capture:!!v,m=wm(m),l&&l[Ie]?(l=l.i,d=String(d).toString(),d in l.g&&(B=l.g[d],m=f(B,m,v,O),-1<m&&(me(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete l.g[d],l.h--)))):l&&(l=bc(l))&&(d=l.g[d.toString()],l=-1,d&&(l=f(d,m,v,O)),(m=-1<l?d[l]:null)&&Fe(m))}function Fe(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ie])be(d.i,l);else{var m=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(m,v,l.capture):d.detachEvent?d.detachEvent(pe(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=bc(d))?(be(m,l),m.h==0&&(m.src=null,d[T]=null)):me(l)}}}function pe(l){return l in C?C[l]:C[l]="on"+l}function te(l,d){if(l.da)l=!0;else{d=new fe(d,this);var m=l.listener,v=l.ha||l.src;l.fa&&Fe(l),l=m.call(v,d)}return l}function bc(l){return l=l[T],l instanceof Pe?l:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function wm(l){return typeof l=="function"?l:(l[xc]||(l[xc]=function(d){return l.handleEvent(d)}),l[xc])}function pt(){oe.call(this),this.i=new Pe(this),this.M=this,this.F=null}L(pt,oe),pt.prototype[Ie]=!0,pt.prototype.removeEventListener=function(l,d,m,v){ze(this,l,d,m,v)};function Nt(l,d){var m,v=l.F;if(v)for(m=[];v;v=v.F)m.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var O=d;d=new he(v,l),x(d,O)}if(O=!0,m)for(var B=m.length-1;0<=B;B--){var K=d.g=m[B];O=Yi(K,v,!0,d)&&O}if(K=d.g=l,O=Yi(K,v,!0,d)&&O,O=Yi(K,v,!1,d)&&O,m)for(B=0;B<m.length;B++)K=d.g=m[B],O=Yi(K,v,!1,d)&&O}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],v=0;v<m.length;v++)me(m[v]);delete l.g[d],l.h--}}this.F=null},pt.prototype.K=function(l,d,m,v){return this.i.add(String(l),d,!1,m,v)},pt.prototype.L=function(l,d,m,v){return this.i.add(String(l),d,!0,m,v)};function Yi(l,d,m,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,B=0;B<d.length;++B){var K=d[B];if(K&&!K.da&&K.capture==m){var Le=K.listener,at=K.ha||K.src;K.fa&&be(l.i,K),O=Le.call(at,v)!==!1&&O}}return O&&!v.defaultPrevented}function _m(l,d,m){if(typeof l=="function")m&&(l=_(l,m));else if(l&&typeof l.handleEvent=="function")l=_(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(l,d||0)}function bm(l){l.g=_m(()=>{l.g=null,l.i&&(l.i=!1,bm(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class dw extends oe{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:bm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function go(l){oe.call(this),this.h=l,this.g={}}L(go,oe);var xm=[];function Tm(l){z(l.g,function(d,m){this.g.hasOwnProperty(m)&&Fe(d)},l),l.g={}}go.prototype.N=function(){go.aa.N.call(this),Tm(this)},go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tc=c.JSON.stringify,hw=c.JSON.parse,mw=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Sc(){}Sc.prototype.h=null;function Sm(l){return l.h||(l.h=l.i())}function Nm(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nc(){he.call(this,"d")}L(Nc,he);function kc(){he.call(this,"c")}L(kc,he);var Pr={},km=null;function Ji(){return km=km||new pt}Pr.La="serverreachability";function Am(l){he.call(this,Pr.La,l)}L(Am,he);function vo(l){const d=Ji();Nt(d,new Am(d))}Pr.STAT_EVENT="statevent";function Im(l,d){he.call(this,Pr.STAT_EVENT,l),this.stat=d}L(Im,he);function kt(l){const d=Ji();Nt(d,new Im(d,l))}Pr.Ma="timingevent";function Pm(l,d){he.call(this,Pr.Ma,l),this.size=d}L(Pm,he);function Eo(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},d)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function fw(l,d,m,v,O,B){l.info(function(){if(l.g)if(B)for(var K="",Le=B.split("&"),at=0;at<Le.length;at++){var ke=Le[at].split("=");if(1<ke.length){var gt=ke[0];ke=ke[1];var yt=gt.split("_");K=2<=yt.length&&yt[1]=="type"?K+(gt+"="+ke+"&"):K+(gt+"=redacted&")}}else K=null;else K=B;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+d+`
`+m+`
`+K})}function pw(l,d,m,v,O,B,K){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+d+`
`+m+`
`+B+" "+K})}function as(l,d,m,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+yw(l,m)+(v?" "+v:"")})}function gw(l,d){l.info(function(){return"TIMEOUT: "+d})}wo.prototype.info=function(){};function yw(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var v=m[l];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return Tc(m)}catch{return d}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ac;function ea(){}L(ea,Sc),ea.prototype.g=function(){return new XMLHttpRequest},ea.prototype.i=function(){return{}},Ac=new ea;function $n(l,d,m,v){this.j=l,this.i=d,this.l=m,this.R=v||1,this.U=new go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rm}function Rm(){this.i=null,this.g="",this.h=!1}var Lm={},Ic={};function Pc(l,d,m){l.L=1,l.v=sa(bn(d)),l.m=m,l.P=!0,Dm(l,null)}function Dm(l,d){l.F=Date.now(),ta(l),l.A=bn(l.v);var m=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Xm(m.i,"t",v),l.C=0,m=l.j.J,l.h=new Rm,l.g=mf(l.j,m?d:null,!l.m),0<l.O&&(l.M=new dw(_(l.Y,l,l.g),l.O)),d=l.U,m=l.g,v=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(xm[0]=O.toString()),O=xm);for(var B=0;B<O.length;B++){var K=V(m,O[B],v||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=l.H?g(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),vo(),fw(l.i,l.u,l.A,l.l,l.R,l.m)}$n.prototype.ca=function(l){l=l.target;const d=this.M;d&&xn(l)==3?d.j():this.Y(l)},$n.prototype.Y=function(l){try{if(l==this.g)e:{const yt=xn(this.g);var d=this.g.Ba();const us=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||tf(this.g)))){this.J||yt!=4||d==7||(d==8||0>=us?vo(3):vo(2)),Cc(this);var m=this.g.Z();this.X=m;t:if(Mm(this)){var v=tf(this.g);l="";var O=v.length,B=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),_o(this);var K="";break t}this.h.i=new c.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(B&&d==O-1)});v.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,pw(this.i,this.u,this.A,this.l,this.R,yt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,at=this.g;if((Le=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Le)){var ke=Le;break t}}ke=null}if(m=ke)as(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rc(this,m);else{this.o=!1,this.s=3,kt(12),Cr(this),_o(this);break e}}if(this.P){m=!0;let Zt;for(;!this.J&&this.C<K.length;)if(Zt=vw(this,K),Zt==Ic){yt==4&&(this.s=4,kt(14),m=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Lm){this.s=4,kt(15),as(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else as(this.i,this.l,Zt,null),Rc(this,Zt);if(Mm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||K.length!=0||this.h.h||(this.s=1,kt(16),m=!1),this.o=this.o&&m,!m)as(this.i,this.l,K,"[Invalid Chunked Response]"),Cr(this),_o(this);else if(0<K.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Fc(gt),gt.M=!0,kt(11))}}else as(this.i,this.l,K,null),Rc(this,K);yt==4&&Cr(this),this.o&&!this.J&&(yt==4?cf(this.j,this):(this.o=!1,ta(this)))}else Mw(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Cr(this),_o(this)}}}catch{}finally{}};function Mm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vw(l,d){var m=l.C,v=d.indexOf(`
`,m);return v==-1?Ic:(m=Number(d.substring(m,v)),isNaN(m)?Lm:(v+=1,v+m>d.length?Ic:(d=d.slice(v,v+m),l.C=v+m,d)))}$n.prototype.cancel=function(){this.J=!0,Cr(this)};function ta(l){l.S=Date.now()+l.I,Om(l,l.I)}function Om(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Eo(_(l.ba,l),d)}function Cc(l){l.B&&(c.clearTimeout(l.B),l.B=null)}$n.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(gw(this.i,this.A),this.L!=2&&(vo(),kt(17)),Cr(this),this.s=2,_o(this)):Om(this,this.S-l)};function _o(l){l.j.G==0||l.J||cf(l.j,l)}function Cr(l){Cc(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Tm(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Rc(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Lc(m.h,l))){if(!l.K&&Lc(m.h,l)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)ua(m),la(m);else break e;Vc(m),kt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Eo(_(m.Za,m),6e3));if(1>=Um(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Lr(m,11)}else if((l.K||m.g==l)&&ua(m),!S(d))for(O=m.Da.g.parse(d),d=0;d<O.length;d++){let ke=O[d];if(m.T=ke[0],ke=ke[1],m.G==2)if(ke[0]=="c"){m.K=ke[1],m.ia=ke[2];const gt=ke[3];gt!=null&&(m.la=gt,m.j.info("VER="+m.la));const yt=ke[4];yt!=null&&(m.Aa=yt,m.j.info("SVER="+m.Aa));const us=ke[5];us!=null&&typeof us=="number"&&0<us&&(v=1.5*us,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Zt=l.g;if(Zt){const ha=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var B=v.h;B.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Dc(B,B.h),B.h=null))}if(v.D){const Uc=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Uc&&(v.ya=Uc,Me(v.I,v.D,Uc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var K=l;if(v.qa=hf(v,v.J?v.ia:null,v.W),K.K){qm(v.h,K);var Le=K,at=v.L;at&&(Le.I=at),Le.B&&(Cc(Le),ta(Le)),v.g=K}else af(v);0<m.i.length&&ca(m)}else ke[0]!="stop"&&ke[0]!="close"||Lr(m,7);else m.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Lr(m,7):Oc(m):ke[0]!="noop"&&m.l&&m.l.ta(ke),m.v=0)}}vo(4)}catch{}}var Ew=class{constructor(l,d){this.g=l,this.map=d}};function Vm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Um(l){return l.h?1:l.g?l.g.size:0}function Lc(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Dc(l,d){l.g?l.g.add(d):l.h=d}function qm(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Vm.prototype.cancel=function(){if(this.i=Bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Bm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return M(l.i)}function ww(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],m=l.length,v=0;v<m;v++)d.push(l[v]);return d}d=[],m=0;for(v in l)d[m++]=l[v];return d}function _w(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const v in l)d[m++]=v;return d}}}function zm(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=_w(l),v=ww(l),O=v.length,B=0;B<O;B++)d.call(void 0,v[B],m&&m[B],l)}var jm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bw(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var v=l[m].indexOf("="),O=null;if(0<=v){var B=l[m].substring(0,v);O=l[m].substring(v+1)}else B=l[m];d(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Rr){this.h=l.h,na(this,l.j),this.o=l.o,this.g=l.g,ra(this,l.s),this.l=l.l;var d=l.i,m=new To;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Wm(this,m),this.m=l.m}else l&&(d=String(l).match(jm))?(this.h=!1,na(this,d[1]||"",!0),this.o=bo(d[2]||""),this.g=bo(d[3]||"",!0),ra(this,d[4]),this.l=bo(d[5]||"",!0),Wm(this,d[6]||"",!0),this.m=bo(d[7]||"")):(this.h=!1,this.i=new To(null,this.h))}Rr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(xo(d,Hm,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(xo(d,Hm,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(xo(m,m.charAt(0)=="/"?Sw:Tw,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",xo(m,kw)),l.join("")};function bn(l){return new Rr(l)}function na(l,d,m){l.j=m?bo(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function ra(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Wm(l,d,m){d instanceof To?(l.i=d,Aw(l.i,l.h)):(m||(d=xo(d,Nw)),l.i=new To(d,l.h))}function Me(l,d,m){l.i.set(d,m)}function sa(l){return Me(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function bo(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,xw),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function xw(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Hm=/[#\/\?@]/g,Tw=/[#\?:]/g,Sw=/[#\?]/g,Nw=/[#\?@]/g,kw=/#/g;function To(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Gn(l){l.g||(l.g=new Map,l.h=0,l.i&&bw(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=To.prototype,t.add=function(l,d){Gn(this),this.i=null,l=ls(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function $m(l,d){Gn(l),d=ls(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Gm(l,d){return Gn(l),d=ls(l,d),l.g.has(d)}t.forEach=function(l,d){Gn(this),this.g.forEach(function(m,v){m.forEach(function(O){l.call(d,O,v,this)},this)},this)},t.na=function(){Gn(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){const O=l[v];for(let B=0;B<O.length;B++)m.push(d[v])}return m},t.V=function(l){Gn(this);let d=[];if(typeof l=="string")Gm(this,l)&&(d=d.concat(this.g.get(ls(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return Gn(this),this.i=null,l=ls(this,l),Gm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Xm(l,d,m){$m(l,d),0<m.length&&(l.i=null,l.g.set(ls(l,d),M(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];const B=encodeURIComponent(String(v)),K=this.V(v);for(v=0;v<K.length;v++){var O=B;K[v]!==""&&(O+="="+encodeURIComponent(String(K[v]))),l.push(O)}}return this.i=l.join("&")};function ls(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Aw(l,d){d&&!l.j&&(Gn(l),l.i=null,l.g.forEach(function(m,v){var O=v.toLowerCase();v!=O&&($m(this,v),Xm(this,O,m))},l)),l.j=d}function Iw(l,d){const m=new wo;if(c.Image){const v=new Image;v.onload=I(Xn,m,"TestLoadImage: loaded",!0,d,v),v.onerror=I(Xn,m,"TestLoadImage: error",!1,d,v),v.onabort=I(Xn,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=I(Xn,m,"TestLoadImage: timeout",!1,d,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function Pw(l,d){const m=new wo,v=new AbortController,O=setTimeout(()=>{v.abort(),Xn(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(B=>{clearTimeout(O),B.ok?Xn(m,"TestPingServer: ok",!0,d):Xn(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Xn(m,"TestPingServer: error",!1,d)})}function Xn(l,d,m,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(m)}catch{}}function Cw(){this.g=new mw}function Rw(l,d,m){const v=m||"";try{zm(l,function(O,B){let K=O;h(O)&&(K=Tc(O)),d.push(v+B+"="+encodeURIComponent(K))})}catch(O){throw d.push(v+"type="+encodeURIComponent("_badmap")),O}}function oa(l){this.l=l.Ub||null,this.j=l.eb||!1}L(oa,Sc),oa.prototype.g=function(){return new ia(this.l,this.j)},oa.prototype.i=function(l){return function(){return l}}({});function ia(l,d){pt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(ia,pt),t=ia.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,No(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Km(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Km(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?So(this):No(this),this.readyState==3&&Km(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,So(this))},t.Qa=function(l){this.g&&(this.response=l,So(this))},t.ga=function(){this.g&&So(this)};function So(l){l.readyState=4,l.l=null,l.j=null,l.v=null,No(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function No(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qm(l){let d="";return z(l,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function Mc(l,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Qm(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Me(l,d,m))}function Ge(l){pt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Ge,pt);var Lw=/^https?$/i,Dw=["POST","PUT"];t=Ge.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ac.g(),this.v=this.o?Sm(this.o):Sm(Ac),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(B){Ym(this,B);return}if(l=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)m.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const B of v.keys())m.set(B,v.get(B));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),O=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dw,d,void 0))||v||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of m)this.g.setRequestHeader(B,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ef(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ym(this,B)}};function Ym(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Jm(l),aa(l)}function Jm(l){l.A||(l.A=!0,Nt(l,"complete"),Nt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Nt(this,"complete"),Nt(this,"abort"),aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),aa(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zm(this):this.bb())},t.bb=function(){Zm(this)};function Zm(l){if(l.h&&typeof i<"u"&&(!l.v[1]||xn(l)!=4||l.Z()!=2)){if(l.u&&xn(l)==4)_m(l.Ea,0,l);else if(Nt(l,"readystatechange"),xn(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=K===0){var O=String(l.D).match(jm)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),v=!Lw.test(O?O.toLowerCase():"")}m=v}if(m)Nt(l,"complete"),Nt(l,"success");else{l.m=6;try{var B=2<xn(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Jm(l)}}finally{aa(l)}}}}function aa(l,d){if(l.g){ef(l);const m=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Nt(l,"ready");try{m.onreadystatechange=v}catch{}}}function ef(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function xn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),hw(d)}};function tf(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Mw(l){const d={};l=(l.g&&2<=xn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(S(l[v]))continue;var m=A(l[v]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const B=d[O]||[];d[O]=B,B.push(m)}b(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ko(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function nf(l){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ko("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ko("baseRetryDelayMs",5e3,l),this.cb=ko("retryDelaySeedMs",1e4,l),this.Wa=ko("forwardChannelMaxRetries",2,l),this.wa=ko("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Vm(l&&l.concurrentRequestLimit),this.Da=new Cw,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nf.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,v){kt(0),this.W=l,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=hf(this,null,this.W),ca(this)};function Oc(l){if(rf(l),l.G==3){var d=l.U++,m=bn(l.I);if(Me(m,"SID",l.K),Me(m,"RID",d),Me(m,"TYPE","terminate"),Ao(l,m),d=new $n(l,l.j,d),d.L=2,d.v=sa(bn(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=d.v,m=!0),m||(d.g=mf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ta(d)}df(l)}function la(l){l.g&&(Fc(l),l.g.cancel(),l.g=null)}function rf(l){la(l),l.u&&(c.clearTimeout(l.u),l.u=null),ua(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function ca(l){if(!Fm(l.h)&&!l.s){l.s=!0;var d=l.Ga;Se||X(),j||(Se(),j=!0),Q.add(d,l),l.B=0}}function Ow(l,d){return Um(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Eo(_(l.Ga,l,d),uf(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new $n(this,this.j,l);let B=this.o;if(this.S&&(B?(B=g(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=of(this,O,d),m=bn(this.I),Me(m,"RID",l),Me(m,"CVER",22),this.D&&Me(m,"X-HTTP-Session-Id",this.D),Ao(this,m),B&&(this.O?d="headers="+encodeURIComponent(String(Qm(B)))+"&"+d:this.m&&Mc(m,this.m,B)),Dc(this.h,O),this.Ua&&Me(m,"TYPE","init"),this.P?(Me(m,"$req",d),Me(m,"SID","null"),O.T=!0,Pc(O,m,null)):Pc(O,m,d),this.G=2}}else this.G==3&&(l?sf(this,l):this.i.length==0||Fm(this.h)||sf(this))};function sf(l,d){var m;d?m=d.l:m=l.U++;const v=bn(l.I);Me(v,"SID",l.K),Me(v,"RID",m),Me(v,"AID",l.T),Ao(l,v),l.m&&l.o&&Mc(v,l.m,l.o),m=new $n(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=of(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Dc(l.h,m),Pc(m,v,d)}function Ao(l,d){l.H&&z(l.H,function(m,v){Me(d,v,m)}),l.l&&zm({},function(m,v){Me(d,v,m)})}function of(l,d,m){m=Math.min(l.i.length,m);var v=l.l?_(l.l.Na,l.l,l):null;e:{var O=l.i;let B=-1;for(;;){const K=["count="+m];B==-1?0<m?(B=O[0].g,K.push("ofs="+B)):B=0:K.push("ofs="+B);let Le=!0;for(let at=0;at<m;at++){let ke=O[at].g;const gt=O[at].map;if(ke-=B,0>ke)B=Math.max(0,O[at].g-100),Le=!1;else try{Rw(gt,K,"req"+ke+"_")}catch{v&&v(gt)}}if(Le){v=K.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,v}function af(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Se||X(),j||(Se(),j=!0),Q.add(d,l),l.v=0}}function Vc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Eo(_(l.Fa,l),uf(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,lf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Eo(_(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),la(this),lf(this))};function Fc(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function lf(l){l.g=new $n(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=bn(l.qa);Me(d,"RID","rpc"),Me(d,"SID",l.K),Me(d,"AID",l.T),Me(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Me(d,"TO",l.ja),Me(d,"TYPE","xmlhttp"),Ao(l,d),l.m&&l.o&&Mc(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=sa(bn(d)),m.m=null,m.P=!0,Dm(m,l)}t.Za=function(){this.C!=null&&(this.C=null,la(this),Vc(this),kt(19))};function ua(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function cf(l,d){var m=null;if(l.g==d){ua(l),Fc(l),l.g=null;var v=2}else if(Lc(l.h,d))m=d.D,qm(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;v=Ji(),Nt(v,new Pm(v,m)),ca(l)}else af(l);else if(O=d.s,O==3||O==0&&0<d.X||!(v==1&&Ow(l,d)||v==2&&Vc(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),O){case 1:Lr(l,5);break;case 4:Lr(l,10);break;case 3:Lr(l,6);break;default:Lr(l,2)}}}function uf(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function Lr(l,d){if(l.j.info("Error code "+d),d==2){var m=_(l.fb,l),v=l.Xa;const O=!v;v=new Rr(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||na(v,"https"),sa(v),O?Iw(v.toString(),m):Pw(v.toString(),m)}else kt(2);l.G=0,l.l&&l.l.sa(d),df(l),rf(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function df(l){if(l.G=0,l.ka=[],l.l){const d=Bm(l.h);(d.length!=0||l.i.length!=0)&&(F(l.ka,d),F(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function hf(l,d,m){var v=m instanceof Rr?bn(m):new Rr(m);if(v.g!="")d&&(v.g=d+"."+v.g),ra(v,v.s);else{var O=c.location;v=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var B=new Rr(null);v&&na(B,v),d&&(B.g=d),O&&ra(B,O),m&&(B.l=m),v=B}return m=l.D,d=l.ya,m&&d&&Me(v,m,d),Me(v,"VER",l.la),Ao(l,v),v}function mf(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ge(new oa({eb:m})):new Ge(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ff(){}t=ff.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function da(){}da.prototype.g=function(l,d){return new Vt(l,d)};function Vt(l,d){pt.call(this),this.g=new nf(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!S(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!S(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new cs(this)}L(Vt,pt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Oc(this.g)},Vt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Tc(l),l=m);d.i.push(new Ew(d.Ya++,l)),d.G==3&&ca(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Oc(this.g),delete this.g,Vt.aa.N.call(this)};function pf(l){Nc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}L(pf,Nc);function gf(){kc.call(this),this.status=1}L(gf,kc);function cs(l){this.g=l}L(cs,ff),cs.prototype.ua=function(){Nt(this.g,"a")},cs.prototype.ta=function(l){Nt(this.g,new pf(l))},cs.prototype.sa=function(l){Nt(this.g,new gf)},cs.prototype.ra=function(){Nt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,$v=function(){return new da},Hv=function(){return Ji()},Wv=Pr,Sd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,Ja=Zi,Cm.COMPLETE="complete",jv=Cm,Nm.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Wo=Nm,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,zv=Ge}).apply(typeof Ca<"u"?Ca:typeof self<"u"?self:typeof window<"u"?window:{});const rg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Lh("@firebase/firestore");function Vo(){return Jr.logLevel}function J(t,...e){if(Jr.logLevel<=_e.DEBUG){const n=e.map(Hh);Jr.debug(`Firestore (${ho}): ${t}`,...n)}}function Bn(t,...e){if(Jr.logLevel<=_e.ERROR){const n=e.map(Hh);Jr.error(`Firestore (${ho}): ${t}`,...n)}}function Zs(t,...e){if(Jr.logLevel<=_e.WARN){const n=e.map(Hh);Jr.warn(`Firestore (${ho}): ${t}`,...n)}}function Hh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw Bn(e),new Error(e)}function Re(t,e){t||ae()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class QS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YS{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ln,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ln)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Gv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new _t(e)}}class JS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new eN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=nN(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function eo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new rt(0,0))}static max(){return new ue(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),i=n.get(s);if(o<i)return-1;if(o>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Ai{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const rN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends Ai{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return rN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(i=!i,s++):c!=="."||i?(r+=c,s++):(o(),s++)}if(o(),i)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(qe.fromString(e))}static fromName(e){return new se(qe.fromString(e).popFirst(5))}static empty(){return new se(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new qe(e.slice()))}}function sN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new br(s,se.empty(),e)}function oN(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(ue.min(),se.empty(),-1)}static max(){return new br(ue.max(),se.empty(),-1)}}function iN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==aN)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,o=0,i=!1;e.forEach(c=>{++s,c.next(()=>{++o,i&&o===s&&n()},u=>r(u))}),i=!0,o===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const o=e.length,i=new Array(o);let c=0;for(let u=0;u<o;u++){const h=u;n(e[h]).next(p=>{i[h]=p,++c,c===o&&r(i)},p=>s(p))}})}static doWhile(e,n){return new $((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function cN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $i(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$h.oe=-1;function cc(t){return t==null}function Ml(t){return t===0&&1/t==-1/0}function uN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ra(this.root,e,this.comparator,!0)}}class Ra{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??ct.RED,this.left=s??ct.EMPTY,this.right=o??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new ct(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,o){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new og(this.data.getIterator())}getIteratorFrom(e){return new og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new sn([])}unionWith(e){let n=new ht(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Qv("Invalid base64 string: "+o):o}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const dN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Re(!!t),typeof t=="string"){let e=0;const n=dN.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xh(t){const e=t.mapValue.fields.__previous_value__;return Gh(e)?Xh(e):e}function Ii(t){const e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s,o,i,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class Pi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La={mapValue:{}};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gh(t)?4:fN(t)?9007199254740991:mN(t)?10:11:ae()}function wn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ii(t).isEqual(Ii(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=xr(s.timestampValue),c=xr(o.timestampValue);return i.seconds===c.seconds&&i.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Zr(s.bytesValue).isEqual(Zr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Qe(s.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Qe(s.integerValue)===Qe(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=Qe(s.doubleValue),c=Qe(o.doubleValue);return i===c?Ml(i)===Ml(c):isNaN(i)&&isNaN(c)}return!1}(t,e);case 9:return eo(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,o){const i=s.mapValue.fields||{},c=o.mapValue.fields||{};if(sg(i)!==sg(c))return!1;for(const u in i)if(i.hasOwnProperty(u)&&(c[u]===void 0||!wn(i[u],c[u])))return!1;return!0}(t,e);default:return ae()}}function Ci(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function to(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,i){const c=Qe(o.integerValue||o.doubleValue),u=Qe(i.integerValue||i.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(Ii(t),Ii(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(o,i){const c=Zr(o),u=Zr(i);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,i){const c=o.split("/"),u=i.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Ae(c[h],u[h]);if(p!==0)return p}return Ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,i){const c=Ae(Qe(o.latitude),Qe(i.latitude));return c!==0?c:Ae(Qe(o.longitude),Qe(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ag(t.arrayValue,e.arrayValue);case 10:return function(o,i){var c,u,h,p;const y=o.fields||{},_=i.fields||{},I=(c=y.value)===null||c===void 0?void 0:c.arrayValue,L=(u=_.value)===null||u===void 0?void 0:u.arrayValue,M=Ae(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((p=L==null?void 0:L.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:ag(I,L)}(t.mapValue,e.mapValue);case 11:return function(o,i){if(o===La.mapValue&&i===La.mapValue)return 0;if(o===La.mapValue)return 1;if(i===La.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),h=i.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const _=Ae(u[y],p[y]);if(_!==0)return _;const I=to(c[u[y]],h[p[y]]);if(I!==0)return I}return Ae(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ae()}}function ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=xr(t),r=xr(e),s=Ae(n.seconds,r.seconds);return s!==0?s:Ae(n.nanos,r.nanos)}function ag(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=to(n[s],r[s]);if(o)return o}return Ae(n.length,r.length)}function no(t){return Nd(t)}function Nd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Nd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${Nd(n.fields[i])}`;return s+"}"}(t.mapValue):ae()}function kd(t){return!!t&&"integerValue"in t}function Kh(t){return!!t&&"arrayValue"in t}function lg(t){return!!t&&"nullValue"in t}function cg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Za(t){return!!t&&"mapValue"in t}function mN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function si(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=si(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=si(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Za(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=si(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((i,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}i?r[c.lastSegment()]=si(i):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Za(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Za(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){mo(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Gt(si(this.value))}}function Yv(t){const e=[];return mo(t.fields,(n,r)=>{const s=new ut([n]);if(Za(r)){const o=Yv(r.mapValue).fields;if(o.length===0)e.push(s);else for(const i of o)e.push(s.child(i))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,o,i,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=c}static newInvalidDocument(e){return new xt(e,0,ue.min(),ue.min(),ue.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,ue.min(),ue.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ue.min(),ue.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.position=e,this.inclusive=n}}function ug(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],i=t.position[s];if(o.field.isKeyField()?r=se.comparator(se.fromName(i.referenceValue),n.key):r=to(i,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function pN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{}class tt extends Jv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yN(e,n,r):n==="array-contains"?new wN(e,r):n==="in"?new _N(e,r):n==="not-in"?new bN(e,r):n==="array-contains-any"?new xN(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vN(e,r):new EN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(to(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends Jv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return Zv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zv(t){return t.op==="and"}function eE(t){return gN(t)&&Zv(t)}function gN(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Ad(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+no(t.value);if(eE(t))return t.filters.map(e=>Ad(e)).join(",");{const e=t.filters.map(n=>Ad(n)).join(",");return`${t.op}(${e})`}}function tE(t,e){return t instanceof tt?function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&wn(r.value,s.value)}(t,e):t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,i,c)=>o&&tE(i,s.filters[c]),!0):!1}(t,e):void ae()}function nE(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(nE).join(" ,")+"}"}(t):"Filter"}class yN extends tt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class vN extends tt{constructor(e,n){super(e,"in",n),this.keys=rE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EN extends tt{constructor(e,n){super(e,"not-in",n),this.keys=rE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class wN extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kh(n)&&Ci(n.arrayValue,this.value)}}class _N extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ci(this.value.arrayValue,n)}}class bN extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ci(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ci(this.value.arrayValue,n)}}class xN extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ci(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n=null,r=[],s=[],o=null,i=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=c,this.ue=null}}function hg(t,e=null,n=[],r=[],s=null,o=null,i=null){return new TN(t,e,n,r,s,o,i)}function Qh(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ad(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>no(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>no(r)).join(",")),e.ue=n}return e.ue}function Yh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dg(t.startAt,e.startAt)&&dg(t.endAt,e.endAt)}function Id(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n=null,r=[],s=[],o=null,i="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SN(t,e,n,r,s,o,i,c){return new uc(t,e,n,r,s,o,i,c)}function Jh(t){return new uc(t)}function mg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NN(t){return t.collectionGroup!==null}function oi(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let c=new ht(ut.comparator);return i.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vl(o,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new Vl(ut.keyField(),r))}return e.ce}function vn(t){const e=de(t);return e.le||(e.le=kN(e,oi(t))),e.le}function kN(t,e){if(t.limitType==="F")return hg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Vl(s.field,o)});const n=t.endAt?new Ol(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ol(t.startAt.position,t.startAt.inclusive):null;return hg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Pd(t,e,n){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dc(t,e){return Yh(vn(t),vn(e))&&t.limitType===e.limitType}function sE(t){return`${Qh(vn(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nE(s)).join(", ")}]`),cc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>no(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>no(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function hc(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of oi(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,c,u){const h=ug(i,c,u);return i.inclusive?h<=0:h<0}(r.startAt,oi(r),s)||r.endAt&&!function(i,c,u){const h=ug(i,c,u);return i.inclusive?h>=0:h>0}(r.endAt,oi(r),s))}(t,e)}function AN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oE(t){return(e,n)=>{let r=!1;for(const s of oi(t)){const o=IN(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function IN(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(o,i,c){const u=i.data.field(o),h=c.data.field(o);return u!==null&&h!==null?to(u,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Kv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new $e(se.comparator);function zn(){return PN}const iE=new $e(se.comparator);function Ho(...t){let e=iE;for(const n of t)e=e.insert(n.key,n);return e}function aE(t){let e=iE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return ii()}function lE(){return ii()}function ii(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const CN=new $e(se.comparator),RN=new ht(se.comparator);function we(...t){let e=RN;for(const n of t)e=e.add(n);return e}const LN=new ht(Ae);function DN(){return LN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function cE(t){return{integerValue:""+t}}function MN(t,e){return uN(e)?cE(e):Zh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this._=void 0}}function ON(t,e,n){return t instanceof Fl?function(s,o){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Gh(o)&&(o=Xh(o)),o&&(i.fields.__previous_value__=o),{mapValue:i}}(n,e):t instanceof Ri?dE(t,e):t instanceof Li?hE(t,e):function(s,o){const i=uE(s,o),c=fg(i)+fg(s.Pe);return kd(i)&&kd(s.Pe)?cE(c):Zh(s.serializer,c)}(t,e)}function VN(t,e,n){return t instanceof Ri?dE(t,e):t instanceof Li?hE(t,e):n}function uE(t,e){return t instanceof Ul?function(r){return kd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Fl extends mc{}class Ri extends mc{constructor(e){super(),this.elements=e}}function dE(t,e){const n=mE(e);for(const r of t.elements)n.some(s=>wn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Li extends mc{constructor(e){super(),this.elements=e}}function hE(t,e){let n=mE(e);for(const r of t.elements)n=n.filter(s=>!wn(s,r));return{arrayValue:{values:n}}}class Ul extends mc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function fg(t){return Qe(t.integerValue||t.doubleValue)}function mE(t){return Kh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function FN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ri&&s instanceof Ri||r instanceof Li&&s instanceof Li?eo(r.elements,s.elements,wn):r instanceof Ul&&s instanceof Ul?wn(r.Pe,s.Pe):r instanceof Fl&&s instanceof Fl}(t.transform,e.transform)}class UN{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function el(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fc{}function fE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gE(t.key,Dn.none()):new Gi(t.key,t.data,Dn.none());{const n=t.data,r=Gt.empty();let s=new ht(ut.comparator);for(let o of e.fields)if(!s.has(o)){let i=n.field(o);i===null&&o.length>1&&(o=o.popLast(),i=n.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new os(t.key,r,new sn(s.toArray()),Dn.none())}}function qN(t,e,n){t instanceof Gi?function(s,o,i){const c=s.value.clone(),u=gg(s.fieldTransforms,o,i.transformResults);c.setAll(u),o.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,o,i){if(!el(s.precondition,o))return void o.convertToUnknownDocument(i.version);const c=gg(s.fieldTransforms,o,i.transformResults),u=o.data;u.setAll(pE(s)),u.setAll(c),o.convertToFoundDocument(i.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ai(t,e,n,r){return t instanceof Gi?function(o,i,c,u){if(!el(o.precondition,i))return c;const h=o.value.clone(),p=yg(o.fieldTransforms,u,i);return h.setAll(p),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(o,i,c,u){if(!el(o.precondition,i))return c;const h=yg(o.fieldTransforms,u,i),p=i.data;return p.setAll(pE(o)),p.setAll(h),i.convertToFoundDocument(i.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,i,c){return el(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):c}(t,e,n)}function BN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=uE(r.transform,s||null);o!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,o))}return n||null}function pg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&eo(r,s,(o,i)=>FN(o,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gi extends fc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends fc{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gg(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],i=o.transform,c=e.data.field(o.field);r.set(o.field,VN(i,c,n[s]))}return r}function yg(t,e,n){const r=new Map;for(const s of t){const o=s.transform,i=n.data.field(s.field);r.set(s.field,ON(o,i,e))}return r}class gE extends fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zN extends fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qN(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ai(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ai(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lE();return this.mutations.forEach(s=>{const o=e.get(s.key),i=o.overlayedDocument;let c=this.applyToLocalView(i,o.mutatedFields);c=n.has(s.key)?null:c;const u=fE(i,c);u!==null&&r.set(s.key,u),i.isValidDocument()||i.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(n,r)=>pg(n,r))&&eo(this.baseMutations,e.baseMutations,(n,r)=>pg(n,r))}}class em{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return CN}();const o=e.mutations;for(let i=0;i<o.length;i++)s=s.insert(o[i].key,r[i].version);return new em(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,xe;function $N(t){switch(t){default:return ae();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function yE(t){if(t===void 0)return Bn("GRPC error has no .code"),H.UNKNOWN;switch(t){case Je.OK:return H.OK;case Je.CANCELLED:return H.CANCELLED;case Je.UNKNOWN:return H.UNKNOWN;case Je.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Je.INTERNAL:return H.INTERNAL;case Je.UNAVAILABLE:return H.UNAVAILABLE;case Je.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Je.NOT_FOUND:return H.NOT_FOUND;case Je.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Je.ABORTED:return H.ABORTED;case Je.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Je.DATA_LOSS:return H.DATA_LOSS;default:return ae()}}(xe=Je||(Je={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new jr([4294967295,4294967295],0);function vg(t){const e=GN().encode(t),n=new Bv;return n.update(e),new Uint8Array(n.digest())}function Eg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([n,r],0),new jr([s,o],0)]}class tm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(jr.fromNumber(r)));return s.compare(XN)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=vg(e),[r,s]=Eg(n);for(let o=0;o<this.hashCount;o++){const i=this.Ee(r,s,o);if(!this.de(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new tm(o,s,n);return r.forEach(c=>i.insert(c)),i}insert(e){if(this.Ie===0)return;const n=vg(e),[r,s]=Eg(n);for(let o=0;o<this.hashCount;o++){const i=this.Ee(r,s,o);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pc(ue.min(),s,new $e(Ae),zn(),we())}}class Xi{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xi(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class vE{constructor(e,n){this.targetId=e,this.me=n}}class EE{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class wg{constructor(){this.fe=0,this.ge=bg(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new Xi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KN{constructor(e){this.Le=e,this.Be=new Map,this.ke=zn(),this.qe=_g(),this.Qe=new $e(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const o=s.target;if(Id(o))if(r===0){const i=new se(o.path);this.Ue(n,i,xt.newNoDocument(i,ue.min()))}else Re(r===1);else{const i=this.Ye(n);if(i!==r){const c=this.Ze(e),u=c?this.Xe(c,e,i):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let i,c;try{i=Zr(r).toUint8Array()}catch(u){if(u instanceof Qv)return Zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new tm(i,s,o)}catch(u){return Zs(u instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const i=this.Le.tt(),c=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,i)=>{const c=this.Je(i);if(c){if(o.current&&Id(c.target)){const u=new se(c.target.path);this.ke.get(u)!==null||this.it(i,u)||this.Ue(i,u,xt.newNoDocument(u,e))}o.be&&(n.set(i,o.ve()),o.Ce())}});let r=we();this.qe.forEach((o,i)=>{let c=!0;i.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,i)=>i.setReadTime(e));const s=new pc(e,n,this.Qe,this.ke,r);return this.ke=zn(),this.qe=_g(),this.Qe=new $e(Ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new wg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ht(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _g(){return new $e(se.comparator)}function bg(){return new $e(se.comparator)}const QN={asc:"ASCENDING",desc:"DESCENDING"},YN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JN={and:"AND",or:"OR"};class ZN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cd(t,e){return t.useProto3Json||cc(e)?e:{value:e}}function ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ek(t,e){return ql(t,e.toTimestamp())}function En(t){return Re(!!t),ue.fromTimestamp(function(n){const r=xr(n);return new rt(r.seconds,r.nanos)}(t))}function nm(t,e){return Rd(t,e).canonicalString()}function Rd(t,e){const n=function(s){return new qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _E(t){const e=qe.fromString(t);return Re(NE(e)),e}function Ld(t,e){return nm(t.databaseId,e.path)}function Eu(t,e){const n=_E(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(xE(n))}function bE(t,e){return nm(t.databaseId,e)}function tk(t){const e=_E(t);return e.length===4?qe.emptyPath():xE(e)}function Dd(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xE(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function xg(t,e,n){return{name:Ld(t,e),fields:n.value.mapValue.fields}}function nk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(Re(p===void 0||typeof p=="string"),ft.fromBase64String(p||"")):(Re(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ft.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,c=i&&function(h){const p=h.code===void 0?H.UNKNOWN:yE(h.code);return new ne(p,h.message||"")}(i);n=new EE(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Eu(t,r.document.name),o=En(r.document.updateTime),i=r.document.createTime?En(r.document.createTime):ue.min(),c=new Gt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(s,o,i,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new tl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Eu(t,r.document),o=r.readTime?En(r.readTime):ue.min(),i=xt.newNoDocument(s,o),c=r.removedTargetIds||[];n=new tl([],c,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Eu(t,r.document),o=r.removedTargetIds||[];n=new tl([],o,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new HN(s,o),c=r.targetId;n=new vE(c,i)}}return n}function rk(t,e){let n;if(e instanceof Gi)n={update:xg(t,e.key,e.value)};else if(e instanceof gE)n={delete:Ld(t,e.key)};else if(e instanceof os)n={update:xg(t,e.key,e.data),updateMask:hk(e.fieldMask)};else{if(!(e instanceof zN))return ae();n={verify:Ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,i){const c=i.transform;if(c instanceof Fl)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ri)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Li)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ul)return{fieldPath:i.field.canonicalString(),increment:c.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:ek(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(t,e.precondition)),n}function sk(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,o){let i=s.updateTime?En(s.updateTime):En(o);return i.isEqual(ue.min())&&(i=En(o)),new UN(i,s.transformResults||[])}(n,e))):[]}function ok(t,e){return{documents:[bE(t,e.path)]}}function ik(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bE(t,s);const o=function(h){if(h.length!==0)return SE(_n.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const i=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:ws(_.field),direction:ck(_.dir)}}(p))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const c=Cd(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function ak(t){let e=tk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const _=TE(y);return _ instanceof _n&&eE(_)?_.getFilters():[_]}(n.where));let i=[];n.orderBy&&(i=function(y){return y.map(_=>function(L){return new Vl(_s(L.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(y){let _;return _=typeof y=="object"?y.value:y,cc(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,I=y.values||[];return new Ol(I,_)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const _=!y.before,I=y.values||[];return new Ol(I,_)}(n.endAt)),SN(e,s,i,o,c,"F",u,h)}function lk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_s(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_s(n.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_s(n.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=_s(n.unaryFilter.field);return tt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(_s(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>TE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function ck(t){return QN[t]}function uk(t){return YN[t]}function dk(t){return JN[t]}function ws(t){return{fieldPath:t.canonicalString()}}function _s(t){return ut.fromServerFormat(t.fieldPath)}function SE(t){return t instanceof tt?function(n){if(n.op==="=="){if(cg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(lg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(lg(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:uk(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(s=>SE(s));return r.length===1?r[0]:{compositeFilter:{op:dk(n.op),filters:r}}}(t):ae()}function hk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,o=ue.min(),i=ue.min(),c=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.ct=e}}function fk(t){const e=ak({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.un=new gk}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(br.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class gk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ht(qe.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ro(0)}static kn(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ai(r.mutation,s,sn.empty(),rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const s=qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let i=Ho();return o.forEach((c,u)=>{i=i.insert(c,u.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((i,c)=>{n.set(i,c)})})}computeViews(e,n,r,s){let o=zn();const i=ii(),c=function(){return ii()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof os)?o=o.insert(h.key,h):p!==void 0?(i.set(h.key,p.mutation.getFieldMask()),ai(p.mutation,h,p.mutation.getFieldMask(),rt.now())):i.set(h.key,sn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((h,p)=>i.set(h,p)),n.forEach((h,p)=>{var y;return c.set(h,new vk(p,(y=i.get(h))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ii();let s=new $e((i,c)=>i-c),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const c of i)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||sn.empty();p=c.applyToLocalView(h,p),r.set(u,p);const y=(s.get(c.batchId)||we()).add(u);s=s.insert(c.batchId,y)})}).next(()=>{const i=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,y=lE();p.forEach(_=>{if(!o.has(_)){const I=fE(n.get(_),r.get(_));I!==null&&y.set(_,I),o=o.add(_)}}),i.push(this.documentOverlayCache.saveOverlays(e,h,y))}return $.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return se.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):$.resolve(qr());let c=-1,u=o;return i.next(h=>$.forEach(h,(p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,u,h,we())).next(p=>({batchId:c,changes:aE(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=Ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let i=Ho();return this.indexManager.getCollectionParents(e,o).next(c=>$.forEach(c,u=>{const h=function(y,_){return new uc(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((y,_)=>{i=i.insert(y,_)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(i=>{o.forEach((u,h)=>{const p=h.getKey();i.get(p)===null&&(i=i.insert(p,xt.newInvalidDocument(p)))});let c=Ho();return i.forEach((u,h)=>{const p=o.get(u);p!==void 0&&ai(p.mutation,h,sn.empty(),rt.now()),hc(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:fk(s.bundledQuery),readTime:En(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.overlays=new $e(se.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return $.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.ht(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=qr(),o=n.length+1,i=new se(n.child("")),c=this.overlays.getIteratorFrom(i);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new $e((h,p)=>h-p);const i=this.overlays.getIterator();for(;i.hasNext();){const h=i.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=o.get(h.largestBatchId);p===null&&(p=qr(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=qr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return $.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new WN(n,r));let o=this.Ir.get(n);o===void 0&&(o=we(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Tr=new ht(st.Er),this.dr=new ht(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new st(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new qe([])),r=new st(n,e),s=new st(n,e+1),o=[];return this.dr.forEachInRange([r,s],i=>{this.Vr(i),o.push(i.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new qe([])),r=new st(n,e),s=new st(n,e+1);let o=we();return this.dr.forEachInRange([r,s],i=>{o=o.add(i.key)}),o}containsKey(e){const n=new st(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(st.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new jN(o,n,r,s);this.mutationQueue.push(i);for(const c of s)this.br=this.br.add(new st(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(i)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],i=>{const c=this.Dr(i.wr);o.push(c)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(Ae);return n.forEach(s=>{const o=new st(s,0),i=new st(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,i],c=>{r=r.add(c.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;se.isDocumentKey(o)||(o=o.child(""));const i=new st(new se(o),0);let c=new ht(Ae);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.wr)),!0)},i),$.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const o=new st(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new st(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.Mr=e,this.docs=function(){return new $e(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():xt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=zn();const i=n.path,c=new se(i.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!i.isPrefixOf(h.path))break;h.path.length>i.length+1||iN(oN(p),r)<=0||(s.has(p.key)||hc(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Sk(this)}getSize(e){return $.resolve(this.size)}}class Sk extends yk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.persistence=e,this.Nr=new fo(n=>Qh(n),Yh),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rm,this.targetCount=0,this.kr=ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Nr.forEach((i,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),$.waitFor(o).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(i=>{o.push(s.markPotentiallyOrphaned(e,i))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $h(0),this.Kr=!1,this.Kr=!0,this.$r=new bk,this.referenceDelegate=e(this),this.Ur=new Nk(this),this.indexManager=new pk,this.remoteDocumentCache=function(s){return new Tk(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mk(n),this.Gr=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new Ak(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ak extends lN{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.Jr=new rm,this.Yr=null}static Zr(e){return new sm(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(o=>{o||n.removeEntry(s,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=we(),s=we();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new om(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wx()?8:cN(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.Yi(e,n).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.Zi(e,n,s,r).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new Ik;return this.Xi(e,n,i).next(c=>{if(o.result=c,this.zi)return this.es(e,n,i,c.size)})}).next(()=>o.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Vo()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Vo()<=_e.DEBUG&&J("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Vo()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):$.resolve())}Yi(e,n){if(mg(n))return $.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Pd(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const i=we(...o);return this.Ji.getDocuments(e,i).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,i,u.readTime)?this.Yi(e,Pd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return mg(n)||s.isEqual(ue.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const i=this.ts(n,o);return this.ns(n,i,r,s)?$.resolve(null):(Vo()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.rs(e,i,n,sN(s,-1)).next(c=>c))})}ts(e,n){let r=new ht(oE(e));return n.forEach((s,o)=>{hc(e,o)&&(r=r.add(o))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,r){return Vo()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new $e(Ae),this._s=new fo(o=>Qh(o),Yh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ek(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Rk(t,e,n,r){return new Ck(t,e,n,r)}async function kE(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const i=[],c=[];let u=we();for(const h of s){i.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of o){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:i,addedBatchIds:c}))})})}function Lk(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const y=h.batch,_=y.keys();let I=$.resolve();return _.forEach(L=>{I=I.next(()=>p.getEntry(u,L)).next(M=>{const F=h.docVersions.get(L);Re(F!==null),M.version.compareTo(F)<0&&(y.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),p.addEntry(M)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=we();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function AE(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Dk(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,y)=>{const _=s.get(y);if(!_)return;c.push(n.Ur.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,p.addedDocuments,y)));let I=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(ft.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(y,I),function(M,F,N){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(_,I,p)&&c.push(n.Ur.updateTargetData(o,I))});let u=zn(),h=we();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(Mk(o,i,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ue.min())){const p=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return $.waitFor(c).next(()=>i.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.os=s,o))}function Mk(t,e,n){let r=we(),s=we();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let i=zn();return n.forEach((c,u)=>{const h=o.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(c,u.readTime),i=i.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),i=i.insert(c,u)):J("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:i,Is:s}})}function Ok(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vk(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(o=>o?(s=o,$.resolve(s)):n.Ur.allocateTargetId(r).next(i=>(s=new ar(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Md(t,e,n){const r=de(t),s=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!$i(i))throw i;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Tg(t,e,n){const r=de(t);let s=ue.min(),o=we();return r.persistence.runTransaction("Execute query","readwrite",i=>function(u,h,p){const y=de(u),_=y._s.get(p);return _!==void 0?$.resolve(y.os.get(_)):y.Ur.getTargetData(h,p)}(r,i,vn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?s:ue.min(),n?o:we())).next(c=>(Fk(r,AN(e),c),{documents:c,Ts:o})))}function Fk(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Sg{constructor(){this.activeTargetIds=DN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uk{constructor(){this.so=new Sg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da=null;function wu(){return Da===null?Da=function(){return 268435456+Math.round(2147483648*Math.random())}():Da++,"0x"+Da.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class jk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,r,s,o,i){const c=wu(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,o,i),this.No(n,u,h,s).then(p=>(J("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Zs("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,o,i,c){return this.Mo(n,r,s,o,i)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,i)=>n[i]=o),s&&s.headers.forEach((o,i)=>n[i]=o)}xo(n,r){const s=Bk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const o=wu();return new Promise((i,c)=>{const u=new zv;u.setWithCredentials(!0),u.listenOnce(jv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ja.NO_ERROR:const p=u.getResponseJson();J(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),i(p);break;case Ja.TIMEOUT:J(wt,`RPC '${e}' ${o} timed out`),c(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:const y=u.getStatus();if(J(wt,`RPC '${e}' ${o} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const L=function(F){const N=F.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(N)>=0?N:H.UNKNOWN}(I.status);c(new ne(L,I.message))}else c(new ne(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ne(H.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);J(wt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=wu(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=$v(),c=Hv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=o.join("");J(wt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const y=i.createWebChannel(p,u);let _=!1,I=!1;const L=new zk({Io:F=>{I?J(wt,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(_||(J(wt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),_=!0),J(wt,`RPC '${e}' stream ${s} sending:`,F),y.send(F))},To:()=>y.close()}),M=(F,N,S)=>{F.listen(N,k=>{try{S(k)}catch(D){setTimeout(()=>{throw D},0)}})};return M(y,Wo.EventType.OPEN,()=>{I||(J(wt,`RPC '${e}' stream ${s} transport opened.`),L.yo())}),M(y,Wo.EventType.CLOSE,()=>{I||(I=!0,J(wt,`RPC '${e}' stream ${s} transport closed`),L.So())}),M(y,Wo.EventType.ERROR,F=>{I||(I=!0,Zs(wt,`RPC '${e}' stream ${s} transport errored:`,F),L.So(new ne(H.UNAVAILABLE,"The operation could not be completed")))}),M(y,Wo.EventType.MESSAGE,F=>{var N;if(!I){const S=F.data[0];Re(!!S);const k=S,D=k.error||((N=k[0])===null||N===void 0?void 0:N.error);if(D){J(wt,`RPC '${e}' stream ${s} received error:`,D);const q=D.status;let z=function(E){const x=Je[E];if(x!==void 0)return yE(x)}(q),b=D.message;z===void 0&&(z=H.INTERNAL,b="Unknown error status: "+q+" with message "+D.message),I=!0,L.So(new ne(z,b)),y.close()}else J(wt,`RPC '${e}' stream ${s} received:`,S),L.bo(S)}}),M(c,Wv.STAT_EVENT,F=>{F.stat===Sd.PROXY?J(wt,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Sd.NOPROXY&&J(wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function _u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){return new ZN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,s,o,i,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new IE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ne(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wk extends PE{constructor(e,n,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=nk(this.serializer,e),r=function(o){if(!("targetChange"in o))return ue.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?ue.min():i.readTime?En(i.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Dd(this.serializer),n.addTarget=function(o,i){let c;const u=i.target;if(c=Id(u)?{documents:ok(o,u)}:{query:ik(o,u)._t},c.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){c.resumeToken=wE(o,i.resumeToken);const h=Cd(o,i.expectedCount);h!==null&&(c.expectedCount=h)}else if(i.snapshotVersion.compareTo(ue.min())>0){c.readTime=ql(o,i.snapshotVersion.toTimestamp());const h=Cd(o,i.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=lk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Dd(this.serializer),n.removeTarget=e,this.a_(n)}}class Hk extends PE{constructor(e,n,r,s,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sk(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Dd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.Mo(e,Rd(n,r),s,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(H.UNKNOWN,o.toString())})}Lo(e,n,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,c])=>this.connection.Lo(e,Rd(n,r),s,i,c,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(H.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Gk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bn(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(i=>{r.enqueueAndForget(async()=>{is(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=de(u);h.L_.add(4),await Ki(h),h.q_.set("Unknown"),h.L_.delete(4),await yc(h)}(this))})}),this.q_=new Gk(r,s)}}async function yc(t){if(is(t))for(const e of t.B_)await e(!0)}async function Ki(t){for(const e of t.B_)await e(!1)}function CE(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cm(n)?lm(n):po(n).r_()&&am(n,e))}function im(t,e){const n=de(t),r=po(n);n.N_.delete(e),r.r_()&&RE(n,e),n.N_.size===0&&(r.r_()?r.o_():is(n)&&n.q_.set("Unknown"))}function am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function RE(t,e){t.Q_.xe(e),po(t).R_(e)}function lm(t){t.Q_=new KN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function cm(t){return is(t)&&!po(t).n_()&&t.N_.size>0}function is(t){return de(t).L_.size===0}function LE(t){t.Q_=void 0}async function Kk(t){t.q_.set("Online")}async function Qk(t){t.N_.forEach((e,n)=>{am(t,e)})}async function Yk(t,e){LE(t),cm(t)?(t.q_.M_(e),lm(t)):t.q_.set("Unknown")}async function Jk(t,e,n){if(t.q_.set("Online"),e instanceof EE&&e.state===2&&e.cause)try{await async function(s,o){const i=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,i),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bl(t,r)}else if(e instanceof tl?t.Q_.Ke(e):e instanceof vE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await AE(t.localStore);n.compareTo(r)>=0&&await function(o,i){const c=o.Q_.rt(i);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=o.N_.get(h);p&&o.N_.set(h,p.withResumeToken(u.resumeToken,i))}}),c.targetMismatches.forEach((u,h)=>{const p=o.N_.get(u);if(!p)return;o.N_.set(u,p.withResumeToken(ft.EMPTY_BYTE_STRING,p.snapshotVersion)),RE(o,u);const y=new ar(p.target,u,h,p.sequenceNumber);am(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Bl(t,r)}}async function Bl(t,e,n){if(!$i(e))throw e;t.L_.add(1),await Ki(t),t.q_.set("Offline"),n||(n=()=>AE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yc(t)})}function DE(t,e){return e().catch(n=>Bl(t,n,e))}async function vc(t){const e=de(t),n=Tr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zk(e);)try{const s=await Ok(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,eA(e,s)}catch(s){await Bl(e,s)}ME(e)&&OE(e)}function Zk(t){return is(t)&&t.O_.length<10}function eA(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ME(t){return is(t)&&!Tr(t).n_()&&t.O_.length>0}function OE(t){Tr(t).start()}async function tA(t){Tr(t).p_()}async function nA(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function rA(t,e,n){const r=t.O_.shift(),s=em.from(r,e,n);await DE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vc(t)}async function sA(t,e){e&&Tr(t).V_&&await async function(r,s){if(function(i){return $N(i)&&i!==H.ABORTED}(s.code)){const o=r.O_.shift();Tr(r).s_(),await DE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await vc(r)}}(t,e),ME(t)&&OE(t)}async function kg(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=is(n);n.L_.add(3),await Ki(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yc(n)}async function oA(t,e){const n=de(t);e?(n.L_.delete(2),await yc(n)):e||(n.L_.add(2),await Ki(n),n.q_.set("Unknown"))}function po(t){return t.K_||(t.K_=function(n,r,s){const o=de(n);return o.w_(),new Wk(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Kk.bind(null,t),Ro:Qk.bind(null,t),mo:Yk.bind(null,t),d_:Jk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cm(t)?lm(t):t.q_.set("Unknown")):(await t.K_.stop(),LE(t))})),t.K_}function Tr(t){return t.U_||(t.U_=function(n,r,s){const o=de(n);return o.w_(),new Hk(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tA.bind(null,t),mo:sA.bind(null,t),f_:nA.bind(null,t),g_:rA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vc(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const i=Date.now()+r,c=new um(e,n,i,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dm(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),$i(t))return new ne(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.W_=new $e(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class so{constructor(e,n,r,s,o,i,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const i=[];return n.forEach(c=>{i.push({type:0,doc:c})}),new so(e,n,Ws.emptySet(n),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class aA{constructor(){this.queries=Ig(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),o=s.queries;s.queries=Ig(),o.forEach((i,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ne(H.ABORTED,"Firestore shutting down"))}}function Ig(){return new fo(t=>sE(t),dc)}async function VE(t,e){const n=de(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new iA,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const c=dm(i,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&hm(n)}async function FE(t,e){const n=de(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const i=o.j_.indexOf(e);i>=0&&(o.j_.splice(i,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lA(t,e){const n=de(t);let r=!1;for(const s of e){const o=s.query,i=n.queries.get(o);if(i){for(const c of i.j_)c.X_(s)&&(r=!0);i.z_=s}}r&&hm(n)}function cA(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(n);r.queries.delete(e)}function hm(t){t.Y_.forEach(e=>{e.next()})}var Od,Pg;(Pg=Od||(Od={})).ea="default",Pg.Cache="cache";class UE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new so(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class uA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=oE(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ag,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,i=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const _=s.get(p),I=hc(this.query,y)?y:null,L=!!_&&this.mutatedKeys.has(_.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;_&&I?_.data.isEqual(I.data)?L!==M&&(r.track({type:3,doc:I}),F=!0):this.ga(_,I)||(r.track({type:2,doc:I}),F=!0,(u&&this.Aa(I,u)>0||h&&this.Aa(I,h)<0)&&(c=!0)):!_&&I?(r.track({type:0,doc:I}),F=!0):_&&!I&&(r.track({type:1,doc:_}),F=!0,(u||h)&&(c=!0)),F&&(I?(i=i.add(I),o=M?o.add(p):o.delete(p)):(i=i.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const p=this.query.limitType==="F"?i.last():i.first();i=i.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Ra:i,fa:r,ns:c,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((p,y)=>function(I,L){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return M(I)-M(L)}(p.type,y.type)||this.Aa(p.doc,y.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,i.length!==0||h?{snapshot:new so(this.query,e.Ra,o,i,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ag,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new BE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new qE(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return so.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hA{constructor(e){this.key=e,this.va=!1}}class mA{constructor(e,n,r,s,o,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new fo(c=>sE(c),dc),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(se.comparator),this.Na=new Map,this.La=new rm,this.Ba={},this.ka=new Map,this.qa=ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fA(t,e,n=!0){const r=GE(t);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await zE(r,e,n,!0),s}async function pA(t,e){const n=GE(t);await zE(n,e,!0,!1)}async function zE(t,e,n,r){const s=await Vk(t.localStore,vn(e)),o=s.targetId,i=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await gA(t,e,o,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&CE(t.remoteStore,s),c}async function gA(t,e,n,r,s){t.Ka=(y,_,I)=>async function(M,F,N,S){let k=F.view.ma(N);k.ns&&(k=await Tg(M.localStore,F.query,!1).then(({documents:b})=>F.view.ma(b,k)));const D=S&&S.targetChanges.get(F.targetId),q=S&&S.targetMismatches.get(F.targetId)!=null,z=F.view.applyChanges(k,M.isPrimaryClient,D,q);return Rg(M,F.targetId,z.wa),z.snapshot}(t,y,_,I);const o=await Tg(t.localStore,e,!0),i=new uA(e,o.Ts),c=i.ma(o.documents),u=Xi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=i.applyChanges(c,t.isPrimaryClient,u);Rg(t,n,h.wa);const p=new dA(e,n,i);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function yA(t,e,n){const r=de(t),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter(i=>!dc(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Md(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&im(r.remoteStore,s.targetId),Vd(r,s.targetId)}).catch(Hi)):(Vd(r,s.targetId),await Md(r.localStore,s.targetId,!0))}async function vA(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),im(n.remoteStore,r.targetId))}async function EA(t,e,n){const r=NA(t);try{const s=await function(i,c){const u=de(i),h=rt.now(),p=c.reduce((I,L)=>I.add(L.key),we());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let L=zn(),M=we();return u.cs.getEntries(I,p).next(F=>{L=F,L.forEach((N,S)=>{S.isValidDocument()||(M=M.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,L)).next(F=>{y=F;const N=[];for(const S of c){const k=BN(S,y.get(S.key).overlayedDocument);k!=null&&N.push(new os(S.key,k,Yv(k.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,h,N,c)}).next(F=>{_=F;const N=F.applyToLocalDocumentSet(y,M);return u.documentOverlayCache.saveOverlays(I,F.batchId,N)})}).then(()=>({batchId:_.batchId,changes:aE(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,c,u){let h=i.Ba[i.currentUser.toKey()];h||(h=new $e(Ae)),h=h.insert(c,u),i.Ba[i.currentUser.toKey()]=h}(r,s.batchId,n),await Qi(r,s.changes),await vc(r.remoteStore)}catch(s){const o=dm(s,"Failed to persist write");n.reject(o)}}async function jE(t,e){const n=de(t);try{const r=await Dk(n.localStore,e);e.targetChanges.forEach((s,o)=>{const i=n.Na.get(o);i&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Re(i.va):s.removedDocuments.size>0&&(Re(i.va),i.va=!1))}),await Qi(n,r,e)}catch(r){await Hi(r)}}function Cg(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((o,i)=>{const c=i.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(i,c){const u=de(i);u.onlineState=c;let h=!1;u.queries.forEach((p,y)=>{for(const _ of y.j_)_.Z_(c)&&(h=!0)}),h&&hm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wA(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),o=s&&s.key;if(o){let i=new $e(se.comparator);i=i.insert(o,xt.newNoDocument(o,ue.min()));const c=we().add(o),u=new pc(ue.min(),new Map,new $e(Ae),i,c);await jE(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),mm(r)}else await Md(r.localStore,e,!1).then(()=>Vd(r,e,n)).catch(Hi)}async function _A(t,e){const n=de(t),r=e.batch.batchId;try{const s=await Lk(n.localStore,e);HE(n,r,null),WE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qi(n,s)}catch(s){await Hi(s)}}async function bA(t,e,n){const r=de(t);try{const s=await function(i,c){const u=de(i);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(y=>(Re(y!==null),p=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);HE(r,e,n),WE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qi(r,s)}catch(s){await Hi(s)}}function WE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function HE(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Vd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$E(t,r)})}function $E(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(im(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mm(t))}function Rg(t,e,n){for(const r of n)r instanceof qE?(t.La.addReference(r.key,e),xA(t,r)):r instanceof BE?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$E(t,r.key)):ae()}function xA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),mm(t))}function mm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new hA(n)),t.Oa=t.Oa.insert(n,r),CE(t.remoteStore,new ar(vn(Jh(n.path)),r,"TargetPurposeLimboResolution",$h.oe))}}async function Qi(t,e,n){const r=de(t),s=[],o=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{i.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){s.push(h);const y=om.Wi(u.targetId,h);o.push(y)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(u,h){const p=de(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>$.forEach(h,_=>$.forEach(_.$i,I=>p.persistence.referenceDelegate.addReference(y,_.targetId,I)).next(()=>$.forEach(_.Ui,I=>p.persistence.referenceDelegate.removeReference(y,_.targetId,I)))))}catch(y){if(!$i(y))throw y;J("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const _=y.targetId;if(!y.fromCache){const I=p.os.get(_),L=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(L);p.os=p.os.insert(_,M)}}}(r.localStore,o))}async function TA(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await kE(n.localStore,e);n.currentUser=e,function(o,i){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new ne(H.CANCELLED,i))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qi(n,r.hs)}}function SA(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let s=we();const o=n.Ma.get(e);if(!o)return s;for(const i of o){const c=n.Fa.get(i);s=s.unionWith(c.view.Va)}return s}}function GE(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wA.bind(null,e),e.Ca.d_=lA.bind(null,e.eventManager),e.Ca.$a=cA.bind(null,e.eventManager),e}function NA(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_A.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bA.bind(null,e),e}class zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Rk(this.persistence,new Pk,e.initialUser,this.serializer)}Ga(e){return new kk(sm.Zr,this.serializer)}Wa(e){return new Uk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zl.provider={build:()=>new zl};class Fd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TA.bind(null,this.syncEngine),await oA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aA}()}createDatastore(e){const n=gc(e.databaseInfo.databaseId),r=function(o){return new jk(o)}(e.databaseInfo);return function(o,i,c,u){return new $k(o,i,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,i,c){return new Xk(r,s,o,i,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Cg(this.syncEngine,n,0),function(){return Ng.D()?new Ng:new qk}())}createSyncEngine(e,n){return function(s,o,i,c,u,h,p){const y=new mA(s,o,i,c,u,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=de(s);J("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Ki(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=Xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bu(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AA(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>kg(e.remoteStore,s)),t._onlineComponents=e}async function AA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await bu(t,new zl)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await bu(t,new zl);return t._offlineComponents}async function KE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Lg(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Lg(t,new Fd))),t._onlineComponents}function IA(t){return KE(t).then(e=>e.syncEngine)}async function QE(t){const e=await KE(t),n=e.eventManager;return n.onListen=fA.bind(null,e.syncEngine),n.onUnlisten=yA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vA.bind(null,e.syncEngine),n}function PA(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,c,u,h){const p=new XE({next:_=>{p.Za(),i.enqueueAndForget(()=>FE(o,y));const I=_.docs.has(c);!I&&_.fromCache?h.reject(new ne(H.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&u&&u.source==="server"?h.reject(new ne(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),y=new UE(Jh(c.path),p,{includeMetadataChanges:!0,_a:!0});return VE(o,y)}(await QE(t),t.asyncQueue,e,n,r)),r.promise}function CA(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,c,u,h){const p=new XE({next:_=>{p.Za(),i.enqueueAndForget(()=>FE(o,y)),_.fromCache&&u.source==="server"?h.reject(new ne(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),y=new UE(c,p,{includeMetadataChanges:!0,_a:!0});return VE(o,y)}(await QE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t,e,n){if(!n)throw new ne(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RA(t,e,n,r){if(e===!0&&r===!0)throw new ne(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mg(t){if(!se.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Og(t){if(se.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fm(t);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KS;switch(r.type){case"firstParty":return new ZS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dg.get(n);r&&(J("ComponentProvider","Removing Datastore"),Dg.delete(n),r.terminate())}(this),Promise.resolve()}}function LA(t,e,n,r={}){var s;const o=(t=ts(t,Ec))._getSettings(),i=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==i&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:i,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=_t.MOCK_USER;else{c=mx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _t(h)}t._authCredentials=new QS(new Gv(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Er extends wc{constructor(e,n,r){super(e,n,Jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new se(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function DA(t,e,...n){if(t=Jt(t),JE("collection","path",e),t instanceof Ec){const r=qe.fromString(e,...n);return Og(r),new Er(t,null,r)}{if(!(t instanceof Bt||t instanceof Er))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Og(r),new Er(t.firestore,null,r)}}function ye(t,e,...n){if(t=Jt(t),arguments.length===1&&(e=Xv.newId()),JE("doc","path",e),t instanceof Ec){const r=qe.fromString(e,...n);return Mg(r),new Bt(t,null,new se(r))}{if(!(t instanceof Bt||t instanceof Er))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Mg(r),new Bt(t.firestore,t instanceof Er?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new IE(this,"async_queue_retry"),this.Vu=()=>{const r=_u();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=_u();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=_u();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ln;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$i(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let c=i.message||"";return i.stack&&(c=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),c}(r);throw Bn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=um.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class _c extends Ec{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Fg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fg(e),this._firestoreClient=void 0,await e}}}function MA(t,e){const n=typeof t=="object"?t:sv(),r=typeof t=="string"?t:"(default)",s=Mh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=dx("firestore");o&&LA(s,...o)}return s}function pm(t){if(t._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OA(t),t._firestoreClient}function OA(t){var e,n,r;const s=t._freezeSettings(),o=function(c,u,h,p){return new hN(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,YE(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new kA(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oo(ft.fromBase64String(e))}catch(n){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oo(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class FA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gi(e,this.data,n,this.fieldTransforms)}}function ew(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Em{constructor(e,n,r,s,o,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Em(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ew(this.Cu)&&VA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gc(e)}Qu(e,n,r,s=!1){return new Em({Cu:e,methodName:n,qu:r,path:ut.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qA(t){const e=t._freezeSettings(),n=gc(t._databaseId);return new UA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BA(t,e,n,r,s,o={}){const i=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);sw("Data must be an object, but it was:",i,r);const c=nw(r,i);let u,h;if(o.merge)u=new sn(i.fieldMask),h=i.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const _=zA(e,y,n);if(!i.contains(_))throw new ne(H.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);WA(p,_)||p.push(_)}u=new sn(p),h=i.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=i.fieldTransforms;return new FA(new Gt(c),u,h)}function tw(t,e){if(rw(t=Jt(t)))return sw("Unsupported field value:",e,t),nw(t,e);if(t instanceof ZE)return function(r,s){if(!ew(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const o=[];let i=0;for(const c of r){let u=tw(c,s.Lu(i));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),i++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=rt.fromDate(r);return{timestampValue:ql(s.serializer,o)}}if(r instanceof rt){const o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ql(s.serializer,o)}}if(r instanceof ym)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:wE(s.serializer,r._byteString)};if(r instanceof Bt){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vm)return function(i,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Zh(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${fm(r)}`)}(t,e)}function nw(t,e){const n={};return Kv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(t,(r,s)=>{const o=tw(s,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function rw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof ym||t instanceof oo||t instanceof Bt||t instanceof ZE||t instanceof vm)}function sw(t,e,n){if(!rw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zA(t,e,n){if((e=Jt(e))instanceof gm)return e._internalPath;if(typeof e=="string")return ow(t,e);throw jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const jA=new RegExp("[~\\*/\\[\\]]");function ow(t,e,n){if(e.search(jA)>=0)throw jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gm(...e.split("."))._internalPath}catch{throw jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jl(t,e,n,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||i)&&(u+=" (found",o&&(u+=` in field ${r}`),i&&(u+=` in document ${s}`),u+=")"),new ne(H.INVALID_ARGUMENT,c+t+u)}function WA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HA extends iw{data(){return super.data()}}function aw(t,e){return typeof e=="string"?ow(t,e):e instanceof gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GA{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mo(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>Qe(i.doubleValue));return new vm(o)}convertGeoPoint(e){return new ym(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ii(e));default:return null}}convertTimestamp(e){const n=xr(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Re(NE(r));const s=new Pi(r.get(1),r.get(3)),o=new se(r.popFirst(5));return s.isEqual(n)||Bn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lw extends iw{constructor(e,n,r,s,o,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(aw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nl extends lw{data(e={}){return super.data(e)}}class KA{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Go(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nl(this._firestore,this._userDataWriter,r.key,r,new Go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(c=>{const u=new nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=i.indexOf(c.doc.key),i=i.delete(c.doc.key)),c.type!==1&&(i=i.add(c.doc),p=i.indexOf(c.doc.key)),{type:QA(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t){t=ts(t,Bt);const e=ts(t.firestore,_c);return PA(pm(e),t._key).then(n=>ZA(e,t,n))}class cw extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function YA(t){t=ts(t,wc);const e=ts(t.firestore,_c),n=pm(e),r=new cw(e);return $A(t._query),CA(n,t._query).then(s=>new KA(e,r,t,s))}function Hn(t,e,n){t=ts(t,Bt);const r=ts(t.firestore,_c),s=XA(t.converter,e,n);return JA(r,[BA(qA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dn.none())])}function JA(t,e){return function(r,s){const o=new Ln;return r.asyncQueue.enqueueAndForget(async()=>EA(await IA(r),s,o)),o.promise}(pm(t),e)}function ZA(t,e,n){const r=n.docs.get(e._key),s=new cw(t);return new lw(t,s,e._key,r,new Go(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ho=s})(co),Js(new Kr("firestore",(r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),c=new _c(new YS(r.getProvider("auth-internal")),new tN(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(h.options.projectId,p)}(i,s),i);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),vr(rg,"4.7.3",e),vr(rg,"4.7.3","esm2017")})();const e2={apiKey:"AIzaSyAcjNCDe3-Whc5LUcd9Xfyl68hVYcdz1GU",authDomain:"alex-english-academy-react.firebaseapp.com",projectId:"alex-english-academy-react",storageBucket:"alex-english-academy-react.firebasestorage.app",messagingSenderId:"166060472334",appId:"1:166060472334:web:5e12a5376efc73f192e45f"},uw=rv(e2),Ma=GS(uw),ge=MA(uw);function t2({onLoginSuccess:t,onNavigate:e}){const[n,r]=U.useState(!1),[s,o]=U.useState(!1),[i,c]=U.useState(!1),[u,h]=U.useState(""),[p,y]=U.useState(""),[_,I]=U.useState(""),[L,M]=U.useState(""),[F,N]=U.useState(""),[S,k]=U.useState(""),[D,q]=U.useState(!1),z=async g=>{var E;if(g.preventDefault(),N(""),k(""),q(!0),!u||!p){N("Por favor, preencha todos os campos"),q(!1);return}try{const x=ye(ge,"students",u),A=await Ee(x);if(!A.exists()){N("Usuário não encontrado. Contate o Professor Alex."),q(!1);return}const R=A.data();if(R.password!==p){N("Senha incorreta"),q(!1);return}const w=`${u}@student.alexacademy.com`;try{await $p(Ma,w,p)}catch(re){if(re.code==="auth/user-not-found")try{await DT(Ma,w,p)}catch(P){console.log("User creation error:",P)}}const Z={username:u,displayName:R.name||u,email:w,role:"student",uid:(E=Ma.currentUser)==null?void 0:E.uid};k("✅ Login realizado com sucesso!"),setTimeout(()=>{t(Z),q(!1)},1e3)}catch(x){console.error("Student Login Error:",x),N("Erro ao fazer login. Verifique suas credenciais."),q(!1)}},b=async g=>{if(g.preventDefault(),N(""),k(""),q(!0),!_||!L){N("Por favor, preencha todos os campos"),q(!1);return}try{const x=(await $p(Ma,_,L)).user,A=ye(ge,"teachers",x.uid),R=await Ee(A);let w;R.exists()?w=R.data():(w={email:_,displayName:"Professor Alex",userType:"teacher",createdAt:Date.now(),uid:x.uid},await Hn(A,w));const Z={email:_,displayName:w.displayName||"Professor Alex",role:"teacher",uid:x.uid};k("✅ Login de professor realizado com sucesso!"),setTimeout(()=>{t(Z),r(!1),q(!1)},1e3)}catch(E){console.error("Teacher Login Error:",E);let x="Email ou senha inválidos";E.code==="auth/user-not-found"?x="Professor não encontrado. Contate o administrador.":E.code==="auth/wrong-password"?x="Senha incorreta":E.code==="auth/invalid-email"?x="Email inválido":E.code==="auth/too-many-requests"&&(x="Muitas tentativas. Tente novamente mais tarde."),N(x),q(!1)}};return a.createElement("div",{className:"sophisticated-bg min-h-screen"},a.createElement("div",{className:"min-h-screen flex items-center justify-center p-4"},a.createElement("div",{className:"w-full max-w-md"},a.createElement("div",{className:"elegant-card rounded-3xl p-8 fade-in"},a.createElement("div",{className:"text-center mb-8"},a.createElement("div",{className:"w-20 h-20 logo-sophisticated rounded-full flex items-center justify-center mx-auto mb-6"},a.createElement("span",{className:"text-3xl font-bold text-white"},"A")),a.createElement("h1",{className:"text-2xl font-medium mb-1",style:{color:"var(--alex-blue)"}},"Teacher Alex"),a.createElement("h2",{className:"text-4xl font-bold mb-4",style:{color:"var(--academy-red)"}},"ENGLISH ACADEMY"),a.createElement("div",{className:"beta-badge text-white px-4 py-2 rounded-full text-sm font-semibold mb-5"},a.createElement("span",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),"FIREBASE AUTH"),a.createElement("h3",{className:"text-xl font-medium mb-2",style:{color:"var(--academy-red)"}},"Portal do Estudante"),a.createElement("p",{className:"text-base",style:{color:"var(--medium-gray)"}},"Autenticação segura via Firebase")),a.createElement("form",{onSubmit:z,className:"space-y-5"},a.createElement("div",null,a.createElement("label",{className:"block text-base font-medium mb-2",style:{color:"var(--charcoal)"}},"Nome de usuário"),a.createElement("input",{type:"text",placeholder:"Digite seu nome de usuário",value:u,onChange:g=>h(g.target.value),disabled:D,required:!0,className:"elegant-input"})),a.createElement("div",null,a.createElement("label",{className:"block text-base font-medium mb-2",style:{color:"var(--charcoal)"}},"Senha"),a.createElement("div",{className:"relative"},a.createElement("input",{type:s?"text":"password",placeholder:"Digite sua senha",value:p,onChange:g=>y(g.target.value),disabled:D,required:!0,className:"elegant-input pr-12"}),a.createElement("button",{type:"button",onClick:()=>o(!s),disabled:D,className:"absolute right-3 top-1/2 transform -translate-y-1/2 hover:opacity-75 transition-opacity",style:{background:"none",border:"none",fontSize:"18px",color:"var(--medium-gray)"}},s?"👁️":"👁️‍🗨️"))),a.createElement("button",{type:"submit",disabled:D,className:`btn-primary w-full text-white font-bold py-4 rounded-xl text-lg transition-all ${D?"opacity-50 cursor-not-allowed":"hover:transform hover:scale-105"}`},D?a.createElement("div",{className:"flex items-center justify-center"},a.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"AUTENTICANDO..."):"ACESSAR MINHAS AULAS")),a.createElement("div",{className:"text-center mt-8 pt-6",style:{borderTop:"1px solid var(--light-gray)"}},a.createElement("p",{className:"text-base mb-1",style:{color:"var(--medium-gray)"}},"Precisa de ajuda?"),a.createElement("p",{className:"text-base font-medium mb-6",style:{color:"var(--charcoal)"}},"Entre em contato com ",a.createElement("span",{style:{color:"var(--academy-red)"},className:"font-semibold"},"Professor Alex")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{className:"block w-full link-sophisticated text-base py-3 px-4 rounded-lg transition-all font-medium",style:{background:"none",border:"none"},disabled:D},"Esqueci minha senha"),a.createElement("button",{onClick:()=>r(!0),disabled:D,className:"block w-full link-muted text-sm py-3 px-4 rounded-lg hover:bg-gray-50 transition-all",style:{background:"none",border:"none"}},"🎓 Acesso para Professores"))),F&&a.createElement("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-base text-center font-medium"},F),S&&a.createElement("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-base text-center font-medium"},S)))),n&&a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"elegant-card rounded-2xl p-6 w-full max-w-sm"},a.createElement("h3",{className:"text-xl font-bold mb-6 text-center",style:{color:"var(--charcoal)"}},"🎓 Acesso Professor (Firebase)"),a.createElement("form",{onSubmit:b,className:"space-y-4"},a.createElement("input",{type:"email",placeholder:"Email do Professor",value:_,onChange:g=>I(g.target.value),disabled:D,required:!0,className:"elegant-input p-3 rounded-lg"}),a.createElement("div",{className:"relative"},a.createElement("input",{type:i?"text":"password",placeholder:"Senha",value:L,onChange:g=>M(g.target.value),disabled:D,required:!0,className:"elegant-input p-3 rounded-lg pr-12"}),a.createElement("button",{type:"button",onClick:()=>c(!i),disabled:D,className:"absolute right-3 top-1/2 transform -translate-y-1/2 hover:opacity-75 transition-opacity",style:{background:"none",border:"none",fontSize:"16px",color:"var(--medium-gray)"}},i?"👁️":"👁️‍🗨️")),a.createElement("button",{type:"submit",disabled:D,className:`btn-secondary w-full text-white font-semibold py-3 rounded-lg transition-all ${D?"opacity-50 cursor-not-allowed":"hover:transform hover:scale-105"}`},D?a.createElement("div",{className:"flex items-center justify-center"},a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Autenticando..."):"Acessar Dashboard")),a.createElement("button",{onClick:()=>r(!1),disabled:D,className:"w-full mt-4 text-sm py-2 transition-colors",style:{background:"none",border:"none",color:"var(--medium-gray)"}},"Fechar"))),a.createElement("style",{jsx:"true"},`
        .sophisticated-bg {
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
          min-height: 100vh;
        }

        .elegant-card {
          background: white;
          border: 2px solid #e2e8f0;
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
          backdrop-filter: blur(10px);
        }

        .logo-sophisticated {
          background: linear-gradient(135deg, #3b82f6, #1e40af);
          box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .beta-badge {
          background: linear-gradient(135deg, #dc2626, #b91c1c);
          display: inline-flex;
          align-items: center;
        }

        .elegant-input {
          width: 100%;
          padding: 1rem;
          border: 2px solid #e2e8f0;
          border-radius: 0.75rem;
          background: white;
          color: #1f2937;
          font-size: 1rem;
          transition: all 0.3s ease;
        }

        .elegant-input:focus {
          outline: none;
          border-color: #3b82f6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
          transform: translateY(-1px);
        }

        .elegant-input:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-primary {
          background: linear-gradient(135deg, #dc2626, #b91c1c);
          border: none;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .btn-primary:hover:not(:disabled) {
          background: linear-gradient(135deg, #b91c1c, #991b1b);
          box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
        }

        .btn-secondary {
          background: linear-gradient(135deg, #3b82f6, #1e40af);
          border: none;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .btn-secondary:hover:not(:disabled) {
          background: linear-gradient(135deg, #1e40af, #1d4ed8);
          box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .link-sophisticated {
          color: #3b82f6;
          border: 2px solid #dbeafe;
          background: linear-gradient(135deg, #dbeafe, #bfdbfe);
        }

        .link-sophisticated:hover {
          background: linear-gradient(135deg, #bfdbfe, #93c5fd);
          border-color: #3b82f6;
        }

        .link-muted {
          color: #6b7280;
        }

        .fade-in {
          animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }

        :root {
          --alex-blue: #3b82f6;
          --academy-red: #dc2626;
          --charcoal: #1f2937;
          --medium-gray: #6b7280;
          --light-gray: #e2e8f0;
          --soft-blue: #dbeafe;
        }
      `))}function n2({user:t,onLogout:e,onNavigate:n,onStudentDataLoad:r}){const[s,o]=U.useState({level:1,xp:0,streak:0,completedLessons:0,totalLessons:70,foundationLessons:0,gamingLessons:0,moviesLessons:0,foodLessons:0,travelLessons:0,sportsLessons:0,cultureLessons:0}),[i,c]=U.useState(!0),[u,h]=U.useState("🔥 Loading your progress..."),p=U.useRef(!1);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){h("❌ User not found"),c(!1);return}try{h("✅ Ready!");const D=ye(ge,"students",t.username,"progress","foundation"),q=await Ee(D),z=ye(ge,"students",t.username,"progress","gaming"),b=await Ee(z),g=ye(ge,"students",t.username,"progress","movies"),E=await Ee(g),x=ye(ge,"students",t.username,"progress","food"),A=await Ee(x),R=ye(ge,"students",t.username,"progress","travel"),w=await Ee(R),Z=ye(ge,"students",t.username,"progress","sports"),re=await Ee(Z),P=ye(ge,"students",t.username,"progress","culture"),Se=await Ee(P);let j=0,Q=0,X=0,le=0,oe=0,he=0,ce=0,fe=0,Ne=0;if(q.exists()){const me=q.data();j+=me.totalXP||0,X=Object.keys(me.lessons||{}).length,Q+=X}if(b.exists()){const me=b.data();j+=me.totalXP||0,le=Object.keys(me.lessons||{}).length,Q+=le}if(E.exists()){const me=E.data();j+=me.totalXP||0,oe=Object.keys(me.lessons||{}).length,Q+=oe}if(A.exists()){const me=A.data();j+=me.totalXP||0,he=Object.keys(me.lessons||{}).length,Q+=he}if(w.exists()){const me=w.data();j+=me.totalXP||0,ce=Object.keys(me.lessons||{}).length,Q+=ce}if(re.exists()){const me=re.data();j+=me.totalXP||0,fe=Object.keys(me.lessons||{}).length,Q+=fe}if(Se.exists()){const me=Se.data();j+=me.totalXP||0,Ne=Object.keys(me.lessons||{}).length,Q+=Ne}const Ie=y(j),Ke=_(q,b,E,A,w,re,Se),Be={level:Ie,xp:j,streak:Ke,completedLessons:Q,totalLessons:70,foundationLessons:X,gamingLessons:le,moviesLessons:oe,foodLessons:he,travelLessons:ce,sportsLessons:fe,cultureLessons:Ne};o(Be),r&&r(Be),h(`✅ ALL 7 SERIES LOADED! F:${X} G:${le} M:${oe} Fd:${he} T:${ce} S:${fe} C:${Ne}`),c(!1),p.current||setTimeout(()=>{document.getElementById("totalCompletedCounter")&&(L(Be),p.current=!0)},500)}catch(D){console.error("Firebase Error loading progress:",D),h("❌ Failed to load progress"),c(!1);const q={level:3,xp:275,streak:5,completedLessons:8,totalLessons:70,foundationLessons:2,gamingLessons:1,moviesLessons:2,foodLessons:1,travelLessons:1,sportsLessons:1,cultureLessons:0};o(q),r&&r(q),p.current||setTimeout(()=>{L(q),p.current=!0},500)}})()},[t,r]);const y=k=>{if(k<100)return 1;let D=1,q=0;for(;k>=q&&(D++,q+=(D-1)*150,!(D>1e3)););return Math.min(D-1,1e3)},_=(k,D,q,z,b,g,E)=>{let x=0;if(k.exists()){const R=k.data();x=Math.max(x,R.lastUpdated||0)}if(D.exists()){const R=D.data();x=Math.max(x,R.lastUpdated||0)}if(q.exists()){const R=q.data();x=Math.max(x,R.lastUpdated||0)}if(z.exists()){const R=z.data();x=Math.max(x,R.lastUpdated||0)}if(b.exists()){const R=b.data();x=Math.max(x,R.lastUpdated||0)}if(g.exists()){const R=g.data();x=Math.max(x,R.lastUpdated||0)}if(E.exists()){const R=E.data();x=Math.max(x,R.lastUpdated||0)}if(x===0)return 0;const A=Math.floor((Date.now()-x)/(1e3*60*60*24));return A<=1?5:Math.max(0,5-A)},I=k=>k<=50?"Beginner":k<=150?"Elementary":k<=400?"Intermediate":k<=700?"Advanced":"Expert",L=k=>{[{id:"totalCompletedCounter",value:k.completedLessons},{id:"totalXPCounter",value:k.xp},{id:"currentLevelCounter",value:k.level},{id:"dayStreakCounter",value:k.streak}].forEach((q,z)=>{setTimeout(()=>{const b=document.getElementById(q.id);b&&M(b,q.value,1200+z*200)},100+z*200)})},M=(k,D,q=1500)=>{if(!k)return;k.style.transition="none",k.style.transform="scale(1)";const z=0,b=Date.now(),g=()=>{const E=Date.now()-b,x=Math.min(E/q,1),A=1-Math.pow(1-x,3),R=Math.floor(z+(D-z)*A);k.textContent=R.toLocaleString("pt-BR"),x<1?requestAnimationFrame(g):(k.textContent=D.toLocaleString("pt-BR"),k.style.transform="scale(1.1)",setTimeout(()=>{k.style.transform="scale(1)"},200))};g()};U.useEffect(()=>{p.current&&!i&&[{id:"totalCompletedCounter",value:s.completedLessons},{id:"totalXPCounter",value:s.xp},{id:"currentLevelCounter",value:s.level},{id:"dayStreakCounter",value:s.streak}].forEach(D=>{const q=document.getElementById(D.id);q&&(q.textContent=D.value.toLocaleString("pt-BR"))})},[s,i]);const F=s.level,N=I(F),S=s.completedLessons/s.totalLessons*100;return i?a.createElement("div",{className:"sophisticated-bg min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"📊"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Loading Your Progress..."),a.createElement("p",{className:"text-gray-600 mb-4"},u),a.createElement("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}))):a.createElement("div",{className:"sophisticated-bg min-h-screen"},a.createElement("div",{className:"portal-header"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8"},a.createElement("div",{className:"brand-title"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"welcome-message"},"Bem-vindo(a) de volta, ",(t==null?void 0:t.displayName)||"Estudante"),a.createElement("div",{className:"firebase-status"},u))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 space-y-6"},a.createElement("div",{className:"professional-card rounded-xl p-4 sm:p-5 md:p-6"},a.createElement("div",{className:"text-center"},a.createElement("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold mb-2",style:{color:"var(--charcoal)"}},"Nível ",F," • ",N),a.createElement("div",{className:"flex items-center justify-center space-x-4 sm:space-x-6 text-sm sm:text-base mb-3",style:{color:"var(--medium-gray)"}},a.createElement("span",null,s.xp," XP"),a.createElement("span",{style:{color:"var(--light-gray)"}},"•"),a.createElement("span",null,"Sequência ",s.streak)),a.createElement("div",{className:"progress-card rounded-lg p-3 mt-3"},a.createElement("div",{className:"flex justify-between text-xs sm:text-sm mb-1",style:{color:"var(--medium-gray)"}},a.createElement("span",null,"Progresso das Aulas"),a.createElement("span",null,s.completedLessons,"/",s.totalLessons)),a.createElement("div",{className:"w-full rounded-full h-2",style:{backgroundColor:"var(--light-gray)"}},a.createElement("div",{className:"h-2 rounded-full transition-all duration-500",style:{backgroundColor:"var(--alex-blue)",width:`${S}%`}}))),(s.foundationLessons>0||s.gamingLessons>0||s.moviesLessons>0||s.foodLessons>0||s.travelLessons>0||s.sportsLessons>0||s.cultureLessons>0)&&a.createElement("div",{className:"mt-4 flex justify-center space-x-2 text-xs flex-wrap gap-1"},s.foundationLessons>0&&a.createElement("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full"},"🌟 Foundation: ",s.foundationLessons,"/10"),s.gamingLessons>0&&a.createElement("div",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full"},"🎮 Gaming: ",s.gamingLessons,"/10"),s.moviesLessons>0&&a.createElement("div",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full"},"🎬 Movies: ",s.moviesLessons,"/10"),s.foodLessons>0&&a.createElement("div",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full"},"🍕 Food: ",s.foodLessons,"/10"),s.travelLessons>0&&a.createElement("div",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full"},"✈️ Travel: ",s.travelLessons,"/10"),s.sportsLessons>0&&a.createElement("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full"},"⚽ Sports: ",s.sportsLessons,"/10"),s.cultureLessons>0&&a.createElement("div",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full"},"🇧🇷 Culture: ",s.cultureLessons,"/10")))),a.createElement("div",{className:"professional-card rounded-xl p-4 sm:p-5 md:p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-100"},a.createElement("div",{className:"text-center mb-4"},a.createElement("h3",{className:"text-xl sm:text-2xl font-bold mb-2",style:{color:"var(--charcoal)"}},"📊 Seu Progresso Real (7 Séries)"),a.createElement("p",{className:"text-sm sm:text-base",style:{color:"var(--medium-gray)"}},"Dados carregados de todas as 7 séries no Firebase!")),a.createElement("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6"},a.createElement("div",{className:"bg-white rounded-xl p-3 sm:p-4 shadow-sm border border-blue-100 hover:shadow-md transition-all duration-300"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600 mb-1 counter-number",id:"totalCompletedCounter",style:{transition:"transform 0.2s ease",display:"inline-block"}},"0"),a.createElement("div",{className:"text-xs sm:text-sm font-medium",style:{color:"var(--medium-gray)"}},"Lições Completas"))),a.createElement("div",{className:"bg-white rounded-xl p-3 sm:p-4 shadow-sm border border-red-100 hover:shadow-md transition-all duration-300"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-2xl sm:text-3xl font-bold text-red-500 mb-1 counter-number",id:"totalXPCounter",style:{transition:"transform 0.2s ease",display:"inline-block"}},"0"),a.createElement("div",{className:"text-xs sm:text-sm font-medium",style:{color:"var(--medium-gray)"}},"XP Real"))),a.createElement("div",{className:"bg-white rounded-xl p-3 sm:p-4 shadow-sm border border-purple-100 hover:shadow-md transition-all duration-300"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-2xl sm:text-3xl font-bold text-purple-600 mb-1 counter-number",id:"currentLevelCounter",style:{transition:"transform 0.2s ease",display:"inline-block"}},"1"),a.createElement("div",{className:"text-xs sm:text-sm font-medium",style:{color:"var(--medium-gray)"}},"Nível Atual"))),a.createElement("div",{className:"bg-white rounded-xl p-3 sm:p-4 shadow-sm border border-green-100 hover:shadow-md transition-all duration-300"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-1 counter-number",id:"dayStreakCounter",style:{transition:"transform 0.2s ease",display:"inline-block"}},"0"),a.createElement("div",{className:"text-xs sm:text-sm font-medium",style:{color:"var(--medium-gray)"}},"Sequência")))),a.createElement("div",{className:"mt-4 text-center"},a.createElement("p",{className:"text-sm sm:text-base text-blue-600 font-medium"},"🔥 7 séries ativas: Foundation + Gaming + Movies + Food + Travel + Sports + Culture! 🚀"))),a.createElement("div",null,a.createElement("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold mb-4 sm:mb-5 md:mb-6",style:{color:"var(--charcoal)"}},"🎧 Suas Aulas"),a.createElement("div",{className:"space-y-4 sm:space-y-5 md:space-y-6"},a.createElement("div",{className:"lesson-card-enhanced"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:"text-lg sm:text-xl font-bold text-white mb-1 sm:mb-2"},"🌟 STUDY ENGLISH (7 SERIES)"),a.createElement("p",{className:"text-sm sm:text-base text-blue-100 mb-3 sm:mb-4"},s.completedLessons," lições completadas • ",s.xp," XP total"),a.createElement("div",{className:"flex items-center gap-2 mb-3"},a.createElement("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-semibold text-white"},"🎧 Audio Lessons"),a.createElement("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-semibold text-white"},"🔥 Firebase Sync"),a.createElement("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-semibold text-white"},"📊 70 Total Lessons"))),a.createElement("div",{className:"ml-4 text-3xl sm:text-4xl"},"🌟")),a.createElement("button",{onClick:()=>n("hub"),className:"btn-enhanced w-full sm:w-auto inline-block text-center font-bold py-3 px-6 rounded-lg text-sm sm:text-base"},"🎯 CONTINUAR ESTUDOS")),a.createElement("div",{className:"lesson-card-soon"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:"text-lg sm:text-xl font-semibold mb-1 sm:mb-2",style:{color:"var(--medium-gray)"}},"📝 EXERCÍCIOS"),a.createElement("p",{className:"text-sm sm:text-base mb-3 sm:mb-4",style:{color:"var(--medium-gray)"}},"Sistema de exercícios interativos completo")),a.createElement("div",{className:"ml-4 text-2xl sm:text-3xl",style:{color:"var(--light-gray)"}},"────")),a.createElement("button",{className:"btn-disabled w-full sm:w-auto font-semibold py-3 px-6 rounded-lg text-sm sm:text-base cursor-not-allowed"},"EM BREVE")))),a.createElement("div",{className:"revolutionary-footer"},a.createElement("p",{className:"revolutionary-text"},"🔥 7 séries ativas • Foundation + Gaming + Movies + Food + Travel + Sports + Culture • Teacher Alex English Academy")),a.createElement("div",{className:"text-center pb-4"},a.createElement("button",{onClick:e,className:"text-sm transition-colors",style:{color:"var(--charcoal)",background:"none",border:"none"}},"Sair"))),a.createElement("style",{jsx:"true"},`
        .portal-header {
          background: linear-gradient(135deg, var(--alex-blue), #2563eb);
          text-align: center;
          padding: 2rem 1rem;
          border-bottom: 2px solid #1e40af;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .brand-title {
          font-size: 1.25rem;
          font-weight: 800;
          color: white;
          letter-spacing: 0.5px;
          margin-bottom: 0.75rem;
          text-transform: uppercase;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .welcome-message {
          font-size: 1rem;
          font-weight: 600;
          color: #e2e8f0;
          margin-bottom: 0.5rem;
        }

        .firebase-status {
          font-size: 0.875rem;
          color: #bfdbfe;
          font-weight: 500;
        }

        .professional-card {
          background: white;
          border: 2px solid var(--soft-blue);
          box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
          transition: all 0.3s ease;
          animation: subtleBreath 4s ease-in-out infinite;
        }

        .progress-card {
          background: linear-gradient(135deg, #e2e8f0, var(--soft-blue));
          border: 2px solid #93c5fd;
        }

        .revolutionary-footer {
          text-align: center;
          padding: 2rem 1rem;
          background: linear-gradient(135deg, var(--soft-blue), #e2e8f0);
          border: 2px solid #93c5fd;
          border-radius: 1rem;
          margin: 1.5rem 0;
        }

        .revolutionary-text {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1e40af;
          margin: 0;
          text-align: center;
        }

        .lesson-card-enhanced {
          background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
          border: 2px solid #1e40af;
          border-radius: 0.75rem;
          padding: 1.5rem;
          box-shadow: 0 8px 25px rgba(59, 130, 246, 0.25);
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .lesson-card-enhanced:hover {
          transform: translateY(-3px);
          box-shadow: 0 12px 35px rgba(59, 130, 246, 0.35);
        }

        .lesson-card-soon {
          background: #e2e8f0;
          border: 2px solid var(--light-gray);
          border-radius: 0.75rem;
          padding: 1.5rem;
          opacity: 0.7;
        }

        .btn-enhanced {
          background: rgba(255, 255, 255, 0.95);
          color: #1e40af;
          transition: all 0.3s ease;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          border: none;
          cursor: pointer;
        }

        .btn-enhanced:hover {
          background: white;
          transform: translateY(-1px);
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .btn-disabled {
          background: var(--light-gray);
          color: #9ca3af;
          border: none;
        }

        @keyframes subtleBreath {
          0%, 100% { 
            transform: scale(1); 
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15); 
          }
          50% { 
            transform: scale(1.002); 
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.18); 
          }
        }

        @media (min-width: 640px) {
          .brand-title {
            font-size: 1.5rem;
            letter-spacing: 1px;
          }
          
          .welcome-message {
            font-size: 1.125rem;
          }
        }

        @media (min-width: 768px) {
          .brand-title {
            font-size: 1.75rem;
            letter-spacing: 1.5px;
          }
          
          .welcome-message {
            font-size: 1.25rem;
          }
        }

        .sophisticated-bg {
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
          min-height: 100vh;
        }

        :root {
          --alex-blue: #3b82f6;
          --charcoal: #1f2937;
          --medium-gray: #6b7280;
          --light-gray: #e2e8f0;
          --soft-blue: #dbeafe;
        }
      `))}function r2({user:t,onThemeSelect:e,onLogout:n,studentData:r}){const[s,o]=U.useState(r||{level:1,xp:0,streak:0,completedLessons:0,totalLessons:70,foundationLessons:0,gamingLessons:0,moviesLessons:0,foodLessons:0,travelLessons:0,sportsLessons:0,cultureLessons:0});U.useEffect(()=>{(async()=>{if(t!=null&&t.username)try{const p=ye(ge,"students",t.username,"progress","foundation"),y=await Ee(p),_=ye(ge,"students",t.username,"progress","gaming"),I=await Ee(_),L=ye(ge,"students",t.username,"progress","movies"),M=await Ee(L),F=ye(ge,"students",t.username,"progress","food"),N=await Ee(F),S=ye(ge,"students",t.username,"progress","travel"),k=await Ee(S),D=ye(ge,"students",t.username,"progress","sports"),q=await Ee(D),z=ye(ge,"students",t.username,"progress","culture"),b=await Ee(z);let g=0,E=0,x=0,A=0,R=0,w=0,Z=0,re=0,P=0;if(y.exists()){const X=y.data();g+=X.totalXP||0,x=Object.keys(X.lessons||{}).length,E+=x}if(I.exists()){const X=I.data();g+=X.totalXP||0,A=Object.keys(X.lessons||{}).length,E+=A}if(M.exists()){const X=M.data();g+=X.totalXP||0,R=Object.keys(X.lessons||{}).length,E+=R}if(N.exists()){const X=N.data();g+=X.totalXP||0,w=Object.keys(X.lessons||{}).length,E+=w}if(k.exists()){const X=k.data();g+=X.totalXP||0,Z=Object.keys(X.lessons||{}).length,E+=Z}if(q.exists()){const X=q.data();g+=X.totalXP||0,re=Object.keys(X.lessons||{}).length,E+=re}if(b.exists()){const X=b.data();g+=X.totalXP||0,P=Object.keys(X.lessons||{}).length,E+=P}const Se=i(g),j=c(y,I,M,N,k,q,b);o({level:Se,xp:g,streak:j,completedLessons:E,totalLessons:70,foundationLessons:x,gamingLessons:A,moviesLessons:R,foodLessons:w,travelLessons:Z,sportsLessons:re,cultureLessons:P})}catch(p){console.error("Hub Firebase Error:",p),o(r||s)}})()},[t,r]);const i=h=>{if(h<100)return 1;let p=1,y=0;for(;h>=y&&(p++,y+=(p-1)*150,!(p>1e3)););return Math.min(p-1,1e3)},c=(h,p,y,_,I,L,M)=>{let F=0;if([h,p,y,_,I,L,M].forEach(S=>{if(S.exists()){const k=S.data();F=Math.max(F,k.lastUpdated||0)}}),F===0)return 0;const N=Math.floor((Date.now()-F)/(1e3*60*60*24));return N<=1?5:Math.max(0,5-N)},u=s;return a.createElement("div",{className:"sophisticated-bg min-h-screen"},a.createElement("div",{className:"hub-header"},a.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 md:px-8"},a.createElement("div",{className:"hub-logo"},a.createElement("div",{className:"logo-circle"},"A")),a.createElement("div",{className:"brand-title"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"beta-badge"},"BETA"),a.createElement("div",{className:"welcome-message"},"Choose your English adventure path, ",(t==null?void 0:t.username)||(t==null?void 0:t.displayName),"!"),a.createElement("div",{className:"subtitle"},"Professional English learning with Brazilian context • 70 Interactive Lessons"))),a.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 md:px-8 py-6 space-y-6"},a.createElement("div",{className:"professional-card rounded-xl p-4 sm:p-5 md:p-6"},a.createElement("div",{className:"text-center"},a.createElement("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold mb-4",style:{color:"var(--charcoal)"}},"🏆 Your Real Progress Journey (7 Series) - 🔥 FRESH DATA!"),a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6"},a.createElement("div",{className:"stat-item"},a.createElement("div",{className:"text-2xl font-bold text-blue-600"},(u==null?void 0:u.completedLessons)||0),a.createElement("div",{className:"text-sm text-gray-600"},"Lessons Completed")),a.createElement("div",{className:"stat-item"},a.createElement("div",{className:"text-2xl font-bold text-green-600"},(u==null?void 0:u.xp)||0),a.createElement("div",{className:"text-sm text-gray-600"},"XP Earned")),a.createElement("div",{className:"stat-item"},a.createElement("div",{className:"text-2xl font-bold text-purple-600"},(u==null?void 0:u.level)||1),a.createElement("div",{className:"text-sm text-gray-600"},"Current Level")),a.createElement("div",{className:"stat-item"},a.createElement("div",{className:"text-2xl font-bold text-orange-600"},(u==null?void 0:u.streak)||0),a.createElement("div",{className:"text-sm text-gray-600"},"Day Streak"))),u&&(u.foundationLessons>0||u.gamingLessons>0||u.moviesLessons>0||u.foodLessons>0||u.travelLessons>0||u.sportsLessons>0||u.cultureLessons>0)&&a.createElement("div",{className:"mb-6 flex justify-center space-x-2 text-xs flex-wrap gap-1"},u.foundationLessons>0&&a.createElement("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold"},"🌟 Foundation: ",u.foundationLessons,"/10"),u.gamingLessons>0&&a.createElement("div",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-semibold"},"🎮 Gaming: ",u.gamingLessons,"/10"),u.moviesLessons>0&&a.createElement("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full font-semibold"},"🎬 Movies: ",u.moviesLessons,"/10"),u.foodLessons>0&&a.createElement("div",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full font-semibold"},"🍕 Food: ",u.foodLessons,"/10"),u.travelLessons>0&&a.createElement("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold"},"✈️ Travel: ",u.travelLessons,"/10"),u.sportsLessons>0&&a.createElement("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold"},"⚽ Sports: ",u.sportsLessons,"/10"),u.cultureLessons>0&&a.createElement("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold"},"🇧🇷 Culture: ",u.cultureLessons,"/10")))),a.createElement("div",null,a.createElement("h2",{className:"text-lg sm:text-xl md:text-2xl font-semibold mb-4 sm:mb-5 md:mb-6 text-center",style:{color:"var(--charcoal)"}},"🎧 Choose Your Learning Path (7 Series Available)"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},a.createElement("div",{className:"theme-card foundation-card",onClick:()=>e("foundation")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"🌟"),a.createElement("h3",{className:"text-xl font-bold text-blue-600 mb-2"},"A1 Foundation"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.foundationLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.foundationLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Master English basics with interactive audio lessons. Perfect for beginners!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"✅ Greetings & Introductions"),a.createElement("div",{className:"feature"},"✅ Family & Daily Routine"),a.createElement("div",{className:"feature"},"✅ Food & Shopping"),a.createElement("div",{className:"feature"},"✅ Weather & Future Plans"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn foundation-btn"},"Start Learning →"))),a.createElement("div",{className:"theme-card gaming-card",onClick:()=>e("gaming")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"🎮"),a.createElement("h3",{className:"text-xl font-bold text-purple-600 mb-2"},"Gaming World"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.gamingLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.gamingLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Learn English through gaming culture and esports vocabulary!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"🖥️ PC Setup & Hardware"),a.createElement("div",{className:"feature"},"🏆 Esports & Tournaments"),a.createElement("div",{className:"feature"},"📱 Mobile Gaming"),a.createElement("div",{className:"feature"},"🎬 Game Reviews & Streaming"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn gaming-btn"},"Enter Game →"))),a.createElement("div",{className:"theme-card movies-card",onClick:()=>e("movies")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"🎬"),a.createElement("h3",{className:"text-xl font-bold text-red-600 mb-2"},"Movie Magic"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.moviesLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.moviesLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Discover English through cinema and entertainment culture!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"🎭 Cinema Experiences"),a.createElement("div",{className:"feature"},"📺 Streaming & Netflix"),a.createElement("div",{className:"feature"},"⭐ Movie Reviews"),a.createElement("div",{className:"feature"},"🏆 Awards & Festivals"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn movies-btn"},"Watch Now →"))),a.createElement("div",{className:"theme-card food-card",onClick:()=>e("food")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"🍕"),a.createElement("h3",{className:"text-xl font-bold text-orange-600 mb-2"},"Food Adventures"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.foodLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.foodLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Learn English through culinary experiences and Brazilian cuisine!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"🍝 Cooking at Home"),a.createElement("div",{className:"feature"},"🥩 Brazilian BBQ"),a.createElement("div",{className:"feature"},"🍞 Baking & Recipes"),a.createElement("div",{className:"feature"},"🏪 Restaurant Dreams"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn food-btn"},"Taste Now →"))),a.createElement("div",{className:"theme-card travel-card",onClick:()=>e("travel")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"✈️"),a.createElement("h3",{className:"text-xl font-bold text-green-600 mb-2"},"Travel Dreams"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.travelLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.travelLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Explore the world through amazing travel adventures and destinations!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"🌍 International Trips"),a.createElement("div",{className:"feature"},"🏖️ Beach Vacations"),a.createElement("div",{className:"feature"},"🎒 Backpacking Europe"),a.createElement("div",{className:"feature"},"🏝️ Dream Honeymoons"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn travel-btn"},"Explore →"))),a.createElement("div",{className:"theme-card sports-card",onClick:()=>e("sports")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"⚽"),a.createElement("h3",{className:"text-xl font-bold text-blue-600 mb-2"},"Sports Passion"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.sportsLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.sportsLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Learn English through Brazilian sports culture and athletic adventures!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"⚽ World Cup Passion"),a.createElement("div",{className:"feature"},"🔴 Flamengo Pride"),a.createElement("div",{className:"feature"},"🏖️ Beach Volleyball"),a.createElement("div",{className:"feature"},"🏃‍♀️ Marathon Running"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn sports-btn"},"Play Now →"))),a.createElement("div",{className:"theme-card culture-card",onClick:()=>e("culture")},a.createElement("div",{className:"card-header"},a.createElement("div",{className:"text-4xl mb-3"},"🇧🇷"),a.createElement("h3",{className:"text-xl font-bold text-green-600 mb-2"},"Brazilian Culture"),a.createElement("div",{className:"lesson-count"},"10 Audio Lessons"),(u==null?void 0:u.cultureLessons)>0&&a.createElement("div",{className:"series-progress"},"Progress: ",u.cultureLessons,"/10")),a.createElement("div",{className:"card-content"},a.createElement("p",{className:"text-gray-600 mb-4"},"Celebrate Brazilian identity through authentic cultural experiences!"),a.createElement("div",{className:"features"},a.createElement("div",{className:"feature"},"🎭 Carnival & Festa Junina"),a.createElement("div",{className:"feature"},"💃 Samba & Brazilian Music"),a.createElement("div",{className:"feature"},"🏖️ Beach Culture & Family Life"),a.createElement("div",{className:"feature"},"⚽ Football Passion & Pride"))),a.createElement("div",{className:"card-footer"},a.createElement("div",{className:"xp-reward"},"🏆 Up to 500 XP"),a.createElement("div",{className:"start-btn culture-btn"},"Explore Culture →"))))),a.createElement("div",{className:"user-actions"},a.createElement("div",{className:"flex justify-center space-x-4"},a.createElement("button",{onClick:()=>e("portal"),className:"btn-back"},"← Back to Portal"),a.createElement("button",{onClick:n,className:"logout-btn"},"🚪 Logout")),a.createElement("div",{className:"user-welcome"},"Welcome back, ",a.createElement("strong",null,(t==null?void 0:t.username)||(t==null?void 0:t.displayName)),"! Ready to learn? 🚀"),u&&a.createElement("div",{className:"progress-summary"},a.createElement("p",{className:"text-center text-sm text-gray-600 mt-4"},"📊 Total Progress: ",u.completedLessons||0,"/70 lessons • ",u.xp||0," XP earned")))),a.createElement("style",{jsx:"true"},`
        .sophisticated-bg {
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
          min-height: 100vh;
        }

        .hub-header {
          background: linear-gradient(135deg, var(--alex-blue), #2563eb);
          text-align: center;
          padding: 2rem 1rem;
          border-bottom: 2px solid #1e40af;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .hub-logo {
          display: flex;
          justify-content: center;
          margin-bottom: 1rem;
        }

        .logo-circle {
          width: 60px;
          height: 60px;
          background: linear-gradient(135deg, #ffffff, #f8fafc);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #3b82f6;
          font-size: 1.5rem;
          font-weight: bold;
          box-shadow: 0 8px 25px rgba(255, 255, 255, 0.3);
        }

        .brand-title {
          font-size: 1.5rem;
          font-weight: 800;
          color: white;
          letter-spacing: 0.5px;
          margin-bottom: 0.75rem;
          text-transform: uppercase;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .beta-badge {
          display: inline-block;
          background: linear-gradient(135deg, #dc2626, #b91c1c);
          color: white;
          padding: 0.25rem 0.75rem;
          border-radius: 1rem;
          font-size: 0.75rem;
          font-weight: 600;
          margin-bottom: 1rem;
          box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .welcome-message {
          font-size: 1.125rem;
          font-weight: 600;
          color: #e2e8f0;
          margin-bottom: 0.5rem;
        }

        .subtitle {
          font-size: 0.875rem;
          color: #bfdbfe;
          font-weight: 500;
        }

        .professional-card {
          background: white;
          border: 2px solid var(--soft-blue);
          box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
          transition: all 0.3s ease;
          animation: subtleBreath 4s ease-in-out infinite;
        }

        .stat-item {
          padding: 1rem;
          background: #f8fafc;
          border-radius: 0.75rem;
          border: 1px solid #e2e8f0;
          transition: all 0.3s ease;
        }

        .stat-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(59, 130, 246, 0.1);
        }

        .motivation-text {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
        }

        .theme-card {
          background: white;
          border-radius: 1rem;
          padding: 1.5rem;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
          border: 2px solid transparent;
        }

        .theme-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .series-progress {
          background: rgba(59, 130, 246, 0.1);
          color: #1e40af;
          font-size: 0.75rem;
          font-weight: 600;
          padding: 0.25rem 0.5rem;
          border-radius: 0.5rem;
          margin-top: 0.5rem;
        }

        .foundation-card {
          border-color: #dbeafe;
        }
        .foundation-card:hover {
          border-color: #3b82f6;
          box-shadow: 0 15px 35px rgba(59, 130, 246, 0.2);
        }

        .gaming-card {
          border-color: #e9d5ff;
        }
        .gaming-card:hover {
          border-color: #8b5cf6;
          box-shadow: 0 15px 35px rgba(139, 92, 246, 0.2);
        }

        .movies-card {
          border-color: #fecaca;
        }
        .movies-card:hover {
          border-color: #dc2626;
          box-shadow: 0 15px 35px rgba(220, 38, 38, 0.2);
        }

        .food-card {
          border-color: #fed7aa;
        }
        .food-card:hover {
          border-color: #f97316;
          box-shadow: 0 15px 35px rgba(249, 115, 22, 0.2);
        }

        .travel-card {
          border-color: #bbf7d0;
        }
        .travel-card:hover {
          border-color: #10b981;
          box-shadow: 0 15px 35px rgba(16, 185, 129, 0.2);
        }

        .sports-card {
          border-color: #dbeafe;
        }
        .sports-card:hover {
          border-color: #2563eb;
          box-shadow: 0 15px 35px rgba(37, 99, 235, 0.2);
        }

        /* 🇧🇷 Culture card styling */
        .culture-card {
          border-color: #bbf7d0;
        }
        .culture-card:hover {
          border-color: #10b981;
          box-shadow: 0 15px 35px rgba(16, 185, 129, 0.2);
        }

        .card-header {
          text-align: center;
          margin-bottom: 1rem;
        }

        .lesson-count {
          background: #f3f4f6;
          color: #374151;
          padding: 0.25rem 0.75rem;
          border-radius: 1rem;
          font-size: 0.75rem;
          font-weight: 600;
          display: inline-block;
        }

        .card-content {
          margin-bottom: 1.5rem;
        }

        .features {
          display: grid;
          gap: 0.5rem;
        }

        .feature {
          font-size: 0.875rem;
          color: #6b7280;
          padding: 0.25rem 0;
        }

        .card-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
        }

        .xp-reward {
          font-size: 0.875rem;
          font-weight: 600;
          color: #f59e0b;
        }

        .start-btn {
          padding: 0.5rem 1rem;
          border-radius: 0.5rem;
          font-weight: 600;
          font-size: 0.875rem;
          transition: all 0.3s ease;
        }

        .foundation-btn {
          background: linear-gradient(135deg, #3b82f6, #1e40af);
          color: white;
        }

        .gaming-btn {
          background: linear-gradient(135deg, #8b5cf6, #7c3aed);
          color: white;
        }

        .movies-btn {
          background: linear-gradient(135deg, #dc2626, #b91c1c);
          color: white;
        }

        .food-btn {
          background: linear-gradient(135deg, #f97316, #ea580c);
          color: white;
        }

        .travel-btn {
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
        }

        .sports-btn {
          background: linear-gradient(135deg, #2563eb, #1d4ed8);
          color: white;
        }

        /* 🇧🇷 Culture button styling */
        .culture-btn {
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
        }

        .start-btn:hover {
          transform: translateY(-1px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .user-actions {
          text-align: center;
          margin-top: 2rem;
        }

        .btn-back {
          background: linear-gradient(135deg, #10b981, #059669);
          color: white;
          padding: 0.75rem 1.5rem;
          border-radius: 0.5rem;
          border: none;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .btn-back:hover {
          transform: translateY(-1px);
          box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .logout-btn {
          background: linear-gradient(135deg, #6b7280, #4b5563);
          color: white;
          padding: 0.75rem 1.5rem;
          border-radius: 0.5rem;
          border: none;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .logout-btn:hover {
          transform: translateY(-1px);
          box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
        }

        .user-welcome {
          display: flex;
          align-items: center;
          justify-content: center;
          color: #374151;
          font-size: 1rem;
          margin-top: 1rem;
        }

        .progress-summary {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
        }

        @keyframes subtleBreath {
          0%, 100% { 
            transform: scale(1); 
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15); 
          }
          50% { 
            transform: scale(1.002); 
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.18); 
          }
        }

        @media (max-width: 768px) {
          .theme-card {
            padding: 1rem;
          }
          
          .card-footer {
            flex-direction: column;
            gap: 1rem;
            text-align: center;
          }

          .user-actions .flex {
            flex-direction: column;
            gap: 1rem;
          }

          .brand-title {
            font-size: 1.25rem;
          }

          .welcome-message {
            font-size: 1rem;
          }
        }

        :root {
          --alex-blue: #3b82f6;
          --charcoal: #1f2937;
          --medium-gray: #6b7280;
          --light-gray: #e2e8f0;
          --soft-blue: #dbeafe;
        }
      `))}function s2({user:t,onLogout:e,onNavigate:n}){const[r,s]=U.useState({totalStudents:0,activeStudents:0,newStudentsThisMonth:0,totalLessonsCompleted:0,totalXPEarned:0}),[o,i]=U.useState(!1),[c,u]=U.useState({name:"",username:"",password:""}),[h,p]=U.useState([]),[y,_]=U.useState(!0),[I,L]=U.useState("🔥 Loading dashboard...");U.useEffect(()=>{(async()=>{try{L("🔥 Loading students from Firebase...");const N=DA(ge,"students"),S=await YA(N);if(S.empty){p([]),s({totalStudents:0,activeStudents:0,newStudentsThisMonth:0,totalLessonsCompleted:0,totalXPEarned:0}),L("✅ Firebase connected - No students yet"),_(!1);return}L("📊 Calculating student progress from ALL 6 series...");const k=[];let D=0,q=0,z=0,b=0;const g=new Date().getMonth(),E=new Date().getFullYear();for(const x of S.docs){const A=x.id;L(`📊 Loading ${A} progress from 6 series...`);const R=ye(ge,"students",A,"progress","foundation"),w=await Ee(R),Z=ye(ge,"students",A,"progress","gaming"),re=await Ee(Z),P=ye(ge,"students",A,"progress","movies"),Se=await Ee(P),j=ye(ge,"students",A,"progress","food"),Q=await Ee(j),X=ye(ge,"students",A,"progress","travel"),le=await Ee(X),oe=ye(ge,"students",A,"progress","sports"),he=await Ee(oe);let ce=0,fe=0,Ne=0,Ie=0,Ke=0,Be=0,me=0,Pe=0,be="Never",f=0;if(w.exists()){const W=w.data();ce+=W.totalXP||0,Ne=Object.keys(W.lessons||{}).length,fe+=Ne,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}if(re.exists()){const W=re.data();ce+=W.totalXP||0,Ie=Object.keys(W.lessons||{}).length,fe+=Ie,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}if(Se.exists()){const W=Se.data();ce+=W.totalXP||0,Ke=Object.keys(W.lessons||{}).length,fe+=Ke,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}if(Q.exists()){const W=Q.data();ce+=W.totalXP||0,Be=Object.keys(W.lessons||{}).length,fe+=Be,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}if(le.exists()){const W=le.data();ce+=W.totalXP||0,me=Object.keys(W.lessons||{}).length,fe+=me,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}if(he.exists()){const W=he.data();ce+=W.totalXP||0,Pe=Object.keys(W.lessons||{}).length,fe+=Pe,W.lastUpdated&&(f=Math.max(f,W.lastUpdated))}f>0&&(be=new Date(f).toLocaleDateString("pt-BR"));const T=f>0&&Date.now()-f<7*24*60*60*1e3;T&&z++;const C=x.data().createdAt;if(C){const W=new Date(C);W.getMonth()===g&&W.getFullYear()===E&&b++}const V=Math.round(fe/60*100);k.push({id:A,name:x.data().name||A,username:A,lastAccess:be,totalXP:ce,totalLessons:fe,foundationLessons:Ne,gamingLessons:Ie,moviesLessons:Ke,foodLessons:Be,travelLessons:me,sportsLessons:Pe,progress:V,isActive:T}),D+=fe,q+=ce}k.sort((x,A)=>A.totalXP-x.totalXP),p(k),s({totalStudents:k.length,activeStudents:z,newStudentsThisMonth:b,totalLessonsCompleted:D,totalXPEarned:q}),L(`✅ ${k.length} students loaded from ALL 6 SERIES • ${D} lessons completed • ${q} XP total`),_(!1)}catch(N){console.error("Firebase Dashboard Error:",N),L("❌ Failed to load dashboard data"),_(!1),p([{id:1,name:"João Silva",username:"joao123",lastAccess:"23/07/2025",progress:75,totalXP:450,totalLessons:8,foundationLessons:3,gamingLessons:2,moviesLessons:1,foodLessons:1,travelLessons:1,sportsLessons:0,isActive:!0},{id:2,name:"Maria Santos",username:"maria456",lastAccess:"22/07/2025",progress:45,totalXP:280,totalLessons:5,foundationLessons:2,gamingLessons:1,moviesLessons:1,foodLessons:1,travelLessons:0,sportsLessons:0,isActive:!0}])}})()},[]);const M=async F=>{if(F.preventDefault(),!c.name||!c.username||!c.password){alert("Por favor, preencha todos os campos");return}if(c.password.length<4){alert("Senha deve ter pelo menos 4 caracteres");return}if(h.find(S=>S.username===c.username)){alert("Nome de usuário já existe! Escolha outro.");return}try{L("📝 Creating student account...");const S=ye(ge,"students",c.username);await Hn(S,{name:c.name,username:c.username,password:c.password,createdAt:Date.now(),createdBy:(t==null?void 0:t.email)||"teacher",status:"active"});const k={id:Date.now(),name:c.name,username:c.username,lastAccess:"Never",progress:0,totalXP:0,totalLessons:0,foundationLessons:0,gamingLessons:0,moviesLessons:0,foodLessons:0,travelLessons:0,sportsLessons:0,isActive:!1};p([...h,k]),s(D=>({...D,totalStudents:D.totalStudents+1,newStudentsThisMonth:D.newStudentsThisMonth+1})),alert(`✅ Conta criada com sucesso no Firebase!

Usuário: ${c.username}
Senha: ${c.password}

Envie estas credenciais para o aluno.`),u({name:"",username:"",password:""}),i(!1),L(`✅ Student ${c.name} created successfully`)}catch(S){console.error("Firebase Create Student Error:",S),alert("❌ Erro ao criar estudante no Firebase. Tente novamente."),L("❌ Failed to create student")}};return y?a.createElement("div",{className:"sophisticated-bg min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"👨‍🏫"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Loading Teacher Dashboard..."),a.createElement("p",{className:"text-gray-600 mb-4"},I),a.createElement("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}))):a.createElement("div",{className:"sophisticated-bg min-h-screen"},a.createElement("nav",{className:"bg-white shadow-sm border-b border-gray-200 p-4"},a.createElement("div",{className:"flex justify-between items-center max-w-6xl mx-auto"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center"},a.createElement("span",{className:"text-xl font-bold text-white"},"A")),a.createElement("div",null,a.createElement("span",{className:"text-gray-800 font-semibold text-lg"},"Dashboard Professor (6 Séries)"),a.createElement("div",{className:"text-gray-500 text-sm"},"Teacher Alex English Academy"))),a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("span",{className:"text-gray-600 text-sm"},(t==null?void 0:t.displayName)||"Professor"),a.createElement("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors"},"Sair")))),a.createElement("div",{className:"max-w-6xl mx-auto p-6"},a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-blue-600 font-medium"},I)))),a.createElement("div",{className:"max-w-6xl mx-auto p-6"},a.createElement("div",{className:"grid md:grid-cols-5 gap-6 mb-8"},a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center card-hover"},a.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},r.totalStudents),a.createElement("div",{className:"text-gray-600 text-sm"},"Total Students")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center card-hover"},a.createElement("div",{className:"text-3xl font-bold text-green-600 mb-2"},r.activeStudents),a.createElement("div",{className:"text-gray-600 text-sm"},"Active Students")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center card-hover"},a.createElement("div",{className:"text-3xl font-bold text-red-500 mb-2"},r.newStudentsThisMonth),a.createElement("div",{className:"text-gray-600 text-sm"},"New This Month")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center card-hover"},a.createElement("div",{className:"text-3xl font-bold text-purple-600 mb-2"},r.totalLessonsCompleted),a.createElement("div",{className:"text-gray-600 text-sm"},"Lessons Completed")),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center card-hover"},a.createElement("div",{className:"text-3xl font-bold text-yellow-600 mb-2"},r.totalXPEarned.toLocaleString()),a.createElement("div",{className:"text-gray-600 text-sm"},"Total XP Earned"))),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8"},a.createElement("div",{className:"flex justify-between items-center mb-6"},a.createElement("h3",{className:"text-xl font-bold text-gray-800"},"👥 Gerenciar Alunos (Firebase - 6 Séries)"),a.createElement("button",{onClick:()=>i(!o),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"},"+ Adicionar Novo Aluno")),o&&a.createElement("div",{className:"bg-gray-50 rounded-lg p-6 mb-6"},a.createElement("h4",{className:"text-lg font-semibold text-gray-800 mb-4"},"📝 Criar Conta Firebase para Cliente"),a.createElement("form",{onSubmit:M,className:"grid md:grid-cols-3 gap-4 mb-4"},a.createElement("input",{type:"text",placeholder:"Nome do aluno",value:c.name,onChange:F=>u({...c,name:F.target.value}),className:"elegant-input p-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),a.createElement("input",{type:"text",placeholder:"Nome de usuário (login)",value:c.username,onChange:F=>u({...c,username:F.target.value}),className:"elegant-input p-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),a.createElement("input",{type:"password",placeholder:"Senha (min 4 caracteres)",value:c.password,onChange:F=>u({...c,password:F.target.value}),className:"elegant-input p-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),a.createElement("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"},"✅ Criar no Firebase"),a.createElement("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors"},"❌ Cancelar"))),a.createElement("div",{className:"space-y-3"},h.length===0?a.createElement("div",{className:"text-center py-8"},a.createElement("div",{className:"text-gray-500 mb-4"},"📚 Nenhum estudante no Firebase ainda"),a.createElement("p",{className:"text-sm text-gray-400"},'Clique em "Adicionar Novo Aluno" para criar a primeira conta')):h.map(F=>a.createElement("div",{key:F.id,className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},a.createElement("div",{className:"flex justify-between items-start"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center space-x-3 mb-2"},a.createElement("h4",{className:"font-semibold text-gray-800"},F.name),F.isActive&&a.createElement("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold"},"● Active")),a.createElement("p",{className:"text-sm text-gray-600 mb-2"},"@",F.username," • Último acesso: ",F.lastAccess),a.createElement("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mb-2"},a.createElement("span",null,"🌟 Foundation: ",F.foundationLessons||0,"/10"),a.createElement("span",null,"🎮 Gaming: ",F.gamingLessons||0,"/10"),a.createElement("span",null,"🎬 Movies: ",F.moviesLessons||0,"/10")),a.createElement("div",{className:"flex items-center space-x-2 text-xs text-gray-500"},a.createElement("span",null,"🍕 Food: ",F.foodLessons||0,"/10"),a.createElement("span",null,"✈️ Travel: ",F.travelLessons||0,"/10"),a.createElement("span",null,"⚽ Sports: ",F.sportsLessons||0,"/10"),a.createElement("span",{className:"font-semibold"},"⚡ Total XP: ",F.totalXP))),a.createElement("div",{className:"text-right"},a.createElement("div",{className:"text-lg font-bold text-blue-600"},F.progress,"%"),a.createElement("div",{className:"text-xs text-gray-500"},F.totalLessons,"/60 lessons"),a.createElement("div",{className:"text-xs text-green-600 font-semibold mt-1"},F.totalXP," XP"))))))),a.createElement("div",{className:"grid lg:grid-cols-2 gap-8"},a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"⚡ Ações Rápidas"),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:()=>n("portal"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg text-sm transition-colors"},"📱 Visualizar Portal do Estudante"),a.createElement("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-lg text-sm transition-colors"},"📊 Exportar Relatório Firebase (6 Séries)"),a.createElement("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-lg text-sm transition-colors"},"📧 Mensagem para Todos os Alunos"),a.createElement("button",{onClick:()=>window.location.reload(),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg text-sm transition-colors"},"🔄 Atualizar Dados Firebase"))),a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"📈 Status do Sistema (6 Séries)"),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🔥 Firebase Connection"),a.createElement("span",{className:"text-green-600 font-semibold"},"● Connected")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"📊 React System"),a.createElement("span",{className:"text-green-600 font-semibold"},"● Running")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🌟 Foundation Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🎮 Gaming Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🎬 Movies Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🍕 Food Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"✈️ Travel Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"⚽ Sports Series"),a.createElement("span",{className:"text-green-600 font-semibold"},"10/10 Active")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"📊 Student Data"),a.createElement("span",{className:"text-blue-600 font-semibold"},"Real Firebase (6 Series)")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"⚡ XP Tracking"),a.createElement("span",{className:"text-green-600 font-semibold"},"● Persistent")),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-gray-600 text-sm"},"🎯 Total Lessons"),a.createElement("span",{className:"text-purple-600 font-semibold"},"60 Available")))))),a.createElement("style",{jsx:!0},`
        .card-hover {
          transition: all 0.3s ease;
        }
        
        .card-hover:hover {
          transform: translateY(-2px);
          box-shadow: 0 20px 40px rgba(31, 41, 55, 0.15);
        }
        
        .elegant-input {
          background: white;
          border: 1px solid #d1d5db;
          transition: all 0.2s ease;
        }
        
        .elegant-input:focus {
          outline: none;
          border-color: #3b82f6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .sophisticated-bg {
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
          min-height: 100vh;
        }
      `))}const hs=[{id:"foundation-01",title:"Basic Greetings",description:"Learn essential greeting phrases and introductions",duration:"35s",icon:"🌟",audioFile:"audio/a1-foundation/audio-01-greetings.mp3",questions:[{question:"What is the woman's name?",options:["Sara","Sarah","Sandra","Samantha"],correct:1},{question:"Where is she from?",options:["Brazil","USA","Canada","Mexico"],correct:2},{question:"What is her job?",options:["Teacher","Nurse","Doctor","Engineer"],correct:1},{question:"How old is she?",options:["23","24","25","26"],correct:2},{question:"What does she say at the end?",options:["Goodbye","See you later","Have a great day","Take care"],correct:2}]},{id:"foundation-02",title:"Family Introduction",description:"Learn family members and relationship vocabulary",duration:"38s",icon:"👨‍👩‍👧‍👦",audioFile:"audio/a1-foundation/audio-02-family.mp3",questions:[{question:"How many people are in the family?",options:["3","4","5","6"],correct:1},{question:"What does the mother like?",options:["Reading","Cooking","Dancing","Shopping"],correct:1},{question:"How old is the sister?",options:["18","20","22","25"],correct:1},{question:"Where does the father work?",options:["Hospital","School","Bank","Restaurant"],correct:2},{question:"Where do they live?",options:["Small apartment","Big house","Small house","Big apartment"],correct:1}]},{id:"foundation-03",title:"Daily Routine",description:"Express daily activities and time management",duration:"40s",icon:"⏰",audioFile:"audio/a1-foundation/audio-03-routine.mp3",questions:[{question:"What time does he wake up?",options:["6 o'clock","7 o'clock","8 o'clock","9 o'clock"],correct:1},{question:"How does he go to work?",options:["By car","Walking","By bus","By bike"],correct:1},{question:"What time does he go to bed?",options:["9 o'clock","10 o'clock","11 o'clock","12 o'clock"],correct:1},{question:"What does he eat for breakfast?",options:["Cereal","Eggs","Bread with butter","Fruit"],correct:2},{question:"What time does he start work?",options:["8 o'clock","9 o'clock","8:30","9:30"],correct:1}]},{id:"foundation-04",title:"Food and Drinks",description:"Learn about meals, food types, and dining",duration:"36s",icon:"🍕",audioFile:"audio/a1-foundation/audio-04-food.mp3",questions:[{question:"What is his favorite drink?",options:["Coffee","Tea","Orange juice","Water"],correct:2},{question:"What dessert does he want?",options:["Ice cream","Chocolate cake","Apple pie","Cookies"],correct:1},{question:"When does he come to the restaurant?",options:["Every day","Every weekend","Every month","Every week"],correct:1},{question:"What food does he like?",options:["Pizza only","Hamburgers only","Pizza and hamburgers","Salad"],correct:2},{question:"How is the food at the restaurant?",options:["Expensive","Delicious","Bad","Cold"],correct:1}]},{id:"foundation-05",title:"Weather and Clothes",description:"Describe weather conditions and clothing",duration:"37s",icon:"🌤️",audioFile:"audio/a1-foundation/audio-05-weather.mp3",questions:[{question:"What is the weather like today?",options:["Cold and rainy","Sunny and warm","Cloudy","Windy"],correct:1},{question:"What did he wear yesterday?",options:["T-shirt and shorts","Jacket and boots","Jeans and sweater","Dress"],correct:1},{question:"Why does he love summer?",options:["No school","Nice weather","Long days","Vacation time"],correct:1},{question:"What is he wearing today?",options:["Jacket and boots","Blue t-shirt and white shorts","Jeans and sweater","Black pants"],correct:1},{question:"What will tomorrow's weather be like?",options:["Sunny","Rainy","Cloudy","Hot"],correct:2}]},{id:"foundation-06",title:"Shopping",description:"Learn shopping vocabulary and money expressions",duration:"39s",icon:"🛒",audioFile:"audio/a1-foundation/audio-06-shopping.mp3",questions:[{question:"What fruits does he want to buy?",options:["Apples and oranges only","Bananas only","Apples, bananas, and oranges","Only oranges"],correct:2},{question:"When does the supermarket close?",options:["9 at night","10 at night","11 at night","8 at night"],correct:1},{question:"How does he pay?",options:["Cash","Credit card","Check","Debit card"],correct:1},{question:"What other things does he need to buy?",options:["Milk and eggs","Bread only","Milk, eggs, and bread","Just milk"],correct:2},{question:"How long does shopping take?",options:["20 minutes","30 minutes","40 minutes","1 hour"],correct:1}]},{id:"foundation-07",title:"Hobbies and Free Time",description:"Express interests, hobbies, and leisure activities",duration:"35s",icon:"🎨",audioFile:"audio/a1-foundation/audio-07-hobbies.mp3",questions:[{question:"What instrument does he play?",options:["Piano","Guitar","Drums","Violin"],correct:1},{question:"When does he play this instrument?",options:["Every day","Weekdays","Weekends","Sometimes"],correct:2},{question:"What is his favorite hobby?",options:["Reading","Photography","Singing","Dancing"],correct:1},{question:"What does he not like doing?",options:["Singing","Dancing","Reading","Playing guitar"],correct:1},{question:"What does he take pictures of?",options:["People","Buildings","Nature and animals","Cars"],correct:2}]},{id:"foundation-08",title:"Transportation",description:"Learn about vehicles, directions, and travel",duration:"38s",icon:"🚗",audioFile:"audio/a1-foundation/audio-08-transportation.mp3",questions:[{question:"How does he usually go to work?",options:["By car","Walking","By bus","By bike"],correct:1},{question:"When does he drive his car?",options:["Every day","When it rains","On weekends","Never"],correct:2},{question:"Why doesn't he like the subway?",options:["Too expensive","Too crowded","Too slow","Too far"],correct:1},{question:"Where does he live?",options:["Countryside","City center","Suburbs","Near the park"],correct:1},{question:"Where is the bus stop?",options:["Near his work","In front of his building","At the corner","Far from home"],correct:1}]},{id:"foundation-09",title:"Health and Body",description:"Learn body parts, health, and medical vocabulary",duration:"40s",icon:"⚕️",audioFile:"audio/a1-foundation/audio-09-health.mp3",questions:[{question:"How often does he exercise?",options:["Every day","Three times a week","Once a week","Never"],correct:1},{question:"How many glasses of water does he drink?",options:["6","7","8","10"],correct:2},{question:"How many hours does he sleep?",options:["7 hours","8 hours","9 hours","6 hours"],correct:1},{question:"How often does he brush his teeth?",options:["Once a day","Twice a day","Three times a day","Never"],correct:1},{question:"What doesn't he do?",options:["Exercise","Eat vegetables","Smoke and drink alcohol","Sleep"],correct:2}]},{id:"foundation-10",title:"Future Plans",description:"Express future intentions, goals, and dreams",duration:"37s",icon:"🚀",audioFile:"audio/a1-foundation/audio-10-future.mp3",questions:[{question:"Where will he travel next month?",options:["Asia","Europe","America","Africa"],correct:1},{question:"How long will he stay?",options:["One week","Two weeks","Three weeks","One month"],correct:1},{question:"What will he do after his trip?",options:["Study more","Start a new job","Buy a house","Move cities"],correct:1},{question:"Which countries will he visit?",options:["France and Italy","Italy and Spain","France, Italy, and Spain","Only France"],correct:2},{question:"What languages is he learning?",options:["Spanish","French","French and Italian","Italian"],correct:2}]}];function o2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","foundation"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Foundation progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: New student initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"foundation-01":{status:"completed",score:5,attempts:1},"foundation-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","foundation"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"foundation"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=hs.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Foundation Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=hs.findIndex(C=>C.id===s.id),T=hs[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🎉 Congratulations! Foundation Course Complete! 🌟"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-green-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-blue-100 text-blue-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"🔥"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Foundation progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100"},a.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-blue-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-blue-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"🌟"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"A1 Foundation Course"),a.createElement("p",{className:"text-blue-100 mb-4"},"Complete English basics with 10 interactive audio lessons"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🎯 Questions match audio content • 📊 Track progress • 🏆 Earn XP!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-slate-200 border-2 border-blue-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-blue-600 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Total XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},hs.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-blue-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-blue-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-blue-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-blue-600 text-sm hover:underline"},"← Back to Foundation"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",hs.findIndex(f=>f.id===s.id)+1," of ",hs.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-blue-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-blue-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-slate-200 border-2 border-blue-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"🎧 Listen to the Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-700 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-blue-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🎯 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🔥 Save to Firebase - Ready! 🌟":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(i2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(a2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function i2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"🌟":"📝"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Perfect Score!":i>=4?"Great Job!":"Lesson Complete!"),a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-blue-700 mb-2"},"🎉 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Foundation Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Foundation")))))}function a2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"📝 Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const ms=[{id:"gaming-01",title:"My Gaming PC Setup",description:"Building the perfect gaming computer setup",duration:"38s",icon:"🖥️",audioFile:"audio/a1-gaming/audio-01-pc-setup.mp3",questions:[{question:"What graphics card does she have?",options:["RTX 3070","RTX 4070","GTX 1080","RX 6700"],correct:1},{question:"How much RAM is in her computer?",options:["8GB","16GB","32GB","64GB"],correct:1},{question:"What type of keyboard switches does she use?",options:["Blue switches","Brown switches","Red switches","Black switches"],correct:2},{question:"How much did she spend on her setup?",options:["$2000","$3000","$4000","$5000"],correct:1},{question:"What happens to her RGB lighting during games?",options:["Turns off","Changes colors when she gets kills","Stays red","Flashes randomly"],correct:1}]},{id:"gaming-02",title:"Online Gaming with Friends",description:"Playing with friends and communicating online",duration:"36s",icon:"🎮",audioFile:"audio/a1-gaming/audio-02-online-gaming.mp3",questions:[{question:"What game do they play together?",options:["Counter-Strike","Valorant","Overwatch","Call of Duty"],correct:1},{question:"What platform do they use to communicate?",options:["Skype","Discord","TeamSpeak","WhatsApp"],correct:1},{question:"What is her role in the team?",options:["Tank","DPS","Support","Sniper"],correct:2},{question:"How many games did they win last week?",options:["5","6","7","8"],correct:2},{question:"Where does her best friend live?",options:["Rio de Janeiro","São Paulo","Belo Horizonte","Brasília"],correct:1}]},{id:"gaming-03",title:"My Favorite Game Genres",description:"Different types of games and their characteristics",duration:"40s",icon:"🕹️",audioFile:"audio/a1-gaming/audio-03-game-genres.mp3",questions:[{question:"What is her favorite game genre?",options:["FPS","RPG","Strategy","Racing"],correct:1},{question:"Which RPG is her favorite?",options:["Skyrim","Final Fantasy","The Witcher 3","Dark Souls"],correct:2},{question:"How many hours did she play her favorite RPG?",options:["50 hours","75 hours","100 hours","150 hours"],correct:2},{question:"Why doesn't she like horror games?",options:["Bad graphics","Too expensive","Too scary","Boring story"],correct:2},{question:"Where does she find indie games?",options:["PlayStation Store","Steam","Epic Games","Xbox Store"],correct:1}]},{id:"gaming-04",title:"Esports Tournament",description:"Professional gaming competitions and events",duration:"39s",icon:"🏆",audioFile:"audio/a1-gaming/audio-04-esports-tournament.mp3",questions:[{question:"What game is the tournament for?",options:["Valorant","Counter-Strike","League of Legends","FIFA"],correct:2},{question:"How many teams are participating?",options:["16","24","32","64"],correct:2},{question:"How much is the entry fee per player?",options:["25 reais","50 reais","75 reais","100 reais"],correct:1},{question:"How much does first place win?",options:["3,000 reais","4,000 reais","5,000 reais","6,000 reais"],correct:2},{question:"How many hours do they practice daily?",options:["2 hours","3 hours","4 hours","5 hours"],correct:2}]},{id:"gaming-05",title:"Streaming on Twitch",description:"Broadcasting gameplay and building audience",duration:"37s",icon:"📺",audioFile:"audio/a1-gaming/audio-05-streaming-twitch.mp3",questions:[{question:"How many followers does she have on Twitch?",options:["650","750","850","950"],correct:2},{question:"Which days does she stream?",options:["Monday and Wednesday","Tuesday and Thursday","Friday and Saturday","Sunday and Monday"],correct:1},{question:"What time does she start streaming?",options:["7 PM","8 PM","9 PM","10 PM"],correct:1},{question:"How many viewers was her personal record?",options:["150","200","250","300"],correct:1},{question:"What type of microphone does she use?",options:["Red microphone","Black microphone","Blue microphone","Silver microphone"],correct:2}]},{id:"gaming-06",title:"Game Review Channel",description:"Analyzing and rating video games",duration:"41s",icon:"⭐",audioFile:"audio/a1-gaming/audio-06-game-reviews.mp3",questions:[{question:"What score did she give FIFA?",options:["6 out of 10","7 out of 10","8 out of 10","9 out of 10"],correct:1},{question:"What problem did she find with FIFA?",options:["Bad graphics","Slow gameplay","Too many bugs","Expensive price"],correct:2},{question:"How many hours did she play before reviewing?",options:["20 hours","25 hours","30 hours","35 hours"],correct:2},{question:"How many views did her video get on the first day?",options:["3,000","4,000","5,000","6,000"],correct:2},{question:"What type of game will she review next week?",options:["Racing game","Sports game","Horror game","Puzzle game"],correct:2}]},{id:"gaming-07",title:"Mobile Gaming Addiction",description:"Gaming on smartphones and tablets",duration:"35s",icon:"📱",audioFile:"audio/a1-gaming/audio-07-mobile-gaming.mp3",questions:[{question:"Which mobile game does she play?",options:["Free Fire","PUBG Mobile","Call of Duty Mobile","Fortnite Mobile"],correct:1},{question:"How many hours does she play daily?",options:["1 hour","2 hours","3 hours","4 hours"],correct:1},{question:"How much money has she spent this year?",options:["100 reais","150 reais","200 reais","250 reais"],correct:2},{question:"How many players are in Battle Royale mode?",options:["50","75","100","150"],correct:2},{question:"What happens to her phone during intensive games?",options:["Gets slow","Gets hot","Loses battery","Crashes"],correct:1}]},{id:"gaming-08",title:"Gaming Nostalgia",description:"Classic games and retro gaming culture",duration:"42s",icon:"🕰️",audioFile:"audio/a1-gaming/audio-08-gaming-nostalgia.mp3",questions:[{question:"What was her first gaming console?",options:["Nintendo 64","PlayStation 1","Sega Genesis","Game Boy"],correct:1},{question:"How old was she when she got her first console?",options:["6 years old","7 years old","8 years old","9 years old"],correct:2},{question:"Which classic game does she mention?",options:["Super Mario","Sonic","Crash Bandicoot","Street Fighter"],correct:2},{question:"How often did they take turns with the controller?",options:["Every 15 minutes","Every 30 minutes","Every 45 minutes","Every hour"],correct:1},{question:"What does she use to play old games now?",options:["Original consoles","Remasters","Emulators","Mobile apps"],correct:2}]},{id:"gaming-09",title:"Perfect Gaming Setup",description:"Creating the ideal gaming environment",duration:"44s",icon:"🛠️",audioFile:"audio/a1-gaming/audio-09-perfect-setup.mp3",questions:[{question:"Where is her gaming room located?",options:["Bedroom","Living room","Basement","Attic"],correct:2},{question:"What color are the walls painted?",options:["White","Blue","Red","Black"],correct:3},{question:"How many monitors fit on her desk?",options:["2","3","4","5"],correct:1},{question:"How much did her gaming chair cost?",options:["1,500 reais","2,000 reais","2,500 reais","3,000 reais"],correct:2},{question:"How often does she upgrade her setup?",options:["Every year","Every two years","Every three years","Every five years"],correct:1}]},{id:"gaming-10",title:"Virtual Reality Future",description:"VR technology and immersive gaming experiences",duration:"40s",icon:"🥽",audioFile:"audio/a1-gaming/audio-10-virtual-reality.mp3",questions:[{question:"Which VR headset did she try?",options:["PlayStation VR","Oculus Quest 2","HTC Vive","Valve Index"],correct:1},{question:"How much do VR headsets cost in Brazil?",options:["2,000 reais","2,500 reais","3,000 reais","3,500 reais"],correct:2},{question:"In how many years does she think VR will be more accessible?",options:["3 years","4 years","5 years","6 years"],correct:2},{question:"What is still a problem with VR for some people?",options:["High price","Motion sickness","Heavy weight","Bad graphics"],correct:1},{question:"When is she planning to buy her own VR headset?",options:["This year","Next year","In 2 years","In 3 years"],correct:1}]}];function l2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","gaming"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Gaming progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: New gamer initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"gaming-01":{status:"completed",score:5,attempts:1},"gaming-02":{status:"completed",score:4,attempts:1}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed",series:"gaming"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","gaming"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"gaming"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),Object.keys(pe.lessons).length===10&&console.log("🏆 GAMING WORLD COMPLETE! Game Master Achievement Unlocked!"),console.log("✅ Firebase Gaming Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Gaming Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=ms.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Gaming Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=ms.findIndex(C=>C.id===s.id),T=ms[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🎉 Congratulations! Gaming World Complete! 🎮 Game Master Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-purple-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-purple-100 text-purple-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-violet-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"🎮"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Gaming World progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-violet-100"},a.createElement("div",{className:"bg-gradient-to-r from-purple-600 to-violet-700 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-violet-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-purple-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"🎮"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Gaming World"),a.createElement("p",{className:"text-purple-100 mb-4"},"Learn English through gaming vocabulary and Brazilian gaming culture"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🎯 Questions match audio content • 🏆 Esports • 🎧 Gaming English!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-purple-100 to-violet-200 border-2 border-purple-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-purple-700 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Gaming XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ms.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-purple-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-purple-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-purple-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-violet-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-purple-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-purple-600 text-sm hover:underline"},"← Back to Gaming World"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",ms.findIndex(f=>f.id===s.id)+1," of ",ms.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-purple-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-purple-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-purple-100 to-violet-200 border-2 border-purple-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-purple-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"🎮 Listen to the Gaming Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Gaming Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Gaming Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-purple-500 to-violet-600 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-purple-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🎮 Listen to gaming content and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-purple-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-purple-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-purple-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🔥 Save Gaming Progress - Ready! 🎮":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(c2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(u2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function c2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"🎮":"📝"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Perfect Gaming Score!":i>=4?"Great Gaming!":"Lesson Complete!"),a.createElement("div",{className:"bg-purple-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," Gaming XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-purple-100 to-violet-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-purple-700 mb-2"},"🎉 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"🎮 Perfect Gaming Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Gaming Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Gaming World")))))}function u2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"🎮 Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const fs=[{id:"movies-01",title:"Going to the Cinema",description:"Learn about cinema experiences and movie outings",duration:"38s",icon:"🎬",audioFile:"audio/a1-movies/audio-01-cinema-date.mp3",questions:[{question:"Who did she go to the cinema with?",options:["Her sister","Her friend","Her boyfriend","Her mom"],correct:2},{question:"How much did each ticket cost?",options:["20 reais","25 reais","30 reais","35 reais"],correct:1},{question:"What type of movie did they watch?",options:["Comedy","Horror","Marvel movie","Romance"],correct:2},{question:"How early did they arrive?",options:["10 minutes","15 minutes","20 minutes","30 minutes"],correct:1},{question:"Where did they go after the movie?",options:["Home","McDonald's","Another cinema","The park"],correct:1}]},{id:"movies-02",title:"Netflix Night at Home",description:"Streaming and home entertainment vocabulary",duration:"36s",icon:"📺",audioFile:"audio/a1-movies/audio-02-netflix-night.mp3",questions:[{question:"Which series did she watch?",options:["The Crown","Stranger Things","Bridgerton","Money Heist"],correct:1},{question:"How many episodes did she watch?",options:["2","3","4","5"],correct:1},{question:"What did she drink while watching?",options:["Coffee","Tea","Hot chocolate","Soda"],correct:2},{question:"What time did she start watching?",options:["7 PM","8 PM","9 PM","10 PM"],correct:1},{question:"How many times did she pause?",options:["Once","Twice","Three times","Four times"],correct:1}]},{id:"movies-03",title:"Movie Genres",description:"Express preferences about different film types",duration:"40s",icon:"🎭",audioFile:"audio/a1-movies/audio-03-movie-genres.mp3",questions:[{question:"What is her favorite movie genre?",options:["Action","Horror","Romantic comedies","Science fiction"],correct:2},{question:"Which actor is in her favorite rom-com?",options:["Brad Pitt","Ryan Gosling","Leonardo DiCaprio","Will Smith"],correct:1},{question:"Why does she hate horror movies?",options:["They're boring","They give her nightmares","They're too long","They're expensive"],correct:1},{question:"How old is her nephew?",options:["4 years old","5 years old","6 years old","7 years old"],correct:2},{question:"What does she think about science fiction?",options:["It's boring","It's scary","It's interesting but complicated","It's her favorite"],correct:2}]},{id:"movies-04",title:"Binge Watching",description:"Learn about marathon viewing and streaming habits",duration:"39s",icon:"📱",audioFile:"audio/a1-movies/audio-04-binge-watching.mp3",questions:[{question:"Which series did she binge watch?",options:["Stranger Things","Wednesday","The Crown","Emily in Paris"],correct:1},{question:"How many episodes are in the first season?",options:["6","7","8","10"],correct:2},{question:"What did she order on Saturday?",options:["Chinese food","Pizza","Hamburgers","Sushi"],correct:1},{question:"What time did she start on Saturday?",options:["8 AM","9 AM","10 AM","11 AM"],correct:1},{question:"How many episodes will she watch per day next weekend?",options:["1","2","3","4"],correct:1}]},{id:"movies-05",title:"Movie Reviews",description:"Writing and sharing opinions about films",duration:"37s",icon:"⭐",audioFile:"audio/a1-movies/audio-05-movie-reviews.mp3",questions:[{question:"How many stars did she give Spider-Man?",options:["3 out of 5","4 out of 5","5 out of 5","2 out of 5"],correct:1},{question:"What was excellent about the movie?",options:["The story","The music","The acting","The length"],correct:2},{question:"How many views did her review get in the first hour?",options:["300","400","500","600"],correct:2},{question:"How many times does she watch movies before reviewing?",options:["Once","Twice","Three times","Four times"],correct:1},{question:"How does writing reviews help her English?",options:["Grammar practice","Speaking practice","Vocabulary improvement","Listening practice"],correct:2}]},{id:"movies-06",title:"Streaming Services",description:"Compare platforms and subscription costs",duration:"41s",icon:"💻",audioFile:"audio/a1-movies/audio-06-streaming-services.mp3",questions:[{question:"How much does Netflix cost per month?",options:["30 reais","35 reais","40 reais","45 reais"],correct:1},{question:"Which service costs 15 reais monthly?",options:["Netflix","Disney Plus","Amazon Prime","HBO Max"],correct:2},{question:"How many hours does she watch daily?",options:["3 hours","4 hours","5 hours","6 hours"],correct:1},{question:"Which show does she mention from Netflix?",options:["Wednesday","Stranger Things","Squid Game","The Crown"],correct:2},{question:"What extra benefit does Amazon Prime include?",options:["Free movies","Free shipping","Free music","Free books"],correct:1}]},{id:"movies-07",title:"Cinema Date Night",description:"Dating and social movie experiences",duration:"35s",icon:"💕",audioFile:"audio/a1-movies/audio-07-cinema-first-date.mp3",questions:[{question:"What time are they meeting?",options:["7:00 PM","7:30 PM","8:00 PM","8:30 PM"],correct:1},{question:"Where did she meet her date?",options:["Instagram","Facebook","Tinder","Work"],correct:2},{question:"What type of movie did she choose?",options:["Horror","Action","Romantic comedy","Drama"],correct:2},{question:"What color dress is she wearing?",options:["Red","Black","Blue","White"],correct:2},{question:"Why are cinema dates perfect for first meetings?",options:["They're cheap","Movies are fun","You can talk about the movie","It's dark"],correct:2}]},{id:"movies-08",title:"Classic vs Modern",description:"Compare old and new cinema styles",duration:"42s",icon:"🎞️",audioFile:"audio/a1-movies/audio-08-classic-vs-modern.mp3",questions:[{question:"Which classic movie did she watch?",options:["Gone with the Wind","Casablanca","Roman Holiday","Singin' in the Rain"],correct:1},{question:"What year was the classic movie made?",options:["1940","1941","1942","1943"],correct:2},{question:"Which modern movie did she compare it to?",options:["Avatar","Titanic","The Avengers","Star Wars"],correct:1},{question:"What do classic movies have that's better?",options:["Special effects","Sound quality","Storytelling and dialogue","Action scenes"],correct:2},{question:"What do modern films have that's incredible?",options:["Stories","Actors","Music","Special effects and sound"],correct:3}]},{id:"movies-09",title:"Theater Experience",description:"IMAX, sound systems, and cinema atmosphere",duration:"44s",icon:"🏛️",audioFile:"audio/a1-movies/audio-09-theater-experience.mp3",questions:[{question:"Which movie did she watch in IMAX?",options:["Avatar","Dune","Top Gun","Spider-Man"],correct:1},{question:"Which row does she prefer for the best viewing angle?",options:["Row F","Row G","Row H","Row I"],correct:2},{question:"What made her seat vibrate?",options:["The air conditioning","Other people","Sound effects","The movie length"],correct:2},{question:"What does she find annoying at the cinema?",options:["Expensive tickets","People talking","Loud sound","Long lines"],correct:1},{question:"When does she think theaters are worth the expense?",options:["For any movie","For romantic films","For big blockbusters","For horror movies"],correct:2}]},{id:"movies-10",title:"Awards Night",description:"Oscar parties and movie award celebrations",duration:"40s",icon:"🏆",audioFile:"audio/a1-movies/audio-10-awards-night.mp3",questions:[{question:"How many friends came to her Oscar party?",options:["6","7","8","9"],correct:2},{question:"What time did they start watching in Brazilian time?",options:["8 PM","9 PM","10 PM","11 PM"],correct:1},{question:"How many categories did she guess correctly?",options:["5","6","7","8"],correct:1},{question:"Who won their betting pool?",options:["She did","Carlos","Her sister","Nobody"],correct:1},{question:"What prize did the winner receive?",options:["Money","A movie ticket","A bottle of champagne","A trophy"],correct:2}]}];function d2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","movies"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Movies progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: New cinema fan initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"movies-01":{status:"completed",score:5,attempts:1},"movies-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","movies"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"movies"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=fs.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Movies Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=fs.findIndex(C=>C.id===s.id),T=fs[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🎬 Congratulations! Movie Magic Course Complete! 🏆 Cinema Master Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-red-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-red-100 text-red-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-rose-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"🎬"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Movies progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-rose-100"},a.createElement("div",{className:"bg-gradient-to-r from-red-600 to-rose-700 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-rose-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-red-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"🎬"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Movie Magic Course"),a.createElement("p",{className:"text-red-100 mb-4"},"Learn English through cinema and entertainment!"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🎭 Cinema vocabulary • 📱 Streaming culture • 🏆 Earn XP!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-red-100 to-rose-200 border-2 border-red-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-red-700 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Cinema XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fs.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-red-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-red-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-red-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-rose-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-red-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-red-600 text-sm hover:underline"},"← Back to Movie Magic"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",fs.findIndex(f=>f.id===s.id)+1," of ",fs.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-red-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-red-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-red-100 to-rose-200 border-2 border-red-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-red-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-red-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"🎬 Listen to the Cinema Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Movies Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Movies Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-red-500 to-rose-600 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-red-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🎬 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-red-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-red-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-red-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🎬 Save to Firebase - Ready! 🏆":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(h2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(m2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function h2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"🎬":"🎭"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Cinema Master!":i>=4?"Great Movie Knowledge!":"Lesson Complete!"),a.createElement("div",{className:"bg-red-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," Cinema XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-red-100 to-rose-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-red-700 mb-2"},"🎬 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Movie Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Movie Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Movie Magic")))))}function m2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"🎬 Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const ps=[{id:"food-01",title:"Cooking Pasta at Home",description:"Learn cooking vocabulary and kitchen experiences",duration:"38s",icon:"🍝",audioFile:"audio/a1-food/audio-01-cooking-pasta.mp3",questions:[{question:"How long was the pasta supposed to boil?",options:["10 minutes","12 minutes","15 minutes","20 minutes"],correct:1},{question:"What herb did she use from her garden?",options:["Oregano","Rosemary","Basil","Thyme"],correct:2},{question:"Who helped her grate the cheese?",options:["Her sister","Her mom","Maria","Her boyfriend"],correct:2},{question:"How long did she accidentally cook the pasta?",options:["15 minutes","18 minutes","20 minutes","25 minutes"],correct:2},{question:"What does she think about cooking at home?",options:["It's too difficult","It's too expensive","It's better than delivery","It's too time-consuming"],correct:2}]},{id:"food-02",title:"Brazilian BBQ Weekend",description:"Traditional churrasco and Brazilian food culture",duration:"36s",icon:"🥩",audioFile:"audio/a1-food/audio-02-brazilian-bbq.mp3",questions:[{question:"Who was the grillmaster?",options:["Her father","Uncle João","Her brother","Her cousin"],correct:1},{question:"What time did they start eating?",options:["1 PM","2 PM","3 PM","4 PM"],correct:1},{question:"What did she make with bacon?",options:["Salad","Farofa","Rice","Beans"],correct:1},{question:"How many people attended the barbecue?",options:["12","13","15","18"],correct:2},{question:"What type of music did they listen to?",options:["Rock","Pop","Sertanejo","Funk"],correct:2}]},{id:"food-03",title:"Pizza Delivery Disaster",description:"Food delivery experiences and disappointments",duration:"40s",icon:"🍕",audioFile:"audio/a1-food/audio-03-pizza-delivery.mp3",questions:[{question:"How much did the pizza cost?",options:["30 reais","35 reais","40 reais","45 reais"],correct:1},{question:"How long was the pizza supposed to take?",options:["20 minutes","25 minutes","30 minutes","45 minutes"],correct:2},{question:"How long did she actually wait?",options:["45 minutes","1 hour","1 hour 15 minutes","1 hour 30 minutes"],correct:2},{question:"Why was the delivery late?",options:["Traffic jam","Wrong order","Delivery guy got lost","Restaurant was busy"],correct:2},{question:"What will she make next time instead?",options:["Soup","Salad","Pasta","Sandwich"],correct:3}]},{id:"food-04",title:"Fancy Restaurant Date",description:"Fine dining and restaurant experiences",duration:"39s",icon:"🍽️",audioFile:"audio/a1-food/audio-04-fancy-restaurant.mp3",questions:[{question:"What language was the menu written in?",options:["Portuguese","English","Italian","Spanish"],correct:2},{question:"What did they order as the main course?",options:["Pasta and pizza","Risotto and salmon","Steak and chicken","Soup and salad"],correct:1},{question:"How much did the wine cost?",options:["60 reais","70 reais","80 reais","90 reais"],correct:2},{question:"How much did they spend in total?",options:["200 reais","220 reais","240 reais","260 reais"],correct:2},{question:"How did she feel about the portion sizes?",options:["Perfect","Too big","Too tiny","Just right"],correct:2}]},{id:"food-05",title:"Learning to Bake Bread",description:"Baking skills and homemade bread making",duration:"37s",icon:"🍞",audioFile:"audio/a1-food/audio-05-baking-bread.mp3",questions:[{question:"How many YouTube videos did she watch?",options:["3","4","5","6"],correct:2},{question:"How was her first bread attempt?",options:["Perfect","Good","Okay","Hard as a rock"],correct:3},{question:"How long did it take to perfect the recipe?",options:["2 weeks","3 weeks","4 weeks","1 month"],correct:1},{question:"When does she bake bread now?",options:["Every day","Every Sunday morning","Every weekend","Once a month"],correct:1},{question:"Who gave her the recipe?",options:["Her mother","Her aunt","Her grandmother","Her sister"],correct:2}]},{id:"food-06",title:"Street Food Adventure",description:"Exploring São Paulo food districts and flavors",duration:"41s",icon:"🥟",audioFile:"audio/a1-food/audio-06-street-food.mp3",questions:[{question:"Which district did she visit first?",options:["Vila Madalena","Liberdade","Centro","Moema"],correct:1},{question:"What did takoyaki contain?",options:["Shrimp","Octopus","Fish","Chicken"],correct:1},{question:"How much did 6 pieces of takoyaki cost?",options:["12 reais","15 reais","18 reais","20 reais"],correct:1},{question:"How much was the gourmet hot dog?",options:["15 reais","16 reais","18 reais","20 reais"],correct:2},{question:"What does she think about street food compared to fast food chains?",options:["It's more expensive","It's fresher and more interesting","It's less healthy","It's the same quality"],correct:1}]},{id:"food-07",title:"Healthy Eating Journey",description:"Diet changes and healthy lifestyle choices",duration:"35s",icon:"🥗",audioFile:"audio/a1-food/audio-07-healthy-eating.mp3",questions:[{question:"When did she start her healthy eating journey?",options:["2 months ago","3 months ago","4 months ago","6 months ago"],correct:1},{question:"What vegetables does she put in her smoothie?",options:["Carrots","Broccoli","Spinach","Cucumber"],correct:2},{question:"When does she do meal prep?",options:["Saturdays","Sundays","Mondays","Daily"],correct:1},{question:"How much weight has she lost?",options:["6 kilos","7 kilos","8 kilos","10 kilos"],correct:2},{question:"How often does she eat dark chocolate now?",options:["Once a week","Twice a week","Every day","Never"],correct:1}]},{id:"food-08",title:"Family Recipe Secrets",description:"Traditional recipes and family food traditions",duration:"42s",icon:"🍫",audioFile:"audio/a1-food/audio-08-family-recipe.mp3",questions:[{question:"Who originally had the secret recipe?",options:["Her grandmother","Her great-grandmother","Her mother","Her aunt"],correct:1},{question:"When did her mother teach her the recipe?",options:["Last Easter","Last Christmas","Her birthday","New Year"],correct:1},{question:"What is the secret ingredient?",options:["Vanilla","Cinnamon","Sea salt","Lemon"],correct:2},{question:"How many brigadeiros did she make for her birthday?",options:["30","40","50","60"],correct:2},{question:"What makes the secret ingredient special?",options:["Makes it sweeter","Makes it softer","Makes chocolate flavor more intense","Makes it last longer"],correct:2}]},{id:"food-09",title:"International Food Festival",description:"Global cuisine experiences and food diversity",duration:"44s",icon:"🌮",audioFile:"audio/a1-food/audio-09-food-festival.mp3",questions:[{question:"Where was the food festival located?",options:["Ibirapuera Park","Vila Madalena","Centro","Paulista Avenue"],correct:0},{question:"How many countries were represented?",options:["12","15","18","20"],correct:1},{question:"How much did the Mexican tacos cost?",options:["15 reais","18 reais","20 reais","22 reais"],correct:1},{question:"Which stands had the longest lines?",options:["Thai and Mexican","Indian and Thai","Japanese and Italian","Mexican and Indian"],correct:2},{question:"How long did they spend at the festival?",options:["4 hours","5 hours","6 hours","7 hours"],correct:1}]},{id:"food-10",title:"Opening My Own Restaurant",description:"Restaurant business dreams and entrepreneurship",duration:"40s",icon:"🏪",audioFile:"audio/a1-food/audio-10-own-restaurant.mp3",questions:[{question:"How long has she been saving money?",options:["1 year","2 years","3 years","4 years"],correct:1},{question:"How much money has she saved?",options:["40,000 reais","45,000 reais","50,000 reais","60,000 reais"],correct:2},{question:"How much is the monthly rent?",options:["6,000 reais","7,000 reais","8,000 reais","9,000 reais"],correct:2},{question:"When is she planning to open?",options:["Next October","Next November","Next December","Next January"],correct:2},{question:"What type of food will she serve?",options:["International fusion","Italian classics","Asian street food","Brazilian comfort food with modern twist"],correct:3}]}];function f2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","food"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Food progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: Food explorer initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"food-01":{status:"completed",score:5,attempts:1},"food-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","food"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"food"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=ps.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Food Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=ps.findIndex(C=>C.id===s.id),T=ps[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🍕 Congratulations! Food Adventures Course Complete! 🍴 Chef Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-green-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-orange-100 text-orange-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"🍕"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Food Adventures progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100"},a.createElement("div",{className:"bg-gradient-to-r from-orange-600 to-orange-800 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-orange-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-orange-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"🍕"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Food Adventures Course"),a.createElement("p",{className:"text-orange-100 mb-4"},"Learn English through food culture and cooking experiences!"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🍴 Food vocabulary • 🥘 Brazilian cuisine • 🏆 Chef skills!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-200 border-2 border-orange-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-orange-600 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Food XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ps.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-orange-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-orange-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-orange-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-orange-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-orange-600 text-sm hover:underline"},"← Back to Food Adventures"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",ps.findIndex(f=>f.id===s.id)+1," of ",ps.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-orange-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-orange-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-200 border-2 border-orange-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-orange-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-orange-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"🍕 Listen to the Food Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-700 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-orange-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🍴 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-orange-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-orange-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-orange-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🔥 Save to Firebase - Ready! 🍕":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(p2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(g2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function p2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"🍕":"🍴"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Master Chef!":i>=4?"Great Food Knowledge!":"Lesson Complete!"),a.createElement("div",{className:"bg-orange-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," Food XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-orange-700 mb-2"},"🍕 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Chef Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Food Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Food Adventures")))))}function g2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"🍕 Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const gs=[{id:"travel-01",title:"First International Trip",description:"Learn about international travel experiences and airports",duration:"38s",icon:"✈️",audioFile:"audio/a1-travel/audio-01-first-international.mp3",questions:[{question:"Which airport did she fly from in São Paulo?",options:["Congonhas","Guarulhos","Viracopos","Santos Dumont"],correct:1},{question:"How long was the flight to Paris?",options:["9 hours","10 hours","11 hours","12 hours"],correct:2},{question:"Which Paris airport did she arrive at?",options:["Orly","Charles de Gaulle","Le Bourget","Beauvais"],correct:1},{question:"How much did the taxi cost?",options:["45 euros","50 euros","55 euros","60 euros"],correct:2},{question:"How much is 55 euros in reais?",options:["250 reais","300 reais","350 reais","400 reais"],correct:1}]},{id:"travel-02",title:"Beach Vacation in Thailand",description:"Tropical destinations and resort experiences",duration:"36s",icon:"🏖️",audioFile:"audio/a1-travel/audio-02-thailand-beach.mp3",questions:[{question:"How long did she stay in Thailand?",options:["1 week","2 weeks","3 weeks","1 month"],correct:1},{question:"Which city did she visit?",options:["Bangkok","Chiang Mai","Phuket","Krabi"],correct:2},{question:"How much did the resort cost per night?",options:["2,000 baht","2,500 baht","3,000 baht","3,500 baht"],correct:1},{question:"What is 2,500 baht in reais?",options:["300 reais","350 reais","400 reais","450 reais"],correct:2},{question:"How much did a street food meal cost?",options:["80 baht","100 baht","120 baht","150 baht"],correct:1}]},{id:"travel-03",title:"European Backpacking Adventure",description:"Multi-country travel and budget accommodation",duration:"40s",icon:"🎒",audioFile:"audio/a1-travel/audio-03-europe-backpacking.mp3",questions:[{question:"How many countries did they visit?",options:["6","7","8","9"],correct:2},{question:"How much did hostels cost per night?",options:["20-35 euros","25-40 euros","30-45 euros","35-50 euros"],correct:1},{question:"Which was the most expensive city?",options:["Paris","Amsterdam","Zurich","Brussels"],correct:2},{question:"How much did a sandwich cost in the expensive city?",options:["12 euros","15 euros","18 euros","20 euros"],correct:1},{question:"How much was the Eurail pass for 30 days?",options:["400 euros","450 euros","500 euros","550 euros"],correct:2}]},{id:"travel-04",title:"Business Trip to New York",description:"Professional travel and conference experiences",duration:"39s",icon:"🏙️",audioFile:"audio/a1-travel/audio-04-business-newyork.mp3",questions:[{question:"How many nights did she stay in New York?",options:["3 nights","4 nights","5 nights","6 nights"],correct:1},{question:"How much did the hotel cost per night?",options:["250 dollars","300 dollars","350 dollars","400 dollars"],correct:1},{question:"What was the conference about?",options:["Technology","Digital marketing","Finance","Healthcare"],correct:1},{question:"Which companies had speakers at the conference?",options:["Google and Apple","Facebook and Microsoft","Amazon and Tesla","Google, Facebook, and Amazon"],correct:3},{question:"Where did she eat pizza?",options:["Times Square","Central Park","Little Italy","Brooklyn"],correct:2}]},{id:"travel-05",title:"Family Vacation in Disney World",description:"Theme parks and family travel experiences",duration:"37s",icon:"🏰",audioFile:"audio/a1-travel/audio-05-disney-family.mp3",questions:[{question:"How old is her daughter?",options:["6 years old","7 years old","8 years old","9 years old"],correct:2},{question:"How many days did they stay?",options:["4 days","5 days","6 days","7 days"],correct:1},{question:"How much did park tickets cost per day?",options:["120 dollars","130 dollars","150 dollars","180 dollars"],correct:2},{question:"What was her daughter's favorite ride?",options:["Big Thunder Mountain","Space Mountain","Pirates of the Caribbean","Haunted Mansion"],correct:1},{question:"How much did a hamburger cost in the park?",options:["15 dollars","16 dollars","18 dollars","20 dollars"],correct:2}]},{id:"travel-06",title:"Solo Trip to Japan",description:"Independent travel and cultural experiences",duration:"41s",icon:"🇯🇵",audioFile:"audio/a1-travel/audio-06-solo-japan.mp3",questions:[{question:"How many days did she spend in Japan total?",options:["8 days","9 days","10 days","12 days"],correct:2},{question:"How many days did she stay in Tokyo?",options:["5 days","6 days","7 days","8 days"],correct:1},{question:"How much did the capsule hotel cost per night?",options:["3,500 yen","4,000 yen","4,500 yen","5,000 yen"],correct:1},{question:"What is 4,000 yen in reais?",options:["120 reais","150 reais","180 reais","200 reais"],correct:1},{question:"How long did the bullet train take from Tokyo to Kyoto?",options:["2 hours","2 hours 15 minutes","2 hours 30 minutes","3 hours"],correct:1}]},{id:"travel-07",title:"Road Trip Through Argentina",description:"Regional travel and border crossing experiences",duration:"35s",icon:"🚗",audioFile:"audio/a1-travel/audio-07-argentina-roadtrip.mp3",questions:[{question:"How long did the road trip take with stops?",options:["20 hours","22 hours","24 hours","26 hours"],correct:1},{question:"How many nights did they spend in small towns?",options:["1 night","2 nights","3 nights","4 nights"],correct:1},{question:"Which neighborhood did they stay in Buenos Aires?",options:["San Telmo","Recoleta","Palermo","Puerto Madero"],correct:2},{question:"How many nights did they stay in Buenos Aires?",options:["5 nights","6 nights","7 nights","8 nights"],correct:1},{question:"How much did they spend per day for both people?",options:["150 reais","180 reais","200 reais","250 reais"],correct:2}]},{id:"travel-08",title:"Amazon Rainforest Expedition",description:"Eco-tourism and nature adventures in Brazil",duration:"42s",icon:"🌿",audioFile:"audio/a1-travel/audio-08-amazon-expedition.mp3",questions:[{question:"Which city did they fly to first?",options:["Belém","Manaus","Porto Velho","Rio Branco"],correct:1},{question:"How long was the boat ride to the lodge?",options:["2 hours","3 hours","4 hours","5 hours"],correct:1},{question:"What type of dolphins did they see?",options:["Gray dolphins","Blue dolphins","Pink dolphins","White dolphins"],correct:2},{question:"Which big cat did they see from a distance?",options:["Puma","Ocelot","Jaguar","Margay"],correct:2},{question:"What did their guide teach them about?",options:["Cooking techniques","Medicinal plants and survival","Fishing methods","Local languages"],correct:1}]},{id:"travel-09",title:"Studying Abroad in Canada",description:"Educational travel and international study programs",duration:"44s",icon:"🍁",audioFile:"audio/a1-travel/audio-09-studying-canada.mp3",questions:[{question:"How long is her study program?",options:["4 months","5 months","6 months","8 months"],correct:2},{question:"How much does she pay for room and board per month?",options:["700 CAD","800 CAD","900 CAD","1000 CAD"],correct:1},{question:"How much does the English school cost monthly?",options:["1,000 CAD","1,200 CAD","1,400 CAD","1,500 CAD"],correct:1},{question:"What was the temperature yesterday?",options:["Minus 3°C","Minus 5°C","Minus 7°C","Minus 10°C"],correct:1},{question:"How long has she been there already?",options:["2 months","3 months","4 months","5 months"],correct:1}]},{id:"travel-10",title:"Dream Honeymoon in Maldives",description:"Luxury travel and dream vacation planning",duration:"40s",icon:"🏝️",audioFile:"audio/a1-travel/audio-10-maldives-honeymoon.mp3",questions:[{question:"How long have they been saving money?",options:["15 months","18 months","20 months","24 months"],correct:1},{question:"How much money have they saved?",options:["20,000 reais","23,000 reais","25,000 reais","30,000 reais"],correct:2},{question:"How much does the resort cost per night?",options:["700 dollars","800 dollars","900 dollars","1000 dollars"],correct:1},{question:"How many nights do they plan to stay?",options:["5 nights","6 nights","7 nights","8 nights"],correct:2},{question:"How much do flights cost for both of them?",options:["2,500 dollars","3,000 dollars","3,500 dollars","4,000 dollars"],correct:1}]}];function y2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","travel"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Travel progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: New traveler initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"travel-01":{status:"completed",score:5,attempts:1},"travel-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","travel"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"travel"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=gs.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Travel Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=gs.findIndex(C=>C.id===s.id),T=gs[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🌍 Congratulations! Travel Dreams Course Complete! ✈️ World Traveler Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-green-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-emerald-100 text-emerald-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-green-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"✈️"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Travel Dreams progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-green-100"},a.createElement("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-emerald-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-green-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"✈️"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Travel Dreams Course"),a.createElement("p",{className:"text-green-100 mb-4"},"Learn English through amazing travel adventures around the world!"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🌍 World destinations • 🛫 Airport vocabulary • 🏆 Earn XP!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-emerald-100 to-green-200 border-2 border-emerald-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-emerald-700 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Travel XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},gs.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-emerald-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-emerald-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-emerald-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-green-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-emerald-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-emerald-600 text-sm hover:underline"},"← Back to Travel Dreams"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",gs.findIndex(f=>f.id===s.id)+1," of ",gs.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-emerald-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-emerald-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-emerald-100 to-green-200 border-2 border-emerald-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-emerald-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-emerald-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"✈️ Listen to the Travel Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-emerald-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🌍 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-emerald-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-emerald-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-emerald-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🔥 Save to Firebase - Ready! ✈️":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(v2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(E2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function v2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"✈️":"🌍"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"World Traveler!":i>=4?"Great Explorer!":"Lesson Complete!"),a.createElement("div",{className:"bg-emerald-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," Travel XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-emerald-700 mb-2"},"🌍 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Travel Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Travel Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Travel Dreams")))))}function E2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"✈️ Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const ys=[{id:"sports-01",title:"Watching the World Cup",description:"Learn about World Cup passion and Brazilian football culture",duration:"38s",icon:"⚽",audioFile:"audio/a1-sports/audio-01-world-cup.mp3",questions:[{question:"Where was the 2022 World Cup held?",options:["Russia","Qatar","Brazil","Germany"],correct:1},{question:"How many people watched the games together?",options:["12","15","18","20"],correct:1},{question:"Who scored against South Korea?",options:["Vinícius Jr","Casemiro","Neymar","Gabriel Jesus"],correct:2},{question:"How many pizzas did they order during the tournament?",options:["6","8","10","12"],correct:1},{question:"Which team eliminated Brazil?",options:["Argentina","France","Croatia","Netherlands"],correct:2}]},{id:"sports-02",title:"Playing Football with Friends",description:"Weekend football games and local sports activities",duration:"36s",icon:"🏃‍♂️",audioFile:"audio/a1-sports/audio-02-playing-football.mp3",questions:[{question:"What time do they start playing?",options:["7 AM","8 AM","9 AM","10 AM"],correct:1},{question:"How many players usually participate?",options:["10","12","14","16"],correct:1},{question:"What position does she play?",options:["Goalkeeper","Defender","Midfielder","Forward"],correct:2},{question:"How many assists did she make last Saturday?",options:["2","3","4","5"],correct:1},{question:"How many goals did Carlos score in one game?",options:["2","3","4","5"],correct:2}]},{id:"sports-03",title:"Supporting Flamengo",description:"Brazilian football fandom and team loyalty",duration:"40s",icon:"🔴",audioFile:"audio/a1-sports/audio-03-flamengo-fan.mp3",questions:[{question:"How long has she been supporting Flamengo?",options:["12 years","15 years","18 years","20 years"],correct:1},{question:"How old was she when she got her first jersey?",options:["10 years old","12 years old","14 years old","16 years old"],correct:1},{question:"How much do season tickets cost?",options:["1,000 reais","1,200 reais","1,500 reais","1,800 reais"],correct:1},{question:"What was the score against Palmeiras?",options:["1-0","2-1","3-2","2-0"],correct:1},{question:"Until what time did she celebrate after the victory?",options:["1 AM","2 AM","3 AM","4 AM"],correct:2}]},{id:"sports-04",title:"Learning to Surf",description:"Beach sports and surfing experiences in Florianópolis",duration:"39s",icon:"🏄‍♀️",audioFile:"audio/a1-sports/audio-04-learning-surf.mp3",questions:[{question:"Where did she learn to surf?",options:["Rio de Janeiro","São Paulo","Florianópolis","Salvador"],correct:2},{question:"How much did the instructor charge per hour?",options:["60 reais","70 reais","80 reais","90 reais"],correct:2},{question:"How many times did she fall on the first day?",options:["15","20","25","30"],correct:1},{question:"How long could she stand on the board by the third lesson?",options:["10 seconds","15 seconds","20 seconds","30 seconds"],correct:1},{question:"How long did she surf her best wave?",options:["30 seconds","45 seconds","60 seconds","90 seconds"],correct:1}]},{id:"sports-05",title:"Running My First Marathon",description:"Marathon training and long-distance running challenges",duration:"37s",icon:"🏃‍♀️",audioFile:"audio/a1-sports/audio-05-first-marathon.mp3",questions:[{question:"How long did she train for the marathon?",options:["4 months","5 months","6 months","8 months"],correct:2},{question:"How many times per week did she run during training?",options:["3 times","4 times","5 times","6 times"],correct:2},{question:"How long was her longest training run?",options:["30 km","32 km","35 km","40 km"],correct:2},{question:"How many runners participated in the race?",options:["25,000","30,000","35,000","40,000"],correct:1},{question:"What was her finishing time?",options:["4 hours 45 minutes","5 hours 23 minutes","5 hours 45 minutes","6 hours 15 minutes"],correct:1}]},{id:"sports-06",title:"Watching Tennis at Brazilian Open",description:"Professional tennis tournaments and live sports experiences",duration:"41s",icon:"🎾",audioFile:"audio/a1-sports/audio-06-tennis-tournament.mp3",questions:[{question:"How much did center court tickets cost?",options:["120 reais","150 reais","180 reais","200 reais"],correct:1},{question:"How long did the match last?",options:["2 hours 45 minutes","3 hours 15 minutes","3 hours 30 minutes","4 hours"],correct:1},{question:"What was the score in the first set?",options:["6-3","6-4","7-5","6-2"],correct:1},{question:"How much did the sandwich cost?",options:["20 reais","22 reais","25 reais","28 reais"],correct:2},{question:"How much was the bottle of water?",options:["6 reais","8 reais","10 reais","12 reais"],correct:1}]},{id:"sports-07",title:"Joining a Gym for Fitness",description:"Fitness routines and gym membership experiences",duration:"35s",icon:"💪",audioFile:"audio/a1-sports/audio-07-joining-gym.mp3",questions:[{question:"How much does the monthly gym membership cost?",options:["79 reais","89 reais","99 reais","109 reais"],correct:1},{question:"How many times per week does she go to the gym?",options:["3 times","4 times","5 times","6 times"],correct:1},{question:"What is her personal trainer's name?",options:["Carlos","Rafael","Lucas","Bruno"],correct:2},{question:"How much weight has she lost after 2 months?",options:["3 kilos","4 kilos","5 kilos","6 kilos"],correct:2},{question:"What time does she wake up for morning workouts?",options:["5 AM","5:30 AM","6 AM","6:30 AM"],correct:2}]},{id:"sports-08",title:"Volleyball on the Beach",description:"Beach volleyball and coastal sports culture",duration:"42s",icon:"🏐",audioFile:"audio/a1-sports/audio-08-beach-volleyball.mp3",questions:[{question:"What time do they meet on Sundays?",options:["3 PM","4 PM","5 PM","6 PM"],correct:1},{question:"How much does it cost to rent the net for 2 hours?",options:["35 reais","40 reais","45 reais","50 reais"],correct:1},{question:"How much does each person pay for the net rental?",options:["4 reais","5 reais","6 reais","7 reais"],correct:1},{question:"What was the final score of their close game?",options:["21-18","21-19","21-20","22-20"],correct:1},{question:"How much do açaí bowls cost from the vendor?",options:["10 reais","12 reais","15 reais","18 reais"],correct:1}]},{id:"sports-09",title:"Basketball Pickup Games",description:"Learning basketball and community sports courts",duration:"44s",icon:"🏀",audioFile:"audio/a1-sports/audio-09-basketball-pickup.mp3",questions:[{question:"How many evenings per week does she play?",options:["1","2","3","4"],correct:1},{question:"Until what time do the court lights stay on?",options:["9 PM","10 PM","11 PM","Midnight"],correct:1},{question:"How many players meet for pickup games?",options:["8","10","12","14"],correct:1},{question:"How many three-pointers does she make out of 10 attempts?",options:["1","2","3","4"],correct:1},{question:"How many calories does basketball burn per hour?",options:["300","350","400","450"],correct:2}]},{id:"sports-10",title:"Coaching Kids Football",description:"Volunteer coaching and youth sports development",duration:"40s",icon:"👶",audioFile:"audio/a1-sports/audio-10-coaching-kids.mp3",questions:[{question:"What ages are the kids she coaches?",options:["6 to 10","7 to 11","8 to 12","9 to 13"],correct:2},{question:"How long does each practice session last?",options:["1.5 hours","2 hours","2.5 hours","3 hours"],correct:1},{question:"How many kids are on her team?",options:["15","16","18","20"],correct:2},{question:"What do the kids call her?",options:["Coach Ana","Teacher Ana","Professora Ana","Miss Ana"],correct:2},{question:"What was the score in their friendly match?",options:["2-2","3-3","4-4","1-1"],correct:1}]}];function w2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","sports"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Sports progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: Sports fan initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"sports-01":{status:"completed",score:5,attempts:1},"sports-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","sports"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"sports"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=ys.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Sports Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=ys.findIndex(C=>C.id===s.id),T=ys[f+1];I(!1),T?ce(T.id):(r("selection"),alert("⚽ Congratulations! Sports Passion Course Complete! 🏆 Sports Fan Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-green-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-blue-100 text-blue-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"⚽"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Sports Passion progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100"},a.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-blue-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-blue-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"⚽"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Sports Passion Course"),a.createElement("p",{className:"text-blue-100 mb-4"},"Learn English through Brazilian sports culture and athletic adventures!"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🏆 World Cup passion • 🏖️ Beach sports • ⚽ Flamengo pride!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-slate-200 border-2 border-blue-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-blue-600 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Sports XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ys.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-blue-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-blue-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-blue-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-blue-600 text-sm hover:underline"},"← Back to Sports Passion"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",ys.findIndex(f=>f.id===s.id)+1," of ",ys.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-blue-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-blue-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-slate-200 border-2 border-blue-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"⚽ Listen to the Sports Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-slate-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-700 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-blue-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🏆 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🔥 Save to Firebase - Ready! ⚽":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(_2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(b2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function _2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🏆":i>=4?"⚽":"🏃‍♂️"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Sports Champion!":i>=4?"Great Athletic Performance!":"Lesson Complete!"),a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-red-500 font-semibold text-lg"},"+",u," Sports XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-blue-700 mb-2"},"⚽ Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Sports Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold"},"Next Sports Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Sports Passion")))))}function b2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"⚽ Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}const vs=[{id:"culture-01",title:"My First Carnival Experience",description:"Experience the magic of Rio Carnival through vivid storytelling",duration:"38s",icon:"🎭",audioFile:"audio/a1-culture/audio-01-carnival-experience.mp3",questions:[{question:"How much did she pay per night for the hotel?",options:["350 reais","400 reais","450 reais","500 reais"],correct:1},{question:"What are the street parties called?",options:["Festas","Blocos","Sambas","Ruas"],correct:1},{question:"Which famous bloco did she join?",options:["Monobloco","Cordão da Bola Preta","Banda de Ipanema","Suvaco de Cristo"],correct:1},{question:"How many people joined the same bloco?",options:["1 million","1.5 million","2 million","3 million"],correct:2},{question:"How many caipirinhas did she drink?",options:["4","5","6","8"],correct:2}]},{id:"culture-02",title:"Festa Junina Traditions",description:"Discover authentic Brazilian June festivals and rural celebrations",duration:"36s",icon:"🌽",audioFile:"audio/a1-culture/audio-02-festa-junina.mp3",questions:[{question:"Which state is her grandmother's farm located in?",options:["São Paulo","Rio de Janeiro","Minas Gerais","Bahia"],correct:2},{question:"What do they use to decorate for Festa Junina?",options:["Balloons","Flowers","Triangular flags","Lights"],correct:2},{question:"Which traditional food does she NOT mention?",options:["Pamonha","Quentão","Pé-de-moleque","Brigadeiro"],correct:3},{question:"What do the children play with clay?",options:["Making pottery","Breaking the clay pot","Clay sculptures","Clay painting"],correct:1},{question:"Until what time do they tell stories?",options:["10 PM","11 PM","Midnight","1 AM"],correct:2}]},{id:"culture-03",title:"Learning Samba Dancing",description:"Connect with Brazilian roots through the art of samba",duration:"40s",icon:"💃",audioFile:"audio/a1-culture/audio-03-samba-dancing.mp3",questions:[{question:"How much does each samba class cost?",options:["50 reais","60 reais","70 reais","80 reais"],correct:1},{question:"How often does she take lessons?",options:["Once a week","Twice a week","Three times a week","Daily"],correct:1},{question:"How old is her samba teacher?",options:["60 years old","65 years old","70 years old","75 years old"],correct:1},{question:"How long did it take her to learn to dance properly?",options:["2 months","3 months","4 months","6 months"],correct:1},{question:"Which famous song can she now dance to?",options:["Girl from Ipanema","Mas Que Nada","Aquarela do Brasil","Corcovado"],correct:0}]},{id:"culture-04",title:"Regional Food Differences",description:"Explore the diverse culinary landscape across Brazilian regions",duration:"39s",icon:"🍽️",audioFile:"audio/a1-culture/audio-04-regional-foods.mp3",questions:[{question:"Which state is she originally from?",options:["São Paulo","Minas Gerais","Rio de Janeiro","Bahia"],correct:1},{question:"Which Bahian dish did she try?",options:["Feijoada","Bobó","Acarajé","Vatapá"],correct:2},{question:"What was different about Bahian food?",options:["More sweet","More salty","More spicy","More sour"],correct:2},{question:"Which state is famous for churrasco?",options:["São Paulo","Rio de Janeiro","Minas Gerais","Rio Grande do Sul"],correct:3},{question:"Which exotic fruit did she try in the Amazon?",options:["Mangaba","Jabuticaba","Cupuaçu","Caju"],correct:2}]},{id:"culture-05",title:"Brazilian Family Sunday",description:"Experience the warmth of traditional Brazilian family gatherings",duration:"37s",icon:"👨‍👩‍👧‍👦",audioFile:"audio/a1-culture/audio-05-family-sundays.mp3",questions:[{question:"What time does the family meet every Sunday?",options:["12 PM","1 PM","2 PM","3 PM"],correct:1},{question:"How many people usually attend?",options:["20","22","25","30"],correct:2},{question:"How long does grandma cook before everyone arrives?",options:["2 hours","3 hours","4 hours","5 hours"],correct:1},{question:"What do the men do during the gathering?",options:["Cook","Play with children","Watch football","Talk politics"],correct:2},{question:"Until what time does Sunday lunch last?",options:["5 PM","6 PM","7 PM","8 PM"],correct:1}]},{id:"culture-06",title:"Brazilian Hospitality",description:"Understand the famous warmth and welcoming nature of Brazilians",duration:"41s",icon:"🤝",audioFile:"audio/a1-culture/audio-06-brazilian-hospitality.mp3",questions:[{question:"Which city did her American friend visit?",options:["Rio de Janeiro","São Paulo","Brasília","Salvador"],correct:1},{question:"How long did it take for neighbors to invite her for coffee?",options:["5 minutes","10 minutes","15 minutes","30 minutes"],correct:1},{question:'What does "A casa é sua" mean in English?',options:["Welcome home","Come back soon","Make yourself at home","Safe travels"],correct:2},{question:"What do Brazilians offer when someone visits their house?",options:["Just drinks","Just food","Food and drinks","Only coffee"],correct:2},{question:"What did her friend say about the difference between Americans and Brazilians?",options:["Americans are friendlier","Americans are more polite but Brazilians are more warm-hearted","Brazilians are more polite","No difference"],correct:1}]},{id:"culture-07",title:"Beach Culture in Brazil",description:"Discover the unique social life that revolves around Brazilian beaches",duration:"35s",icon:"🏖️",audioFile:"audio/a1-culture/audio-07-beach-culture.mp3",questions:[{question:"Which beaches does she mention?",options:["Ipanema and Leblon","Ipanema and Copacabana","Copacabana and Barra","Leblon and Barra"],correct:1},{question:"How much does água de coco cost?",options:["3 reais","4 reais","5 reais","6 reais"],correct:2},{question:"What do families bring for the whole day?",options:["Just umbrellas","Chairs and umbrellas","Chairs, umbrellas, and coolers","Only coolers"],correct:2},{question:"What type of swimwear do people wear?",options:["Conservative clothing","Tiny bikinis and sungas","T-shirts and shorts","Wetsuits"],correct:1},{question:"How does she describe the beach's role in Brazilian life?",options:["Just for swimming","Only for sports","Social club, gym, and entertainment center","Quiet relaxation place"],correct:2}]},{id:"culture-08",title:"Football as Religion",description:"Explore the passionate relationship between Brazilians and football",duration:"42s",icon:"⚽",audioFile:"audio/a1-culture/audio-08-football-religion.mp3",questions:[{question:"What do children learn before walking properly?",options:["To sing","To dance","To kick a ball","To swim"],correct:2},{question:"What is a small neighborhood football field called?",options:["Quadra","Campo","Campinho","Estádio"],correct:2},{question:"In which year did Brazil win the World Cup in Japan?",options:["1998","2002","2006","2010"],correct:1},{question:"Which Brazilian football legend is NOT mentioned?",options:["Pelé","Ronaldinho","Ronaldo","Kaká"],correct:3},{question:"What does football do for all Brazilians?",options:["Makes them rich","Unites them regardless of differences","Teaches them discipline","Keeps them healthy"],correct:1}]},{id:"culture-09",title:"Brazilian Music Diversity",description:"Journey through the rich musical heritage of Brazil",duration:"44s",icon:"🎵",audioFile:"audio/a1-culture/audio-09-music-diversity.mp3",questions:[{question:"Which music style represents African rhythms?",options:["Bossa nova","Samba","Forró","Axé"],correct:1},{question:"What does MPB stand for?",options:["Música Brasileira Popular","Música Popular Brasileira","Música Brasileira Moderna","Música Popular Moderna"],correct:1},{question:"Which music style comes from the Northeast region?",options:["Samba","Axé","Forró","Funk"],correct:2},{question:"Which artists does she mention as MPB legends?",options:["Roberto Carlos and Erasmo","Caetano Veloso and Gilberto Gil","Ivete Sangalo and Claudia Leitte","Anitta and Ludmilla"],correct:1},{question:"Where can you hear music in Brazil according to her?",options:["Only in concerts","Just at home","Everywhere - buses, shops, elevators, streets","Only on the radio"],correct:2}]},{id:"culture-10",title:"Proudly Brazilian",description:"Celebrate the joy and pride of Brazilian cultural identity",duration:"40s",icon:"🇧🇷",audioFile:"audio/a1-culture/audio-10-proudly-brazilian.mp3",questions:[{question:"What does being Brazilian mean according to her?",options:["Being serious","Carrying joy in your heart","Working hard","Being rich"],correct:1},{question:"What are Brazilians known for worldwide?",options:["Being quiet and reserved","Being happy, creative, and resilient","Being very formal","Being always on time"],correct:1},{question:"Which musical style did Brazil create?",options:["Jazz","Rock","Bossa nova","Blues"],correct:2},{question:"What did Brazil invent according to her?",options:["The telephone","The computer","The flip-flop","The airplane"],correct:2},{question:"What cultural influences make Brazil unique?",options:["Only European","Indigenous and African","Indigenous, African, and European","Only indigenous"],correct:2}]}];function x2({user:t,onBack:e}){const[n,r]=U.useState("selection"),[s,o]=U.useState(null),[i,c]=U.useState([]),[u,h]=U.useState(0),[p,y]=U.useState("Listen to Audio"),[_,I]=U.useState(!1),[L,M]=U.useState(!1),[F,N]=U.useState({}),[S,k]=U.useState(1),[D,q]=U.useState(null),[z,b]=U.useState(null),[g,E]=U.useState("🔥 Loading Firebase..."),[x,A]=U.useState(!0),[R,w]=U.useState(!1),[Z,re]=U.useState({currentTime:0,duration:0,percentage:0}),P=U.useRef(null);U.useEffect(()=>{(async()=>{if(!(t!=null&&t.username)){E("❌ User not found"),A(!1);return}try{E("🔥 Connecting to Firebase...");const T=ye(ge,"students",t.username,"progress","culture"),C=await Ee(T);if(C.exists()){const V=C.data();N(V.lessons||{}),b({totalXP:V.totalXP||0,completedLessons:Object.keys(V.lessons||{}).length,lastAccess:new Date().toISOString()}),E("✅ Firebase: Culture progress loaded")}else N({}),b({totalXP:0,completedLessons:0,lastAccess:new Date().toISOString()}),E("✅ Firebase: New student initialized");A(!1)}catch(T){console.error("Firebase Error:",T),E("❌ Firebase connection failed"),A(!1),N({"culture-01":{status:"completed",score:5,attempts:1},"culture-02":{status:"completed",score:4,attempts:2}})}})()},[t]);const Se=async(f,T,C=1)=>{if(t!=null&&t.username)try{const V=T*10+(T===5?25:0),W=Date.now(),ee={lessonId:f,score:T,attempts:C,xpEarned:V,completedAt:W,status:"completed"};N(te=>({...te,[f]:ee}));const ze=ye(ge,"students",t.username,"progress","culture"),Fe=await Ee(ze);let pe={lessons:{[f]:ee},totalXP:V,lastUpdated:W,series:"culture"};if(Fe.exists()){const te=Fe.data();pe={...te,lessons:{...te.lessons,[f]:ee},totalXP:(te.totalXP||0)+V,lastUpdated:W}}await Hn(ze,pe,{merge:!0}),b(te=>({...te,totalXP:pe.totalXP,completedLessons:Object.keys(pe.lessons).length})),console.log("✅ Firebase Save Success:",{lessonId:f,score:T,xpEarned:V})}catch(V){console.error("❌ Firebase Save Error:",V)}},j=f=>{if(!f||isNaN(f))return"0:00";const T=Math.floor(f/60),C=Math.floor(f%60);return`${T}:${C.toString().padStart(2,"0")}`},Q=()=>{P.current&&(P.current.paused?(P.current.play(),w(!0),h(Math.max(u,20))):(P.current.pause(),w(!1)))},X=()=>{P.current&&(P.current.currentTime=Math.max(0,P.current.currentTime-10))},le=()=>{P.current&&(P.current.currentTime=Math.min(P.current.duration,P.current.currentTime+10))},oe=f=>{k(f),P.current&&(P.current.playbackRate=f)},he=f=>{if(P.current&&P.current.duration){const T=f.currentTarget.getBoundingClientRect(),W=(f.clientX-T.left)/T.width*P.current.duration;P.current.currentTime=W}},ce=f=>{const T=vs.find(C=>C.id===f);T&&(o(T),c(new Array(T.questions.length).fill(null)),h(0),y("Listen to Audio"),r("lesson"),q(Date.now()),w(!1),re({currentTime:0,duration:0,percentage:0}),window.scrollTo({top:0,behavior:"smooth"}))},fe=(f,T)=>{const C=[...i];C[f]=T,c(C);const V=C.filter(ee=>ee!==null).length,W=20+V/s.questions.length*80;h(W),y(`${V}/5 Questions Answered`)},Ne=async()=>{const f=i.reduce((V,W,ee)=>V+(W===s.questions[ee].correct?1:0),0),T=F[s.id],C=T?T.attempts+1:1;await Se(s.id,f,C),console.log(`✅ Culture Lesson ${s.id} saved to Firebase! Score: ${f}/5, Attempts: ${C}`),I(!0)},Ie=()=>{const f=vs.findIndex(C=>C.id===s.id),T=vs[f+1];I(!1),T?ce(T.id):(r("selection"),alert("🎉 Parabéns! Brazilian Culture Course Complete! 🇧🇷 Brazil Pride Achievement Unlocked!"))},Ke=()=>{r("selection"),o(null),window.scrollTo({top:0,behavior:"smooth"})},Be=()=>{s&&(I(!1),c(new Array(s.questions.length).fill(null)),q(Date.now()),h(0),y("Listen to Audio"),w(!1),re({currentTime:0,duration:0,percentage:0}),P.current&&(P.current.currentTime=0,P.current.pause()),window.scrollTo({top:0,behavior:"smooth"}))},me=f=>{const T=F[f];return T?{status:"Completed",class:"bg-yellow-500 text-white",score:T.score,attempts:T.attempts,xpEarned:T.xpEarned}:{status:"Available",class:"bg-green-100 text-green-800"}},Pe=i.filter(f=>f!==null).length,be=Pe===(s==null?void 0:s.questions.length);return x?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-yellow-100 flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},"🇧🇷"),a.createElement("h2",{className:"text-xl font-bold text-gray-700 mb-2"},"Connecting to Firebase..."),a.createElement("p",{className:"text-gray-600"},"Loading your Brazilian Culture progress"))):n==="selection"?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-yellow-100"},a.createElement("div",{className:"bg-gradient-to-r from-green-600 to-yellow-600 shadow-xl"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},a.createElement("button",{onClick:e,className:"bg-white bg-opacity-90 text-green-800 px-4 py-2 rounded-lg font-semibold hover:bg-opacity-100 transition-all"},"← Back to Hub"),a.createElement("div",{className:"text-center mt-6"},a.createElement("div",{className:"text-lg font-bold text-green-100 mb-2"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("div",{className:"text-5xl mb-4"},"🇧🇷"),a.createElement("h2",{className:"text-2xl font-bold text-white mb-2"},"Brazilian Culture Series"),a.createElement("p",{className:"text-green-100 mb-4"},"Celebrate Brazilian identity through 10 interactive audio lessons"),a.createElement("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-3 border border-white border-opacity-30"},a.createElement("p",{className:"text-white font-medium"},"🎯 Questions match audio content • 📊 Track progress • 🏆 Earn XP!"))))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-4"},a.createElement("div",{className:"bg-gradient-to-r from-green-100 to-yellow-200 border-2 border-green-300 rounded-lg p-4 mb-6 text-center"},a.createElement("div",{className:"text-sm"},a.createElement("span",{className:"text-green-600 font-medium"},g),z&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Total XP: ",z.totalXP," • Lessons: ",z.completedLessons,"/10")))),a.createElement("div",{className:"max-w-4xl mx-auto px-4 pb-8"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},vs.map((f,T)=>{const C=me(f.id);return a.createElement("div",{key:f.id,className:"bg-white border-2 border-green-200 rounded-xl p-4 cursor-pointer hover:scale-105 hover:border-green-400 hover:shadow-lg transition-all shadow-md",onClick:()=>ce(f.id)},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"text-2xl"},f.icon),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${C.class}`},C.status)),a.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},"Lesson ",T+1,": ",f.title),a.createElement("p",{className:"text-sm text-gray-600 mb-3"},f.description),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},a.createElement("span",null,"🎧 ",f.duration),a.createElement("span",{className:"font-semibold text-green-600"},C.score?`✅ ${C.score}/5`:"+50 XP")),C.attempts>0&&a.createElement("div",{className:"mt-2 text-xs text-gray-600"},"Attempts: ",C.attempts," • Score: ",C.score||0,"/5 • XP: ",C.xpEarned||0))})))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-yellow-100"},a.createElement("div",{className:"max-w-4xl mx-auto px-4 py-6"},a.createElement("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 mb-6 shadow-lg"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("button",{onClick:Ke,className:"text-green-600 text-sm hover:underline"},"← Back to Culture"),a.createElement("div",{className:"text-sm text-gray-600"},"Lesson ",vs.findIndex(f=>f.id===s.id)+1," of ",vs.length)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"text-sm font-bold text-green-600 mb-1"},"TEACHER ALEX ENGLISH ACADEMY"),a.createElement("h2",{className:"text-2xl font-bold text-green-600 mb-2"},s.title),a.createElement("p",{className:"text-gray-600 mb-4"},s.description)),a.createElement("div",{className:"bg-gradient-to-r from-green-100 to-yellow-200 border-2 border-green-300 rounded-lg p-3"},a.createElement("div",{className:"flex justify-between text-sm mb-2"},a.createElement("span",null,"Lesson Progress"),a.createElement("span",null,p)),a.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},a.createElement("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-500",style:{width:`${u}%`}})))),a.createElement("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 mb-6 text-center shadow-lg"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4"},"🎧 Listen to the Audio"),a.createElement("audio",{ref:P,src:s.audioFile,onLoadedData:()=>{console.log("✅ Audio loaded:",s.audioFile),P.current&&(P.current.playbackRate=S)},onError:f=>{console.error("❌ Audio error:",f.target.error),alert(`Audio file not found: ${s.audioFile}

Please check if the file exists in your project.`)},onTimeUpdate:()=>{if(P.current&&P.current.duration>0){const f=P.current.currentTime/P.current.duration*100;f>10&&h(Math.max(u,20)),re({currentTime:P.current.currentTime,duration:P.current.duration,percentage:f})}},onLoadedMetadata:()=>{P.current&&re(f=>({...f,duration:P.current.duration}))},onPlay:()=>w(!0),onPause:()=>w(!1),onEnded:()=>w(!1),className:"hidden"}),a.createElement("div",{className:"px-2 mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-2"},a.createElement("span",null,j(Z.currentTime)),a.createElement("span",{className:"font-medium"},s.title),a.createElement("span",null,j(Z.duration))),a.createElement("div",{className:"w-full h-2 bg-gradient-to-r from-gray-200 to-gray-300 rounded cursor-pointer border border-gray-300 hover:h-3 transition-all hover:shadow-md",onClick:he},a.createElement("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-700 rounded relative transition-all min-w-1",style:{width:`${Z.percentage||0}%`}},a.createElement("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-green-500 rounded-full opacity-0 hover:opacity-100 transition-opacity shadow-sm"}))),a.createElement("div",{className:"text-xs text-gray-500 mt-1"},Math.round(Z.percentage||0),"% completed")),a.createElement("div",{className:"flex items-center justify-center space-x-4 mb-4"},a.createElement("button",{onClick:X,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"⏪ -10s"),a.createElement("button",{onClick:Q,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg text-lg font-semibold border-none cursor-pointer transition-colors"},R?"⏸️ Pause":"▶️ Play"),a.createElement("button",{onClick:le,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold border-none cursor-pointer transition-colors"},"+10s ⏩")),a.createElement("div",{className:"flex items-center justify-center space-x-2 text-sm"},a.createElement("span",{className:"text-gray-600"},"Speed:"),[.5,.75,1,1.25,1.5].map(f=>a.createElement("button",{key:f,onClick:()=>oe(f),className:`px-3 py-1 rounded transition-colors ${S===f?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},f,"x"))),a.createElement("p",{className:"text-gray-600 text-sm mt-3"},"🎯 Listen carefully and then answer the questions below")),a.createElement("div",{className:"space-y-4 mb-6"},s.questions.map((f,T)=>a.createElement("div",{key:T,className:"bg-white border-2 border-green-200 rounded-xl p-6 shadow-lg"},a.createElement("h4",{className:"font-semibold text-gray-800 mb-4"},T+1,". ",f.question),a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},f.options.map((C,V)=>a.createElement("button",{key:V,onClick:()=>fe(T,V),className:`p-3 rounded-lg text-left transition-all ${i[T]===V?"bg-green-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`},String.fromCharCode(65+V),". ",C)))))),a.createElement("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6 text-center shadow-lg"},a.createElement("button",{onClick:Ne,disabled:!be,className:`px-8 py-4 rounded-xl text-lg font-bold transition-all ${be?"bg-yellow-500 hover:bg-yellow-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`},be?"🇧🇷 Save to Firebase - Ready! 🌟":`Submit Answers (${Pe}/5 Complete)`),a.createElement("p",{className:"text-gray-600 text-sm mt-2"},"Teacher Alex English Academy"))),_&&a.createElement(T2,{lesson:s,userAnswers:i,onNext:Ie,onReview:()=>M(!0),onClose:()=>I(!1),onRestart:Be}),L&&a.createElement(S2,{lesson:s,userAnswers:i,onClose:()=>M(!1)}))}function T2({lesson:t,userAnswers:e,onNext:n,onReview:r,onClose:s,onRestart:o}){const i=e.reduce((p,y,_)=>p+(y===t.questions[_].correct?1:0),0),c=Math.round(i/5*100),u=i*10+(i===5?25:0),h=i===5;return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-5xl mb-4"},h?"🇧🇷":i>=4?"🌟":"📝"),a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},h?"Brazil Pride!":i>=4?"Great Job!":"Lesson Complete!"),a.createElement("div",{className:"bg-green-50 rounded-lg p-4 mb-4"},a.createElement("div",{className:"text-3xl font-bold text-gray-800 mb-1"},i,"/5"),a.createElement("div",{className:"text-lg text-gray-600 mb-2"},c,"% Correct"),a.createElement("div",{className:"text-yellow-500 font-semibold text-lg"},"+",u," XP Earned!")),h&&a.createElement("div",{className:"bg-gradient-to-r from-green-100 to-yellow-100 rounded-lg p-3 mb-4"},a.createElement("div",{className:"text-sm font-semibold text-green-700 mb-2"},"🎉 Achievement Unlocked!"),a.createElement("div",{className:"font-medium"},"Perfect Culture Score!")),a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:r,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold"},"📊 Review Answers"),i<5&&a.createElement("button",{onClick:o,className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold"},"🔄 Try Again"),a.createElement("button",{onClick:n,className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-lg font-semibold"},"Next Lesson →"),a.createElement("button",{onClick:s,className:"text-gray-600 text-sm py-2"},"Back to Culture")))))}function S2({lesson:t,userAnswers:e,onClose:n}){return a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center"},"📝 Answer Review"),a.createElement("div",{className:"space-y-4 mb-6"},t.questions.map((r,s)=>{const o=e[s],i=o===r.correct,c=r.options[r.correct],u=r.options[o];return a.createElement("div",{key:s,className:"border-b border-gray-200 pb-4 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-800 mb-2"},s+1,". ",r.question),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:`font-medium ${i?"text-green-600":"text-red-600"}`},i?"✅":"❌"," Your answer: ",u),!i&&a.createElement("div",{className:"text-green-600 font-medium"},"✅ Correct: ",c)))})),a.createElement("button",{onClick:n,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold"},"Close Review")))}function N2(){const[t,e]=U.useState("login"),[n,r]=U.useState(null),[s,o]=U.useState(null);U.useEffect(()=>{const I=localStorage.getItem("currentUser");if(I)try{const L=JSON.parse(I);r(L),L.role==="teacher"?e("teacher-dashboard"):e("portal")}catch(L){console.error("Error parsing saved user:",L),localStorage.removeItem("currentUser")}},[]),U.useEffect(()=>{const I={login:"#/",portal:"#/portal",hub:"#/hub",foundation:"#/foundation",gaming:"#/gaming",movies:"#/movies",food:"#/food",travel:"#/travel",sports:"#/sports",culture:"#/culture","teacher-dashboard":"#/teacher"};if(I[t]){const M=I[t];window.history.pushState({view:t},"",M)}const L=M=>{if(M.state&&M.state.view){e(M.state.view);return}if(t!=="login"&&!(t==="portal"&&!M.state))if(M.preventDefault(),["foundation","gaming","movies","food","travel","sports","culture"].includes(t))e("hub");else if(t==="hub")e("portal");else{if(t==="teacher-dashboard")return;e("portal")}};return window.addEventListener("popstate",L),()=>{window.removeEventListener("popstate",L)}},[t]),U.useEffect(()=>{if(!n)return;const I={"#/":"login","#/portal":"portal","#/hub":"hub","#/foundation":"foundation","#/gaming":"gaming","#/movies":"movies","#/food":"food","#/travel":"travel","#/sports":"sports","#/culture":"culture","#/teacher":"teacher-dashboard"},L=window.location.hash;I[L]&&t!==I[L]&&e(I[L])},[n]);const i=I=>{r(I),localStorage.setItem("currentUser",JSON.stringify(I)),I.role==="teacher"?e("teacher-dashboard"):e("portal")},c=()=>{r(null),o(null),e("login"),localStorage.removeItem("currentUser")},u=()=>{e("hub")},h=()=>{e("portal")},p=I=>{e(I)},y=I=>{o(I)},_=()=>{switch(t){case"login":return a.createElement(t2,{onLoginSuccess:i});case"portal":return a.createElement(n2,{user:n,onNavigate:u,onStudentDataLoad:y,onLogout:c});case"hub":return a.createElement(r2,{user:n,studentData:s,onThemeSelect:p,onLogout:c});case"teacher-dashboard":return a.createElement(s2,{user:n,onLogout:c});case"foundation":return a.createElement(o2,{user:n,onBack:u});case"gaming":return a.createElement(l2,{user:n,onBack:u});case"movies":return a.createElement(d2,{user:n,onBack:u});case"food":return a.createElement(f2,{user:n,onBack:u});case"travel":return a.createElement(y2,{user:n,onBack:u});case"sports":return a.createElement(w2,{user:n,onBack:u});case"culture":return a.createElement(x2,{user:n,onBack:u});default:return a.createElement("div",{className:"error-view"},a.createElement("div",{className:"max-w-md mx-auto text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},"❌"),a.createElement("h2",{className:"text-xl font-bold text-gray-800 mb-4"},"Page Not Found"),a.createElement("p",{className:"text-gray-600 mb-6"},"The page you're looking for doesn't exist."),a.createElement("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors"},"← Back to Portal")))}};return a.createElement("div",{className:"App"},_(),a.createElement("style",{jsx:"true",global:"true"},`
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
            sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          background: #f8fafc;
        }

        .App {
          min-height: 100vh;
        }

        .error-view {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .font-bold { font-weight: bold; }
        .font-semibold { font-weight: 600; }
        .text-xl { font-size: 1.25rem; }
        .text-6xl { font-size: 4rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-12 { padding-top: 3rem; padding-bottom: 3rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .max-w-md { max-width: 28rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .transition-colors { transition: color 150ms ease, background-color 150ms ease; }
        
        .text-gray-600 { color: #4b5563; }
        .text-gray-800 { color: #1f2937; }
        .text-white { color: white; }
        .bg-blue-600 { background-color: #2563eb; }
        .hover\\:bg-blue-700:hover { background-color: #1d4ed8; }

        /* Professional Loading States */
        .loading-spinner {
          border: 4px solid #f3f4f6;
          border-top: 4px solid #3b82f6;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          animation: spin 1s linear infinite;
          margin: 0 auto;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
          .text-6xl { font-size: 3rem; }
          .text-xl { font-size: 1.125rem; }
          .py-12 { padding-top: 2rem; padding-bottom: 2rem; }
        }

        /* Smooth Transitions */
        * {
          transition: all 0.2s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
          width: 8px;
        }

        ::-webkit-scrollbar-track {
          background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
          background: #c1c1c1;
          border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
          background: #a1a1a1;
        }

        /* Focus States for Accessibility */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
          outline: 2px solid #3b82f6;
          outline-offset: 2px;
        }

        /* Print Styles */
        @media print {
          .no-print {
            display: none !important;
          }
        }
      `))}xu.createRoot(document.getElementById("root")).render(a.createElement(a.StrictMode,null,a.createElement(N2,null)));
